{"version":3,"file":"nav.js","sources":["../src/util.js","../src/nav/backdrop.js","../src/nav/navservice.js","../src/nav/hashstate.js","../src/nav/drawer.js","../src/nav/index.js"],"sourcesContent":["const MAX_THRESHOLD = 1\nconst MIN_ILLEGAL_THRESHOLD = 0\n\nexport const NAV_BOX_SHADOW = '0.2rem 0 0.2rem 0 rgba(0,0,0,.4)'\nexport const ZERO = 0\n\nexport function dataCamelCase(data) {\n  // remove 'data-' prefix and return camelCase string\n  return camelCase(data.substring(5), '-')\n}\n\nexport function camelCase(data, delim = '-') {\n  const list = data instanceof Array ? data : data.split(delim)\n  return list.reduce((acc, cur) => acc + cur.charAt(0)\n    .toUpperCase() + cur.slice(1)\n  )\n}\n\nexport function unique(max) {\n  Math.floor(Math.random() * max)\n}\n\nexport function $(query) {\n  return document.querySelectorAll(query)[0]\n}\n\nexport function getAttribute(el, attr) {\n  return el.getAttribute(attr)\n}\n\nexport function hasAttribute(el, attr) {\n  return el.hasAttribute(attr)\n}\n\nexport function setAttribute(el, attr, value) {\n  el.setAttribute(attr, value)\n}\n\nexport function getData(el, attr) {\n  const prop = dataCamelCase(attr)\n  // this may return `undefined` in some Safari\n  if (el.dataset && el.dataset[prop]) {\n    return el.dataset[prop]\n  }\n  return getAttribute(el, attr)\n}\n\nexport function validateThreshold(tsh) {\n  if (tsh < MAX_THRESHOLD && tsh > MIN_ILLEGAL_THRESHOLD) {\n    tsh = MAX_THRESHOLD - tsh\n    return tsh\n  } else if (tsh < MIN_ILLEGAL_THRESHOLD) {\n    tsh = MAX_THRESHOLD\n    return tsh\n  }\n  return MAX_THRESHOLD\n}\n\n/**\n * @param {HTMLElement} el an HTMLElement whose style should\n * be accessed\n * @param {string | string[] | {}} property A property/properties\n * to set or get\n * @param {string | number} style value to set as\n * @returns {CSSStyleDeclaration | string} A css style property\n * or CSSStyleDeclaration object\n */\nexport function css(el, property, style = null) {\n  const STYLEMAP = window.getComputedStyle(el)\n\n  style = style || null\n  property = property || null\n\n  if (typeof property === 'string' && style !== null) {\n    // setting one property\n    el.style[property] = style\n    return null\n  }\n  if (typeof property === 'object' && property instanceof Object) {\n    // `style` MUST = null\n    // setting many properties\n    style = property\n    for (const prop of Object.keys(style)) {\n      el.style[prop] = style[prop]\n    }\n  } else if (property instanceof Array) {\n    // return all values of properties in the array for\n    // the element as object\n    const ostyle = {}\n    style = STYLEMAP\n    for (const prop of style) {\n      ostyle[prop] = style[prop]\n    }\n    return ostyle\n  } else {\n    // get style from property\n    return STYLEMAP[property]\n  }\n  return STYLEMAP\n}\n","import { css } from '../util'\n\nexport class Backdrop {\n  constructor(backdrop) {\n    this.backdrop = backdrop\n  }\n\n  show(time) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: 1,\n      transition: `opacity linear ${time / 1e3}s`\n    })\n  }\n\n  hide(time) {\n    css(this.backdrop, {\n      opacity: 0,\n      transition: `opacity linear ${time / 1e3}s`\n    })\n    window.setTimeout(() => {\n      css(this.backdrop, {\n        display: 'none'\n      })\n    }, time)\n  }\n\n  setOpacity(val) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: val,\n      transition: 'none'\n    })\n  }\n}\n","import {\n  css,\n  NAV_BOX_SHADOW\n} from './../util'\n\nconst TRANSITION_STYLE = \"ease\"\nconst EFFECT = \"transition\"\nconst TRANS_END = \"transitionend\"\nconst UNIT = \"px\"\n\nclass NavService {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.backdropElement = this.backdrop.backdrop\n    this.event = options.DEFAULT_EVENT || 'click'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offsetWidth\n    this.trans_time = options.TRANSITION/1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.trans_time}s`\n    // state of the nav, whether open or close\n    this.alive = false\n  }\n\n  _width(unit) {\n    unit = unit || \"\"\n    return this.width + unit\n  }\n\n  activate() {\n    this.button.addEventListener(this.event, (e) => {\n      this.handler.call(this, e)\n    })\n    this.backdropElement.addEventListener(this.event, () => {\n      this._close()\n    })\n    this.nav.addEventListener(TRANS_END, () => {\n      if (!this.alive) {\n        this._cleanShadow()\n      }\n    })\n    return 0\n  }\n\n  handler() {\n    let state = NavService.css(this.nav, this.direction).\n      replace(/[^\\d]*$/, '')\n    state = /\\.(?=\\d)/.test(state) ? Math.floor(parseFloat(state)) : parseInt(state)\n    if (`${state}${UNIT}` == `-${this._width(UNIT)}`) {\n      this._open()\n    } else {\n      this._close()\n    }\n  }\n\n  _open() {\n    let style = {\n      [this.direction]: 0,\n      [EFFECT]: this.transition,\n      boxShadow: NAV_BOX_SHADOW\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.show(this.options.TRANSITION)\n    this.alive = true\n  }\n\n  _close() {\n    let style = {\n      [this.direction]: `-${this._width(UNIT)}`,\n      [EFFECT]: this.transition\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.hide(this.options.TRANSITION)\n    this.alive = false\n  }\n\n  _cleanShadow() {\n    NavService.css(this.nav, 'boxShadow', 'none')\n  }\n\n  static css(el, property, style) {\n    return css(el, property, style)\n  }\n\n  deactivate() {\n    this.button.removeEventListener(this.event, this.handler)\n    return 0\n  }\n}\n\nexport default NavService\n","import NavService from './navservice'\n\nconst TRANSITION_STYLE = 'ease'\n\nclass HashState {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.event = 'hashchange'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offSetWidth\n    this.trans_time = options.transition/1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.trans_time}s`\n    // state of the nav, whether open or close\n    this.alive = false\n  }\n\n  activate() {\n    window.addEventListener(this.event, this.handler)\n    return 0\n  }\n\n  handler(e) {\n    let hash = HashState._getHash(e)\n    let ns = new NavService(this.options)\n    if (hash === null) {\n      ns._close()\n    } else if (hash === this.button.getAttribute('href')) {\n      ns._open()\n    } else {\n      return\n    }\n  }\n\n  static _getHash(e) {\n    let hash = e.newURL\n    let indexOfHash = hash.lastIndexOf('#')\n    hash = indexOfHash !== -1 ? hash.slice(indexOfHash).replace(/(?:[^\\w\\d-]+)$/) : null\n    return hash\n  }\n\n  deactivate() {\n    window.removeEventListener(this.event, this.handler)\n    return 0\n  }\n}\nexport default HashState\n","import Drawer from './../drawer/'\nimport { NAV_BOX_SHADOW } from './../util'\n\nconst ZERO = 0\nconst KILO = 1e3\nconst MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD = 0.7\nconst MIN_POSITIVE_DISPLACEMENT = 40\nconst MIN_NEGATIVE_DISPLACEMENT = -MIN_POSITIVE_DISPLACEMENT\nconst TRANSITION_STYLE = 'linear'\nconst EFFECT = 'transition'\nconst TRANS_TIMING = '0.1s' // This value is basic, the calc'ed value will depend on drawer speed\nconst TRANS_TEMPLATE = `${TRANSITION_STYLE} ${TRANS_TIMING}`\nconst HIDDEN = 'hidden'\nconst SCROLL = 'scroll'\nconst START = 'start'\nconst MOVE = 'move'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = `below${THRESHOLD}`\nconst DIRECTIONS = ['top', 'left', 'bottom', 'right']\n\nclass NavDrawer {\n  /**\n   * Creates a new NavDrawer object. Providing the Left and Right\n   * Drawer functionality.\n   * Support for Top and Bottom may come in the future\n   * @throws RangeError\n   * @param {{}} options An options Object to configure the Drawer with\n   */\n  constructor(options) {\n    this.options = options\n    /**\n     * @type {HTMLElement}\n     */\n    this.element = this.options.ELEMENT\n    /**\n     * @type {HTMLBodyElement}\n     */\n    this._body = this.options.BODY\n    this._backdrop = this.options.BACKDROP\n    /**\n     * @type {number}\n     */\n    this.direction = this.options.DIRECTION\n\n    this.checkDirection()\n\n    this.directionString = DIRECTIONS[this.direction]\n\n    let o = {\n      ...options,\n      SIZE: this.elementSize,\n      TARGET: document\n    }\n    this.drawer = new Drawer.SnappedDrawer(o)\n    this.transition = `${this.directionString} ${TRANS_TEMPLATE}`\n  }\n\n  checkDirection() {\n    if (this.direction !== Drawer.LEFT && this.direction !== Drawer.RIGHT) {\n      throw RangeError('Direction out of range')\n    }\n  }\n\n  activate() {\n    this.drawer.on(START, this._startHandler)\n      .on(MOVE, this._moveHandler)\n      .on(THRESHOLD, this._threshold)\n      .on(BELOW_THRESHOLD, this._belowThreshold)\n      .setContext(this)\n      .activate()\n    return 0\n  }\n\n  deactivate() {\n    this.drawer.deactivate()\n    return 0\n  }\n\n  get elementSize() {\n    const axis = this.direction\n    if (axis === Drawer.UP || axis === Drawer.DOWN) {\n      return this.element.offsetHeight\n    } else {\n      return this.element.offsetWidth\n    }\n  }\n\n  _startHandler(response, rectangle) {\n    this.element.style[this.directionString] = response.displacement\n    this.element.style.boxShadow = NAV_BOX_SHADOW\n    this.element.style[EFFECT] = this.transition\n    this._body.style.overflow = HIDDEN\n  }\n\n  _moveHandler(response, rectangle) {\n    const curPos = this.direction === Drawer.UP || this.direction === Drawer.DOWN ? rectangle.coordsY.y2 : rectangle.coordsX.x2\n    this.element.style[this.directionString] = response.dimension\n    this.element.style[EFFECT] = this.transition\n    this._backdrop.setOpacity(curPos / this.elementSize)\n  }\n\n  _threshold(state, stateObj) {\n    const isOpen = state[1] === 'open'\n    const options = {\n      stateObj\n    }\n    if (isOpen) {\n      this._hide(options)\n    } else {\n      this._show(options)\n    }\n  }\n\n  _belowThreshold(state, stateObj, rect) {\n    const isClosed = state[1] !== 'open'\n    const overallEventTime = stateObj.TIMING\n    const MTTOB = MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD\n    const MPD = MIN_POSITIVE_DISPLACEMENT\n    const MND = MIN_NEGATIVE_DISPLACEMENT\n    const displacement = this.direction === Drawer.UP || this.direction === Drawer.DOWN ? rect.displacementY : rect.displacementX\n    const options = {\n      stateObj\n    }\n    const LOGIC = this.direction === Drawer.LEFT ? (displacement > ZERO && displacement >= MPD && rect.greaterWidth) : (displacement < ZERO && displacement <= MND && rect.greaterWidth)\n\n    if (overallEventTime / KILO < MTTOB) {\n      console.log(overallEventTime)\n      // DIRECTION: Drawer.UP | Drawer.LEFT\n      if (LOGIC) {\n        console.log(true)\n        this.__overrideBelowThresh(!isClosed, options)\n      } else {\n        if (isClosed) {\n          // close it back didn't hit thresh. and can't override\n          this._hide(options)\n        } else {\n          // open it back didn't hit thresh. and can't override because not enough displacement\n          this._show(options)\n        }\n      }\n    } else {\n      if (isClosed) {\n        // close it back didn't hit thresh. and can't override because not enough velocity or displacement\n        this._hide(options)\n      } else {\n        // open it back didn't hit thresh. and can't override because not enough velocity or displacement\n        this._show(options)\n      }\n    }\n  }\n\n  _show(options) {\n    this._body.style.overflow = HIDDEN\n    this._backdrop.show(this.options.TRANSITION)\n    this.element.style[this.directionString] = options.stateObj.dimension\n  }\n\n  _hide(options) {\n    this._body.style.overflow = SCROLL\n    this._backdrop.hide(this.options.TRANSITION)\n    this.element.style[this.directionString] = options.stateObj.dimension\n    this.element.style.boxShadow = 'none'\n  }\n\n  __overrideBelowThresh(isOpen, options) {\n    if (isOpen) {\n      this._body.style.overflow = SCROLL\n      this._backdrop.hide(this.options.TRANSITION)\n      this.element.style[this.directionString] = options.stateObj.oppositeDimension\n      this.element.style.boxShadow = 'none'\n    } else {\n      this._body.style.overflow = HIDDEN\n      this._backdrop.show(this.options.TRANSITION)\n      this.element.style[this.directionString] = options.stateObj.oppositeDimension\n    }\n  }\n}\n\nexport default NavDrawer\n","import { Backdrop } from './backdrop'\nimport HashState from './hashstate'\nimport NavDrawer from './drawer'\nimport NavService from './navservice'\nimport { css, getData, getAttribute, hasAttribute, setAttribute, unique, $ } from '../util'\n\nconst BACKDROP = \"backdrop\"\nconst DEF_CLASSNAME = \"cardinal-navcard\"\nconst MEDIA_HASH = \"data-hash-max-width\"\nconst MEDIA_DRAW = \"data-draw-max-width\"\nconst _CLASS = \"class\"\nconst EVENTS = {\n  touchend: \"touchend\",\n  touchmove: \"touchmove\",\n  touchstart: \"touchstart\"\n}\n\nclass NavCard {\n\n  constructor() {\n    // **Do not insert the below element into DOM**\n    /**\n     * **Covert Backdrop**\n     * just incase `options.backdrop = false`\n     * prevent multiple `if` statements\n     * so we don't have to check whether\n     * backdrop is enabled anytime we want to access it\n     * insert into DOM only:\n     * when `options.backdrop = true`\n     * `options.backdropClass` is undefined\n    */\n    this.backdrop = document.createElement('div')\n    this.backdrop.className = BACKDROP\n    css(this.backdrop, {\n      background: 'rgba(0,0,0,.4)',\n      height: '100%',\n      width: '100%',\n      display: 'none',\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      zIndex: -1\n    })\n\n    this.body = document.body\n    // init with null\n    this.Drawer = null\n    this.NavService = null\n    this.HashState = null\n\n    NavCard.defaultConfig = {\n      type: \"nav\",\n      transition: 500,\n      event: \"click\",\n      direction: \"left\",\n      backdrop: false,\n      backdropClass: null,\n      accessAttr: \"data-target\",\n      maxStartArea: 25,\n      threshold: 1/2,\n      unit: 'px'\n    }\n\n    NavCard.API = {\n      DEFAULT: 0,\n      DRAWER: 1,\n      HASH: 2,\n    }\n  }\n\n  setup(_elem, options) {\n    let element,\n      backdrop,\n      dataAccess,\n      opts,\n      HASH_NAV_MAX_WIDTH,\n      NAV_DRAW_MAX_WIDTH,\n      destinationId,\n      destination\n\n    opts = NavCard.defaultConfig\n\n    if (options && \"object\" === typeof options) {\n      for (let prop of Object.keys(options)) {\n        if (opts.hasOwnProperty(prop))\n          opts[prop] = options[prop]\n        else\n          continue\n      }\n    }\n\n    if (opts.backdrop) {\n      let backdrop_class = !!opts.backdropClass ? opts.backdropClass : false\n      // if `opts.backdrop` and no `backdrop_class` given\n      // append our custom backdrop\n      if (!backdrop_class) this.body.append(this.backdrop)\n\n      if (typeof backdrop_class === 'string') {\n        // check if backdrop_class is normal string or css class selector\n        backdrop =  /^\\./.test(backdrop_class) ? backdrop_class : `.${backdrop_class}`\n        this.backdrop = $(backdrop)\n      }\n\n    }\n\n    dataAccess = opts.accessAttr\n\n    /**\n     * Initialization element e.g <button ...</button>\n     */\n    element = $(_elem)\n    destinationId = getData(element, dataAccess)\n\n    // check if the data-* attribute value is a valid css selector\n    // if not prepend a '#' to it as id selector is default\n    let isCSS_Selector = /^(?:\\#|\\.|\\u005b[^\\u005c]\\u005c)/.test(destinationId),\n    isClass = /^\\./.test(destinationId)\n    destinationId = isCSS_Selector ? destinationId : `#${destinationId}`\n\n    destination = $(destinationId)\n\n    // we want a class too so in case we've got an id selector\n    // find the classname or assign a unique class\n    let default_class = `${DEF_CLASSNAME}-${unique(2<<7)}`\n    let classname = isClass ? destinationId : hasAttribute(destination, _CLASS) ? getAttribute(destination, _CLASS) : (setAttribute(destination, _CLASS, default_class), default_class)\n    let classlist = classname.split(/\\s+/)\n    classname = \".\" + ((classlist.length >= 2) ? classlist[0] + \".\" + classlist[1] : classname)\n    destination = isClass ? destination : $(classname)\n\n    // These attributes are used for the RWD(Responsive Web Design)\n    // features. The navigation drawer module is best suited for mobile\n    // touch devices. The program shouldn't listen for certain events on\n    // desktop devices as side-nav may be hidden. The attribute here are\n    // the screen sizes after which the nav is hidden.\n    HASH_NAV_MAX_WIDTH = getData(destination, MEDIA_HASH)\n    NAV_DRAW_MAX_WIDTH = getData(destination, MEDIA_DRAW)\n    HASH_NAV_MAX_WIDTH = /px$/.test(HASH_NAV_MAX_WIDTH) ? HASH_NAV_MAX_WIDTH : `${HASH_NAV_MAX_WIDTH}px`\n    NAV_DRAW_MAX_WIDTH = /px$/.test(NAV_DRAW_MAX_WIDTH) ? NAV_DRAW_MAX_WIDTH : `${NAV_DRAW_MAX_WIDTH}px`\n\n    let defaultOptions = {\n      ELEMENT: destination,\n      INIT_ELEM: element,\n      BACKDROP: new Backdrop(this.backdrop),\n      BODY: this.body,\n      TRANSITION: opts.transition,\n      DIRECTION: ['top', 'left', 'bottom', 'right'][opts.direction],\n      unit: options.unit\n    }\n    let drawerOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: NAV_DRAW_MAX_WIDTH,\n      ...EVENTS,\n      DIRECTION: opts.direction,\n      maxStartArea: opts.maxStartArea,\n      threshold: opts.threshold\n    }\n    let hashOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: HASH_NAV_MAX_WIDTH\n    }\n\n    this._drawerAPI(drawerOptions).activate()\n    this._hashAPI(hashOptions).activate()\n    this._defaultAPI(defaultOptions).activate()\n\n  }\n\n  _drawerAPI(options) {\n    this.Drawer = new NavDrawer(options)\n    return {\n      activate: () => this.Drawer.activate(),\n      deactivate: () => this.Drawer.deactivate()\n    }\n  }\n\n  _hashAPI(options) {\n    this.HashState = new HashState(options)\n    return {\n      activate: () => this.HashState.activate(),\n      deactivate: () => this.HashState.deactivate(),\n    }\n  }\n\n  _defaultAPI(options) {\n    this.NavService = new NavService(options)\n    return {\n      activate: () => this.NavService.activate(),\n      deactivate: () => this.NavService.deactivate(),\n    }\n  }\n\n  terminate(state) {\n    // this._*API(null).deactivate()\n    switch(state) {\n      case NavCard.API.DEFAULT:\n        if (this.NavService instanceof NavService)\n          this.NavService.deactivate()\n        break\n      case NavCard.API.DRAWER:\n        if (this.Drawer instanceof Drawer)\n          this.Drawer.deactivate()\n        break\n      case NavCard.API.HASH:\n        if (this.HashState instanceof HashState)\n          this.HashState.deactivate()\n        break\n      default:\n        this._drawerAPI(null).deactivate()\n        this._hashAPI(null).deactivate()\n        this._defaultAPI(null).deactivate()\n    }\n  }\n}\n\nexport default NavCard\n"],"names":["NAV_BOX_SHADOW","dataCamelCase","data","camelCase","substring","delim","list","Array","split","reduce","acc","cur","charAt","toUpperCase","slice","unique","max","Math","$","query","document","querySelectorAll","getAttribute","el","attr","hasAttribute","setAttribute","value","getData","prop","dataset","css","property","style","STYLEMAP","window","getComputedStyle","Object","keys","ostyle","Backdrop","backdrop","show","time","display","opacity","transition","hide","setTimeout","setOpacity","val","TRANSITION_STYLE","EFFECT","TRANS_END","UNIT","NavService","options","nav","ELEMENT","button","INIT_ELEM","BACKDROP","backdropElement","event","DEFAULT_EVENT","direction","DIRECTION","width","offsetWidth","trans_time","TRANSITION","alive","_width","unit","activate","addEventListener","e","handler","call","_close","_cleanShadow","state","replace","test","floor","parseFloat","parseInt","_open","boxShadow","deactivate","removeEventListener","HashState","offSetWidth","hash","_getHash","ns","newURL","indexOfHash","lastIndexOf","ZERO","KILO","MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD","MIN_POSITIVE_DISPLACEMENT","MIN_NEGATIVE_DISPLACEMENT","TRANS_TIMING","TRANS_TEMPLATE","HIDDEN","SCROLL","START","MOVE","THRESHOLD","BELOW_THRESHOLD","DIRECTIONS","NavDrawer","element","_body","BODY","_backdrop","checkDirection","directionString","o","SIZE","elementSize","TARGET","drawer","Drawer","SnappedDrawer","LEFT","RIGHT","RangeError","on","_startHandler","_moveHandler","_threshold","_belowThreshold","setContext","response","rectangle","displacement","overflow","curPos","UP","DOWN","coordsY","y2","coordsX","x2","dimension","stateObj","isOpen","_hide","_show","rect","isClosed","overallEventTime","TIMING","MTTOB","MPD","MND","displacementY","displacementX","LOGIC","greaterWidth","console","log","__overrideBelowThresh","oppositeDimension","axis","offsetHeight","DEF_CLASSNAME","MEDIA_HASH","MEDIA_DRAW","_CLASS","EVENTS","touchend","touchmove","touchstart","NavCard","createElement","className","background","height","position","top","left","zIndex","body","defaultConfig","type","backdropClass","accessAttr","maxStartArea","threshold","API","DEFAULT","DRAWER","HASH","setup","_elem","dataAccess","opts","HASH_NAV_MAX_WIDTH","NAV_DRAW_MAX_WIDTH","destinationId","destination","hasOwnProperty","backdrop_class","append","isCSS_Selector","isClass","default_class","classname","classlist","length","defaultOptions","drawerOptions","MAX_WIDTH","hashOptions","_drawerAPI","_hashAPI","_defaultAPI","terminate"],"mappings":"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"}