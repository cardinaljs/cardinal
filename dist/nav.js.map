{"version":3,"file":"nav.js","sources":["../../src_modules/js/util.js","../../src_modules/js/nav/backdrop.js","../../src_modules/js/nav/navservice.js","../../src_modules/js/nav/hashstate.js","../../src_modules/js/nav/drawer.js","../../src_modules/js/nav/index.js"],"sourcesContent":["const MAX_THRESHOLD = 1\nconst MIN_ILLEGAL_THRESHOLD = 0\n\nexport default class Final {\n  static START = 2\n  static HIDDEN = 'hidden'\n  static ZERO = 0\n  static DISPLAY = 'block'\n}\n\nexport function dataCamelCase(data) {\n  // remove 'data-' prefix and return camelCase string\n  return camelCase(data.substring(5), '-')\n}\n\nexport function camelCase(data, delim = '-') {\n  const list = data instanceof Array ? data : data.split(delim)\n  return list.reduce((acc, cur) => acc + cur.charAt(0)\n    .toUpperCase() + cur.slice(1)\n  )\n}\n\nexport function unique(max) {\n  Math.floor(Math.random() * max)\n}\n\nexport function $(query) {\n  return document.querySelectorAll(query)[0]\n}\n\nexport function getAttribute(el, attr) {\n  return el.getAttribute(attr)\n}\n\nexport function hasAttribute(el, attr) {\n  return el.hasAttribute(attr)\n}\n\nexport function setAttribute(el, attr, value) {\n  el.setAttribute(attr, value)\n}\n\nexport function getData(el, attr) {\n  const prop = dataCamelCase(attr)\n  // this may return `undefined` in some Safari\n  if (el.dataset && el.dataset[prop]) {\n    return el.dataset[prop]\n  }\n  return getAttribute(el, attr)\n}\n\nexport function validateThreshold(tsh) {\n  if (tsh < MAX_THRESHOLD && tsh > MIN_ILLEGAL_THRESHOLD) {\n    tsh = MAX_THRESHOLD - tsh\n    return tsh\n  } else if (tsh < MIN_ILLEGAL_THRESHOLD) {\n    tsh = MAX_THRESHOLD\n    return tsh\n  }\n  return MAX_THRESHOLD\n}\n\nexport function css(el, property, style) {\n  const STYLEMAP = window.getComputedStyle(el)\n\n  style = style || null\n  property = property || null\n\n  if (typeof property === 'string' && style !== null) {\n    // setting one property\n    el.style[property] = style\n    return\n  }\n  if (typeof property === 'object' && property instanceof Object) {\n    // `style` MUST = null\n    // setting many properties\n    style = property\n    for (const prop of Object.keys(style)) {\n      el.style[prop] = style[prop]\n    }\n  } else if (property instanceof Array) {\n    // return all values of properties in the array for\n    // the element as object\n    const ostyle = {}\n    style = STYLEMAP\n    for (const prop of style) {\n      ostyle[prop] = style[prop]\n    }\n    return ostyle\n  } else {\n    // get style from property\n    return STYLEMAP[property]\n  }\n}\n","import {css} from '../util'\n\nexport class Backdrop {\n  constructor(backdrop) {\n    this.backdrop = backdrop\n  }\n\n  show(time) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: 1,\n      transition: `opacity linear ${time / 1e3}`\n    })\n  }\n\n  hide(time) {\n    css(this.backdrop, {\n      opacity: 0,\n      transition: `opacity linear ${time / 1e3}`\n    })\n    window.setTimeout(() => {\n      css(this.backdrop, {\n        display: 'none'\n      })\n    }, time)\n  }\n\n  setOpacity(val) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: val,\n      transition: 'none'\n    })\n  }\n}\n","import {css} from './../util'\n\nconst TRANSITION_STYLE = \"ease\"\nconst EFFECT = \"transition\"\nconst HASH = \"menu\"\nconst UNIT = \"px\"\n\nclass NavService {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.backdropElement = this.backdrop.backdrop\n    this.event = options.DEFAULT_EVENT || 'click'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offsetWidth\n    this.trans_time = options.TRANSITION/1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.trans_time}s`\n    // state of the nav, whether open or close\n    this.alive = false\n  }\n\n  _width(unit) {\n    unit = unit || \"\"\n    return this.width + unit\n  }\n\n  activate() {\n    this.button.addEventListener(this.event, (e) => {\n      this.handler.call(this, e)\n    })\n    this.backdropElement.addEventListener(this.event, (e) => {\n      this.handler.call(this, e)\n    })\n    return 0\n  }\n\n  handler() {\n    let state = NavService.css(this.nav, this.direction).\n      replace(/[^\\d]*$/, '')\n    state = /\\.(?=\\d)/.test(state) ? Math.floor(parseFloat(state)) : parseInt(state)\n    if (`${state}${UNIT}` == `-${this._width(UNIT)}`) {\n      this._open()\n    } else {\n      this._close()\n    }\n  }\n\n  _open() {\n    let style = {\n      [this.direction]: 0,\n      [EFFECT]: this.transition\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.show(this.options.TRANSITION)\n    this.alive = true\n  }\n\n  _close() {\n    let style = {\n      [this.direction]: `-${this._width(UNIT)}`,\n      [EFFECT]: this.transition\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.hide(this.options.TRANSITION)\n    this.alive = false\n  }\n\n  static css(el, property, style) {\n    return css(el, property, style)\n  }\n\n  deactivate() {\n    this.button.removeEventListener(this.event, this.handler)\n    return 0\n  }\n}\n\nexport default NavService\n","import NavService from './navservice'\n\nconst TRANSITION_STYLE = 'ease'\n\nclass HashState {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.event = 'hashchange'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offSetWidth\n    this.trans_time = options.transition/1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.trans_time}s`\n    // state of the nav, whether open or close\n    this.alive = false\n  }\n\n  activate() {\n    window.addEventListener(this.event, this.handler)\n    return 0\n  }\n\n  handler(e) {\n    let hash = HashState._getHash(e)\n    let ns = new NavService(this.options)\n    if (hash === null) {\n      ns._close()\n    } else if (hash === this.button.getAttribute('href')) {\n      ns._open()\n    } else {\n      return\n    }\n  }\n\n  static _getHash(e) {\n    let hash = e.newURL\n    let indexOfHash = hash.lastIndexOf('#')\n    hash = indexOfHash !== -1 ? hash.slice(indexOfHash).replace(/(?:[^\\w\\d-]+)$/) : null\n    return hash\n  }\n\n  deactivate() {\n    window.removeEventListener(this.event, this.handler)\n    return 0\n  }\n}\nexport default HashState\n","import BoundDrawer from './../drawer/'\n\nconst TRANSITION_STYLE = 'linear'\nconst EFFECT = 'transition'\nconst TRANS_TIMING = '0.1s' // This value is basic, the calc'ed value will depend on drawer speed\nconst OPACITY = 'opacity'\nconst TRANS_TEMPLATE = `${TRANSITION_STYLE} ${TRANS_TIMING}`\nconst HIDDEN = 'hidden'\nconst SCROLL = 'scroll'\nconst START = 'start'\nconst MOVE = 'move'\nconst END = 'end'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = `below${THRESHOLD}`\nconst DIRECTIONS = ['top', 'left', 'bottom', 'right']\n\nclass NavDrawer {\n  /**\n   *\n   * @param {{}} options An options Object to configure the Drawer with\n   */\n  constructor(options) {\n    this.options = options\n    /**\n     * @type {HTMLElement}\n     */\n    this.element = this.options.ELEMENT\n    /**\n     * @type {HTMLElement}\n     */\n    this.body = this.options.BODY\n    /**\n     * @type {HTMLElement}\n     */\n    this.backdrop = this.options.BACKDROP\n    /**\n     * @type {string}\n     */\n    this.direction = this.options.DIRECTION\n    this.directionString = DIRECTIONS[this.direction]\n    this.handlers = []\n    this.events = [\n      this.options.touchstart,\n      this.options.touchmove,\n      this.options.touchend\n    ]\n\n    let o = {\n      ...options,\n      TARGET: document\n    }\n    this.drawer = new BoundDrawer(o)\n    this.transition = `${this.directionString} ${TRANS_TEMPLATE}`\n  }\n\n  activate() {\n    this.drawer.on(START, this._startHandler)\n      .on(MOVE, this._moveHandler)\n      .on(THRESHOLD, this._threshold)\n      .on(BELOW_THRESHOLD, this._belowThreshold)\n      .setContext(this)\n      .activate()\n    return 0\n  }\n\n  deactivate() {\n    this.drawer.deactivate()\n    return 0\n  }\n\n  get elementSize() {\n    const axis = this.direction\n    if (axis === BoundDrawer.UP || axis === BoundDrawer.DOWN) {\n      return this.element.offsetHeight\n    } else {\n      return this.element.offsetWidth\n    }\n  }\n\n  _startHandler(response, rectangle) {\n    this.element.style[this.directionString] = response.displacement\n    this.element.style[EFFECT] = this.transition\n    this.body.style.overflow = HIDDEN\n  }\n\n  _moveHandler(response, rectangle) {\n    this.element.style[this.directionString] = response.dimension\n    this.element.style[EFFECT] = this.transition\n    this.backdrop.setOpacity(rectangle.coordsX.x2 / this.elementSize)\n  }\n\n  _threshold(state, stateObj) {\n    const wasOpen = state[1] === 'open'\n    if (wasOpen) {\n      this.body.style.overflow = SCROLL\n      this.backdrop.hide(this.options.TRANSITION)\n    } else {\n      this.body.style.overflow = HIDDEN\n      this.backdrop.show(this.options.TRANSITION)\n    }\n    this.element.style[this.directionString] = stateObj.dimension\n  }\n\n  _belowThreshold(state, stateObj, rect) {\n    const wasClosed = state[1] !== 'open'\n    const overallEventTime = stateObj.TIMING\n\n    if (overallEventTime / 1e3 < 0.7) {\n      console.log(overallEventTime)\n      const displacement = this.direction === BoundDrawer.UP || this.direction === BoundDrawer.DOWN ? rect.displacementY : rect.displacementX\n\n      if(displacement > 0 && displacement >= 40 && rect.greaterWidth) {\n        this.body.style.overflow = !wasClosed ? SCROLL : HIDDEN\n        this.element.style[this.directionString] = stateObj.oppositeDimension\n        this.backdrop.show(this.options.TRANSITION)\n        console.log(`yeah ${rect.width}`)\n      } else if (displacement < 0 && displacement <= -40 && rect.greaterWidth) {\n        if (!wasClosed) {\n          this.body.style.overflow = SCROLL\n          this.backdrop.hide(this.options.TRANSITION)\n        } else {\n          this.body.style.overflow = HIDDEN\n          this.backdrop.show(this.options.TRANSITION)\n        }\n        this.element.style[this.directionString] = stateObj.oppositeDimension\n      }\n\n    } else {\n      if (wasClosed) {\n        this.body.style.overflow = SCROLL\n        this.backdrop.hide(this.options.TRANSITION)\n      } else {\n        this.body.style.overflow = HIDDEN\n        this.backdrop.show(this.options.TRANSITION)\n      }\n      this.element.style[this.directionString] = stateObj.dimension\n    }\n  }\n}\n\nexport default NavDrawer\n","import {Backdrop} from './backdrop'\nimport HashState from './hashstate'\nimport NavDrawer from './drawer'\nimport NavService from './navservice'\nimport {css, getData, getAttribute, hasAttribute, setAttribute, unique, $} from '../util'\n\nconst BACKDROP = \"backdrop\"\nconst DEF_CLASSNAME = \"cardinal-navcard\"\nconst MEDIA_HASH = \"data-hash-max-width\"\nconst MEDIA_DRAW = \"data-draw-max-width\"\nconst _CLASS = \"class\"\nconst EVENTS = {\n  touchend: \"touchend\",\n  touchmove: \"touchmove\",\n  touchstart: \"touchstart\"\n}\n\nclass NavCard {\n\n  constructor() {\n    // **Do not insert the below element into DOM**\n    /**\n     * **Covert Backdrop**\n     * just incase `options.backdrop = false`\n     * prevent multiple `if` statements\n     * so we don't have to check whether\n     * backdrop is enabled anytime we want to access it\n     * insert into DOM only:\n     * when `options.backdrop = true`\n     * `options.backdropClass` is undefined\n    */\n    this.backdrop = document.createElement('div')\n    this.backdrop.className = BACKDROP\n    css(this.backdrop, {\n      background: 'rgba(0,0,0,.4)',\n      height: '100%',\n      width: '100%',\n      display: 'none',\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      zIndex: -1\n    })\n\n    this.body = document.body\n    // init with null\n    this.Drawer = null\n    this.NavService = null\n    this.HashState = null\n\n    NavCard.defaultConfig = {\n      type: \"nav\",\n      transition: 500,\n      event: \"click\",\n      direction: \"left\",\n      backdrop: false,\n      backdropClass: null,\n      accessAttr: \"data-target\",\n      maxStartArea: 25,\n      threshold: 1/2,\n      unit: 'px'\n    }\n\n    NavCard.API = {\n      DEFAULT: 0,\n      DRAWER: 1,\n      HASH: 2,\n    }\n  }\n\n  setup(_elem, options) {\n    let element,\n      backdrop,\n      dataAccess,\n      opts,\n      HASH_NAV_MAX_WIDTH,\n      NAV_DRAW_MAX_WIDTH,\n      destinationId,\n      destination\n\n    opts = NavCard.defaultConfig\n\n    if (options && \"object\" === typeof options) {\n      for (let prop of Object.keys(options)) {\n        if (opts.hasOwnProperty(prop))\n          opts[prop] = options[prop]\n        else\n          continue\n      }\n    }\n\n    if (opts.backdrop) {\n      let backdrop_class = !!opts.backdropClass ? opts.backdropClass : false\n      // if `opts.backdrop` and no `backdrop_class` given\n      // append our custom backdrop\n      if (!backdrop_class) this.body.append(this.backdrop)\n\n      if (typeof backdrop_class === 'string') {\n        // check if backdrop_class is normal string or css class selector\n        backdrop =  /^\\./.test(backdrop_class) ? backdrop_class : `.${backdrop_class}`\n        this.backdrop = $(backdrop)\n      }\n\n    }\n\n    dataAccess = opts.accessAttr\n\n    /**\n     * Initialization element e.g <button ...</button>\n     */\n    element = $(_elem)\n    destinationId = getData(element, dataAccess)\n\n    // check if the data-* attribute value is a valid css selector\n    // if not prepend a '#' to it as id selector is default\n    let isCSS_Selector = /^(?:\\#|\\.|\\u005b[^\\u005c]\\u005c)/.test(destinationId),\n    isClass = /^\\./.test(destinationId)\n    destinationId = isCSS_Selector ? destinationId : `#${destinationId}`\n\n    destination = $(destinationId)\n\n    // we want a class too so in case we've got an id selector\n    // find the classname or assign a unique class\n    let default_class = `${DEF_CLASSNAME}-${unique(2<<7)}`\n    let classname = isClass ? destinationId : hasAttribute(destination, _CLASS) ? getAttribute(destination, _CLASS) : (setAttribute(destination, _CLASS, default_class), default_class)\n    let classlist = classname.split(/\\s+/)\n    classname = \".\" + ((classlist.length >= 2) ? classlist[0] + \".\" + classlist[1] : classname)\n    destination = isClass ? destination : $(classname)\n\n    // These attributes are used for the RWD(Responsive Web Design)\n    // features. The navigation drawer module is best suited for mobile\n    // touch devices. The program shouldn't listen for certain events on\n    // desktop devices as side-nav may be hidden. The attribute here are\n    // the screen sizes after which the nav is hidden.\n    HASH_NAV_MAX_WIDTH = getData(destination, MEDIA_HASH)\n    NAV_DRAW_MAX_WIDTH = getData(destination, MEDIA_DRAW)\n    HASH_NAV_MAX_WIDTH = /px$/.test(HASH_NAV_MAX_WIDTH) ? HASH_NAV_MAX_WIDTH : `${HASH_NAV_MAX_WIDTH}px`\n    NAV_DRAW_MAX_WIDTH = /px$/.test(NAV_DRAW_MAX_WIDTH) ? NAV_DRAW_MAX_WIDTH : `${NAV_DRAW_MAX_WIDTH}px`\n\n    let defaultOptions = {\n      ELEMENT: destination,\n      INIT_ELEM: element,\n      BACKDROP: new Backdrop(this.backdrop),\n      BODY: this.body,\n      TRANSITION: opts.transition,\n      DIRECTION: ['top', 'left', 'bottom', 'right'][opts.direction],\n      unit: options.unit\n    }\n    let drawerOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: NAV_DRAW_MAX_WIDTH,\n      ...EVENTS,\n      DIRECTION: opts.direction,\n      maxStartArea: opts.maxStartArea,\n      threshold: opts.threshold\n    }\n    let hashOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: HASH_NAV_MAX_WIDTH\n    }\n\n    this._drawerAPI(drawerOptions).activate()\n    this._hashAPI(hashOptions).activate()\n    this._defaultAPI(defaultOptions).activate()\n\n  }\n\n  _drawerAPI(options) {\n    this.Drawer = new NavDrawer(options)\n    return {\n      activate: () => this.Drawer.activate(),\n      deactivate: () => this.Drawer.deactivate()\n    }\n  }\n\n  _hashAPI(options) {\n    this.HashState = new HashState(options)\n    return {\n      activate: () => this.HashState.activate(),\n      deactivate: () => this.HashState.deactivate(),\n    }\n  }\n\n  _defaultAPI(options) {\n    this.NavService = new NavService(options)\n    return {\n      activate: () => this.NavService.activate(),\n      deactivate: () => this.NavService.deactivate(),\n    }\n  }\n\n  terminate(state) {\n    // this._*API(null).deactivate()\n    switch(state) {\n      case NavCard.API.DEFAULT:\n        if (this.NavService instanceof NavService)\n          this.NavService.deactivate()\n        break\n      case NavCard.API.DRAWER:\n        if (this.Drawer instanceof Drawer)\n          this.Drawer.deactivate()\n        break\n      case NavCard.API.HASH:\n        if (this.HashState instanceof HashState)\n          this.HashState.deactivate()\n        break\n      default:\n        this._drawerAPI(null).deactivate()\n        this._hashAPI(null).deactivate()\n        this._defaultAPI(null).deactivate()\n    }\n  }\n}\n\nexport default NavCard\n"],"names":["Final","dataCamelCase","data","camelCase","substring","delim","list","Array","split","reduce","acc","cur","charAt","toUpperCase","slice","unique","max","Math","$","query","document","querySelectorAll","getAttribute","el","attr","hasAttribute","setAttribute","value","getData","prop","dataset","css","property","style","STYLEMAP","window","getComputedStyle","Object","keys","ostyle","Backdrop","backdrop","show","time","display","opacity","transition","hide","setTimeout","setOpacity","val","TRANSITION_STYLE","EFFECT","UNIT","NavService","options","nav","ELEMENT","button","INIT_ELEM","BACKDROP","backdropElement","event","DEFAULT_EVENT","direction","DIRECTION","width","offsetWidth","trans_time","TRANSITION","alive","_width","unit","activate","addEventListener","e","handler","call","state","replace","test","floor","parseFloat","parseInt","_open","_close","deactivate","removeEventListener","HashState","offSetWidth","hash","_getHash","ns","newURL","indexOfHash","lastIndexOf","TRANS_TIMING","TRANS_TEMPLATE","HIDDEN","SCROLL","START","MOVE","THRESHOLD","BELOW_THRESHOLD","DIRECTIONS","NavDrawer","element","body","BODY","directionString","handlers","events","touchstart","touchmove","touchend","o","TARGET","drawer","BoundDrawer","on","_startHandler","_moveHandler","_threshold","_belowThreshold","setContext","response","rectangle","displacement","overflow","dimension","coordsX","x2","elementSize","stateObj","wasOpen","rect","wasClosed","overallEventTime","TIMING","console","log","UP","DOWN","displacementY","displacementX","greaterWidth","oppositeDimension","axis","offsetHeight","DEF_CLASSNAME","MEDIA_HASH","MEDIA_DRAW","_CLASS","EVENTS","NavCard","createElement","className","background","height","position","top","left","zIndex","Drawer","defaultConfig","type","backdropClass","accessAttr","maxStartArea","threshold","API","DEFAULT","DRAWER","HASH","setup","_elem","dataAccess","opts","HASH_NAV_MAX_WIDTH","NAV_DRAW_MAX_WIDTH","destinationId","destination","hasOwnProperty","backdrop_class","append","isCSS_Selector","isClass","default_class","classname","classlist","length","defaultOptions","drawerOptions","MAX_WIDTH","hashOptions","_drawerAPI","_hashAPI","_defaultAPI","terminate"],"mappings":"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"}