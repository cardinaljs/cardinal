/*!
  * Cardinal v1.0.0
  * Repository: https://github.com/cardinaljs/cardinal
  * Copyright 2019 Caleb Pitan. All rights reserved.
  * Build Date: 2019-08-17T23:09:34.883Z
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  * http://www.apache.org/licenses/LICENSE-2.0
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Cardinal={})}(this,function(t){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}var s="0.7rem 0 rgba(0,0,0,.3)",r={top:"0 0.2rem "+s,left:"0.2rem 0 "+s,bottom:"0 -0.2rem "+s,right:"-0.2rem 0 "+s},p=["top","left","bottom","right"],h={show:"show",hide:"hide"},b="position",y="posOnStart",E="dimension",l="displacement",T="oppositeDimension",_="closing",S="opening",f=window,u=function(){function i(t,e){this.x=t,this.y=e}return i.pathDifference=function(t,e){return new i(t.x-e.x,t.y-e.y)},i.join=function(t,e){return new i(t.x+e.x,t.y+e.y)},i}(),k=function(){function t(t,e){this.lower=t,this.upper=e}return i(t,[{key:"gap",get:function(){return this.upper-this.lower}},{key:"slack",get:function(){return this.lower-this.upper}}]),t}(),a=function(){function t(t){this.activity=t,this.running=!1,this.id=Date.now()}var e=t.prototype;return e.run=function(){this.running=!0},e.derun=function(){this.running=!1},e.isRunning=function(){return this.running},t}();function c(t){return d(t.substring(5),"-")}function d(t,e){return void 0===e&&(e="-"),(t instanceof Array?t:t.split(e)).reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})}function v(t){return document.querySelectorAll(t)[0]}function w(t,e){return t.getAttribute(e)}function g(t,e){var i=c(e);return t.dataset&&t.dataset[i]?t.dataset[i]:w(t,e.substring(5))}function O(t){return f.screen.width-t.offsetLeft-t.offsetWidth}function I(t){return f.screen.height-t.offsetTop-t.offsetHeight}function C(t){return t<1&&0<t?t=1-t:t<0?t=1:1}function x(){if(arguments.length<1)return null;var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2],n=f.getComputedStyle(t);if("string"==typeof e&&i)return t.style[e]=i,null;if("object"==typeof e&&e instanceof Object){i=e;for(var s=Object.keys(i),r=0;r<s.length;r++){var o=s[r];t.style[o]=i[o]}return null}if(Array.isArray(e)){var h={},a=n,c=Array.isArray(a),l=0;for(a=c?a:a[Symbol.iterator]();;){var u;if(c){if(l>=a.length)break;u=a[l++]}else{if((l=a.next()).done)break;u=l.value}var d=u;h[d]=n[d]}return h}return"string"==typeof e?n[e]:n}var D=Math.PI,N=D/180,A=1/N,M=360,Y=90,X=180,P=270,R=function(r){function t(t){var e;e=r.call(this,t)||this;for(var i=arguments.length,n=new Array(1<i?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e._angles=n,e.angles=n.map(function(t){return e._degToRad(t)}),e._quad=null,e}o(t,r);var e=t.prototype;return e._degToRad=function(t){return N*t},e._radToDeg=function(t){return A*t},e._findPath=function(t){return[parseFloat((this.radius*Math.cos(t)).toFixed(3)),parseFloat((this.radius*Math.sin(t)).toFixed(3))]},e.getQuadrant=function(t){if(t<=M)return M;if(t<=Y&&M<t)return Y;if(t<=X&&Y<t)return X;if(t<=P&&X<t)return P;throw RangeError("Quadrant out of range")},i(t,[{key:"paths",get:function(){var s=this,r=[];return this.angles.forEach(function(t){var e=s._findPath(t),i=e[0],n=e[1];r.push(new u(i,n))}),r}}]),t}(function(){function t(t){this.radius=t,this.diameter=2*this.radius}var e=t.prototype;return e.areaOfSect=function(t){return(t*=N)/360*this.area},e.arc=function(t){return(t*=N)/360*this.circumference},i(t,[{key:"area",get:function(){return D*Math.pow(this.radius,2)}},{key:"circumference",get:function(){return 2*D*this.radius}}]),t}()),H=function(){function t(t){this._event=t}var e=t.prototype;return e.lock=function(){this._event.stopImmediatePropagation()},e.inhibitSubTask=function(){this._event.preventDefault()},t}(),z=function(n){function t(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.call.apply(n,[this].concat(e))||this}return o(t,n),i(t,[{key:"displacementX",get:function(){return this.coordsX.x2-this.coordsX.x1}},{key:"displacementY",get:function(){return this.coordsY.y2-this.coordsY.y1}},{key:"resultant",get:function(){return this.displacementY?this.displacementX?Math.sqrt(Math.pow(this.displacementY,2)+Math.pow(this.displacementX,2)):this.displacementY:this.displacementX}}]),t}(function(){function t(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(4===e.length){var n=e[0],s=e[1],r=e[2],o=e[3];this.coordsX={x1:n,x2:r},this.coordsY={y1:s,y2:o}}else if(2===e.length){var h=e[0],a=h.x1,c=h.y1,l=e[1],u=l.x2,d=l.y2;this.coordsX={x1:a,x2:u},this.coordsY={y1:c,y2:d}}}return i(t,[{key:"width",get:function(){return Math.abs(this.coordsX.x2-this.coordsX.x1)}},{key:"height",get:function(){return Math.abs(this.coordsY.y2-this.coordsY.y1)}},{key:"perimeter",get:function(){return 2*(this.width+this.height)}},{key:"area",get:function(){return this.width*this.height}},{key:"greaterWidth",get:function(){return this.width>this.height}},{key:"greaterHeight",get:function(){return!this.greaterWidth}}]),t}()),L="threshold",j="belowthreshold",W="open",G="close",B=function(){function i(t,e){this.options=t,this.bound=e,this.element=t.ELEMENT,this._winSize=this.options.sizeOfWindow||i._windowSize,this.winSize=this._winSize(),this.height=this.options.SIZE,this.unit=this.options.unit||"px",this.minArea=this.winSize-(this.bound.lower||this.options.maxStartArea||25),this.threshold=this.options.threshold||.667,this.threshold=C(this.threshold),this.startX=-1,this.startY=-1,this.resumeX=-1,this.resumeY=-1,this.endX=-1,this.endY=-1,this.scrollControlSet=!1,this.scrollControl=null,this.timing={start:null,end:null},this._context=this}var t=i.prototype;return t.start=function(t,e){this.timing.start=new Date,this._updateOrientation();var i=this.winSize,n=t.changedTouches[0].clientY;this.startX=t.changedTouches[0].clientX,this.startY=n;var s=I(this.element),r=this.bound;this.positionOnStart=s;var o=r.lower?"-"+(r.upper-r.lower)+this.unit:"-"+(r.upper-(i-n))+this.unit,h="-"+(r.upper-2)+this.unit;if(n<=i&&n>=this.minArea&&s===r.slack){var a,c=((a={})[b]=s,a[E]=o,a[l]=h,a);e.call(this._context,new H(t),c,new u(this.startX,this.startY))}},t.move=function(t,e){var i=this.winSize,n=i-this.bound.upper,s=t.changedTouches[0].clientY;this.resumeX=t.changedTouches[0].clientX,this.resumeY=s;var r=I(this.element),o=this.bound,h=this.startY,a=h<n?n:h,c=""+(h-s+this.positionOnStart)+this.unit,l="-"+(-a+s-this.positionOnStart)+this.unit,u=new z(this.startX,this.startY,this.resumeX,this.resumeY),d=u.greaterHeight;if(this.scrollControlSet||(this.scrollControl=d,this.scrollControlSet=!this.scrollControlSet),h<=i&&(h>=this.minArea||n-r<=h)&&r<0&&u.width<o.gap&&d&&this.scrollControl&&u.displacementY<0){var p,f=((p={})[b]=r,p[y]=this.positionOnStart,p[E]=c,p[S]=!0,p[_]=!1,p);e.call(this._context,new H(t),f,u)}if(n<=s&&Math.abs(r)<o.gap&&u.width<o.gap&&d&&this.scrollControl&&0<u.displacementY){var v,w=((v={})[b]=r,v[y]=this.positionOnStart,v[E]=l,v[_]=!0,v[S]=!1,v);e.call(this._context,new H(t),w,u)}},t.end=function(t,e,i){var n;this.timing.end=new Date;var s=this.winSize-this.bound.upper,r=t.changedTouches[0].clientY;this.endX=t.changedTouches[0].clientX,this.endY=r;var o=new z(this.startX,this.startY,this.endX,this.endY),h=this.startY,a=this.timing.end.getTime()-this.timing.start.getTime(),c=this.threshold,l=I(this.element),u=this.bound,d=new k(u.upper+this.positionOnStart,u.upper),p=""+u.slack+this.unit,f="0",v=u.upper||this.height,w=Math.abs(l),_=W;this.scrollControl=this.scrollControlSet=!1;var S=((n={})[b]=l,n[y]=this.positionOnStart,n.rect=o,n);function g(t,e){var i,n;return t===L&&e||t===j&&!e?m(((i={})[E]=f,i.TIMING=a,i[T]=p,i),S):t===L&&!e||t===j&&e?m(((n={})[E]=p,n.TIMING=a,n[T]=f,n),S):{}}if(o.displacementY<=0&&(h>=this.minArea||s-l<=h))return o.height>=d.gap*C(c)?i.state=[L,G]:i.state=[j,G],i.stateObj=g(i.state[0],!0),i.service=new H(t),void e.call(this,_);0<=o.displacementY&&this.resumeY>=s&&(_=G,i.state=v*c<=w?[L,W]:[j,W],i.stateObj=g(i.state[0],!1),i.service=new H(t),e.call(this,_))},t.setContext=function(t){return this._context=t,this},i._getStyle=function(t,e){return e?f.getComputedStyle(t,e):f.getComputedStyle(t)},i._windowSize=function(){return f.screen.height},t._updateOrientation=function(){this.winSize="function"==typeof this._winSize?this._winSize():i._windowSize(),this.minArea=this.winSize-(this.bound.lower||this.options.maxStartArea||25)},i}(),$="threshold",U="belowthreshold",F="open",V="close",q=function(){function i(t,e){this.options=t,this.bound=e,this.element=t.ELEMENT,this._winSize=this.options.sizeOfWindow||i._windowSize,this.winSize=this._winSize(),this.width=this.options.SIZE,this.unit=this.options.unit||"px",this.maxArea=this.bound.lower||this.options.maxStartArea||25,this.threshold=this.options.threshold||.667,this.threshold=C(this.threshold),this.startX=-1,this.startY=-1,this.resumeX=-1,this.resumeY=-1,this.endX=-1,this.endY=-1,this.scrollControlSet=!1,this.scrollControl=null,this.timing={start:null,end:null},this._context=this}var t=i.prototype;return t.start=function(t,e){this.timing.start=new Date,this._updateOrientation();var i=t.changedTouches[0].clientX;this.startX=i,this.startY=t.changedTouches[0].clientY;var n=this.element.offsetLeft,s=this.bound;this.positionOnStart=n;var r=s.lower?"-"+(s.upper-s.lower)+this.unit:"-"+(s.upper-i)+this.unit,o="-"+(s.upper-2)+this.unit;if(0<=i&&i<=this.maxArea&&n===s.slack){var h,a=((h={})[b]=n,h[E]=r,h[l]=o,h);e.call(this._context,new H(t),a,new u(this.startX,this.startY))}},t.move=function(t,e){var i=t.changedTouches[0].clientX;this.resumeX=i,this.resumeY=t.changedTouches[0].clientY;var n=this.element.offsetLeft,s=this.bound,r=this.startX,o=s.upper||this.width,h=o<r?o:r,a=""+(-r+i+this.positionOnStart)+this.unit,c="-"+(h-i-this.positionOnStart)+this.unit,l=new z(this.startX,this.startY,this.resumeX,this.resumeY),u=l.greaterWidth;if(this.scrollControlSet||(this.scrollControl=u,this.scrollControlSet=!this.scrollControlSet),0<=r&&(r<=this.maxArea||r<=o+n)&&n<0&&l.width<s.gap&&u&&this.scrollControl&&0<l.displacementX){var d,p=((d={})[b]=n,d[y]=this.positionOnStart,d[E]=a,d[S]=!0,d[_]=!1,d);e.call(this._context,new H(t),p,l)}if(i<=o&&Math.abs(n)<s.gap&&l.width<s.gap&&u&&this.scrollControl&&l.displacementX<0){var f,v=((f={})[b]=n,f[y]=this.positionOnStart,f[E]=c,f[_]=!0,f[S]=!1,f);e.call(this._context,new H(t),v,l)}},t.end=function(t,e,i){var n;this.timing.end=new Date;var s=t.changedTouches[0].clientX;this.endX=s,this.endY=t.changedTouches[0].clientY;var r=new z(this.startX,this.startY,this.endX,this.endY),o=this.startX,h=this.timing.end.getTime()-this.timing.start.getTime(),a=this.threshold,c=this.element.offsetLeft,l=this.bound,u=new k(l.upper+this.positionOnStart,l.upper),d=""+l.slack+this.unit,p="0",f=l.upper||this.width,v=Math.abs(c),w=F;this.scrollControl=this.scrollControlSet=!1;var _=((n={})[b]=c,n[y]=this.positionOnStart,n.rect=r,n);function S(t,e){var i,n;return t===$&&e||t===U&&!e?m(((i={})[E]=p,i.TIMING=h,i[T]=d,i),_):t===$&&!e||t===U&&e?m(((n={})[E]=d,n.TIMING=h,n[T]=p,n),_):{}}if(0<=r.displacementX&&(o<=this.maxArea||o<=f+c))return r.width>=u.gap*C(a)?i.state=[$,V]:i.state=[U,V],i.stateObj=S(i.state[0],!0),i.service=new H(t),void e.call(this,w);r.displacementX<=0&&this.resumeX<=f&&(w=V,i.state=f*a<=v?[$,F]:[U,F],i.stateObj=S(i.state[0],!1),i.service=new H(t),e.call(this,w))},t.setContext=function(t){return this._context=t,this},i._getStyle=function(t,e){return e?f.getComputedStyle(t,e):f.getComputedStyle(t)},i._windowSize=function(){return f.screen.width},t._updateOrientation=function(){this.winSize="function"==typeof this._winSize?this._winSize():i._windowSize(),this.minArea=this.bound.lower||this.options.maxStartArea||25},i}(),Z="threshold",K="belowthreshold",Q="open",J="close",tt=function(){function i(t,e){this.options=t,this.bound=e,this.element=t.ELEMENT,this._winSize=this.options.sizeOfWindow||i._windowSize,this.winSize=this._winSize(),this.width=this.options.SIZE,this.unit=this.options.unit||"px",this.minArea=this.winSize-(this.bound.lower||this.options.maxStartArea||25),this.threshold=this.options.threshold||.667,this.threshold=C(this.threshold),this.startX=-1,this.startY=-1,this.resumeX=-1,this.resumeY=-1,this.endX=-1,this.endY=-1,this.scrollControlSet=!1,this.scrollControl=null,this.timing={start:null,end:null},this._context=this}var t=i.prototype;return t.start=function(t,e){this.timing.start=new Date,this._updateOrientation();var i=this.winSize,n=t.changedTouches[0].clientX;this.startX=n,this.startY=t.changedTouches[0].clientY;var s=O(this.element),r=this.bound;this.positionOnStart=s;var o=r.lower?"-"+(r.upper-r.lower)+this.unit:"-"+(r.upper-(i-n))+this.unit,h="-"+(r.upper-2)+this.unit;if(n<=i&&n>=this.minArea&&s===r.slack){var a,c=((a={})[b]=s,a[E]=o,a[l]=h,a);e.call(this._context,new H(t),c,new u(this.startX,this.startY))}},t.move=function(t,e){var i=this.winSize,n=i-this.bound.upper,s=t.changedTouches[0].clientX;this.resumeX=s,this.resumeY=t.changedTouches[0].clientY;var r=O(this.element),o=this.bound,h=this.startX,a=h<n?n:h,c=""+(h-s+this.positionOnStart)+this.unit,l="-"+(-a+s-this.positionOnStart)+this.unit,u=new z(this.startX,this.startY,this.resumeX,this.resumeY),d=u.greaterWidth;if(this.scrollControlSet||(this.scrollControl=d,this.scrollControlSet=!this.scrollControlSet),h<=i&&(h>=this.minArea||n-r<=h)&&r<0&&u.width<o.gap&&d&&this.scrollControl&&u.displacementX<0){var p,f=((p={})[b]=r,p[y]=this.positionOnStart,p[E]=c,p[S]=!0,p[_]=!1,p);e.call(this._context,new H(t),f,u)}if(n<=s&&Math.abs(r)<o.gap&&u.width<o.gap&&d&&this.scrollControl&&0<u.displacementX){var v,w=((v={})[b]=r,v[y]=this.positionOnStart,v[E]=l,v[_]=!0,v[S]=!1,v);e.call(this._context,new H(t),w,u)}},t.end=function(t,e,i){var n;this.timing.end=new Date;var s=this.winSize-this.bound.upper,r=t.changedTouches[0].clientX;this.endX=r,this.endY=t.changedTouches[0].clientY;var o=new z(this.startX,this.startY,this.endX,this.endY),h=this.startX,a=this.timing.end.getTime()-this.timing.start.getTime(),c=this.threshold,l=O(this.element),u=this.bound,d=new k(u.upper+this.positionOnStart,u.upper),p=""+u.slack+this.unit,f="0",v=u.upper||this.width,w=Math.abs(l),_=Q;this.scrollControl=this.scrollControlSet=!1;var S=((n={})[b]=l,n[y]=this.positionOnStart,n.rect=o,n);function g(t,e){var i,n;return t===Z&&e||t===K&&!e?m(((i={})[E]=f,i.TIMING=a,i[T]=p,i),S):t===Z&&!e||t===K&&e?m(((n={})[E]=p,n.TIMING=a,n[T]=f,n),S):{}}if(o.displacementX<=0&&(h>=this.minArea||s-l<=h))return o.width>=d.gap*C(c)?i.state=[Z,J]:i.state=[K,J],i.stateObj=g(i.state[0],!0),i.service=new H(t),void e.call(this,_);0<=o.displacementX&&this.resumeX>=s&&(_=J,i.state=v*c<=w?[Z,Q]:[K,Q],i.stateObj=g(i.state[0],!1),i.service=new H(t),e.call(this,_))},t.setContext=function(t){return this._context=t,this},i._getStyle=function(t,e){return e?f.getComputedStyle(t,e):f.getComputedStyle(t)},i._windowSize=function(){return f.screen.width},t._updateOrientation=function(){this.winSize="function"==typeof this._winSize?this._winSize():i._windowSize(),this.minArea=this.winSize-(this.bound.lower||this.options.maxStartArea||25)},i}(),et="threshold",it="belowthreshold",nt="open",st="close",rt=function(){function i(t,e){this.options=t,this.bound=e,this.element=t.ELEMENT,this._winSize=this.options.sizeOfWindow||i._windowSize,this.winSize=this._winSize(),this.height=this.options.SIZE,this.unit=this.options.unit||"px",this.maxArea=this.bound.lower||this.options.maxStartArea||25,this.threshold=this.options.threshold||.667,this.threshold=C(this.threshold),this.startX=-1,this.startY=-1,this.resumeX=-1,this.resumeY=-1,this.endX=-1,this.endY=-1,this.scrollControlSet=!1,this.scrollControl=null,this.timing={start:null,end:null},this._context=this}var t=i.prototype;return t.start=function(t,e){this.timing.start=new Date,this._updateOrientation();var i=t.changedTouches[0].clientY;this.startX=t.changedTouches[0].clientX,this.startY=i;var n=this.element.offsetTop,s=this.bound;this.positionOnStart=n;var r=s.lower?"-"+(s.upper-s.lower)+this.unit:"-"+(s.upper-i)+this.unit,o="-"+(s.upper-2)+this.unit,h=s.lower||this.minArea;if(0<=i&&i<=h&&n===s.slack){var a,c=((a={})[b]=n,a[E]=r,a[l]=o,a);e.call(this._context,new H(t),c,new u(this.startX,this.startY))}},t.move=function(t,e){var i=t.changedTouches[0].clientY;this.resumeX=t.changedTouches[0].clientX,this.resumeY=i;var n=this.element.offsetTop,s=this.bound,r=this.startX,o=s.upper||this.height,h=o<r?o:r,a=""+(-r+i+this.positionOnStart)+this.unit,c="-"+(h-i-this.positionOnStart)+this.unit,l=new z(this.startX,this.startY,this.resumeX,this.resumeY),u=l.greaterHeight;if(this.scrollControlSet||(this.scrollControl=u,this.scrollControlSet=!this.scrollControlSet),0<=r&&(r<=this.maxArea||r<=o+n)&&n<0&&l.width<s.gap&&u&&this.scrollControl&&0<l.displacementY){var d,p=((d={})[b]=n,d[y]=this.positionOnStart,d[E]=a,d[S]=!0,d[_]=!1,d);e.call(this._context,new H(t),p,l)}if(i<=this.height&&Math.abs(n)<s.gap&&l.width<s.gap&&u&&this.scrollControl&&l.displacementY<0){var f,v=((f={})[b]=n,f[y]=this.positionOnStart,f[E]=c,f[_]=!0,f[S]=!1,f);e.call(this._context,new H(t),v,l)}},t.end=function(t,e,i){var n;this.timing.end=new Date;var s=t.changedTouches[0].clientY;this.endX=t.changedTouches[0].clientX,this.endY=s;var r=new z(this.startX,this.startY,this.endX,this.endY),o=this.startY,h=this.timing.end.getTime()-this.timing.start.getTime(),a=this.threshold,c=this.element.offsetTop,l=this.bound,u=new k(l.upper+this.positionOnStart,l.upper),d=""+l.slack+this.unit,p="0",f=l.upper||this.height,v=Math.abs(c),w=nt;this.scrollControl=this.scrollControlSet=!1;var _=((n={})[b]=c,n[y]=this.positionOnStart,n.rect=r,n);function S(t,e){var i,n;return t===et&&e||t===it&&!e?m(((i={})[E]=p,i.TIMING=h,i[T]=d,i),_):t===et&&!e||t===it&&e?m(((n={})[E]=d,n.TIMING=h,n[T]=p,n),_):{}}if(0<=r.displacementY&&(o<=this.maxArea||o<=f+c))return r.height>=u.gap*C(a)?i.state=[et,st]:i.state=[it,st],i.stateObj=S(i.state[0],!0),i.service=new H(t),void e.call(this,w);r.displacementY<=0&&this.resumeY<=f&&(w=st,i.state=f*a<=v?[et,nt]:[it,nt],i.stateObj=S(i.state[0],!1),i.service=new H(t),e.call(this,w))},t.setContext=function(t){return this._context=t,this},i._getStyle=function(t,e){return e?f.getComputedStyle(t,e):f.getComputedStyle(t)},i._windowSize=function(){return f.screen.height},t._updateOrientation=function(){this.winSize="function"==typeof this._winSize?this._winSize():i._windowSize(),this.minArea=this.bound.lower||this.options.maxStartArea||25},i}(),ot=function(){function i(t,e,i){this._options=t,this._drawerManager=i,this._element=t.ELEMENT,this._target=t.TARGET,this._handlers=null,this._direction=t.DIRECTION,this._calibration=null,this._callbacks=null,(this._context=this)._id=0,this.events=["touchstart","touchmove","touchend"],this._setCalibration(this._direction,e)}var t=i.prototype;return t.activate=function(){var n=this,i=this._callbacks?this._callbacks.start:ht,s=this._callbacks?this._callbacks.move:ht,r=this._callbacks?this._callbacks.end:ht;this._register(function(t){var e=n._drawerManager.getRunningActivity();n._calibration&&(n._id&&e&&e.id===n._id||!e&&n._isCoolSignal(n._getSignal(t)))&&n._calibration.start(t,i)},function(t){var e=n._drawerManager.getRunningActivity();n._calibration&&e&&e.id===n._id&&n._calibration.move(t,s)},function(t){var e=n._drawerManager.getRunningActivity();if(n._calibration&&e&&e.id===n._id){var i={};n._calibration.end(t,r,i),n._processThresholdState(i)}});for(var t=0;t<this.events.length;t++)this._target.addEventListener(this.events[t],this._handlers[t])},t.deactivate=function(){for(var t=0;t<this.events.length;t++)this._target.removeEventListener(this.events[t],this._handlers[t]);this._register(null)},t.on=function(t,e){return this._registerCallbacks(t,e),this},t.setContext=function(t){return this._context=t,this._calibration.setContext(t),this},t.setServiceID=function(t){if("number"!=typeof t)throw new TypeError("expected `id` to be a unique number");this._id=t},t.toString=function(){return"[object SnappedDrawer]"},t._processThresholdState=function(t){if(!(Object.keys(t).length<1)){var e=t.state,i=t.stateObj,n=t.service,s=i.rect;this._callbacks[e[0]].call(this._context,n,e,i,s)}},t._setCalibration=function(t,e){switch(t){case i.UP:this._calibration=new rt(this._options,e);break;case i.LEFT:this._calibration=new q(this._options,e);break;case i.DOWN:this._calibration=new B(this._options,e);break;case i.RIGHT:this._calibration=new tt(this._options,e);break;default:throw RangeError("Direction out of range")}},t._isCoolSignal=function(t){var e=this._direction===i.UP||this._direction===i.DOWN?f.screen.height:f.screen.width;switch(this._direction){case i.UP:case i.LEFT:return t<=e/2;case i.RIGHT:case i.DOWN:return e/2<t;default:return!1}},t._getSignal=function(t){switch(this._direction){case i.UP:case i.DOWN:return t.changedTouches[0].clientY;case i.LEFT:case i.RIGHT:return t.changedTouches[0].clientX;default:return null}},t._registerCallbacks=function(t,e){var i;this._callbacks=this._callbacks||((i={}).start=ht,i.move=ht,i.end=ht,i.threshold=ht,i.belowthreshold=ht,i),t in this._callbacks&&(this._callbacks[t]=e)},t._register=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._handlers=e},i}();function ht(){return!1}e(ot,"UP",0),e(ot,"LEFT",1),e(ot,"DOWN",2),e(ot,"RIGHT",3);function at(){}var ct=function(){function t(){this.activities=[]}var e=t.prototype;return e.pushActivity=function(t){this.activities.push(t)},e.getRunningActivity=function(){return this.activities.find(function(t){return t.isRunning()})},t}();e(at,"SnappedDrawer",ot),e(at,"UP",ot.UP),e(at,"LEFT",ot.LEFT),e(at,"DOWN",ot.DOWN),e(at,"RIGHT",ot.RIGHT),e(at,"DrawerManagementStore",new ct);var lt=function(){function t(t){this.backdrop=t}var e=t.prototype;return e.show=function(t){x(this.backdrop,{display:"block",opacity:1,transition:"opacity linear "+t/1e3+"s"})},e.hide=function(t){var e=this;x(this.backdrop,{opacity:0,transition:"opacity linear "+t/1e3+"s"}),window.setTimeout(function(){x(e.backdrop,{display:"none"})},t)},e.setOpacity=function(t){x(this.backdrop,{display:"block",opacity:t,transition:"none"})},t}(),ut="linear",dt="transition",pt="overflow",ft="hidden",vt="threshold",wt=function(){function t(t,e){this.options=t,this.state=e,this.element=this.options.ELEMENT,this._body=this.options.BODY,this._backdrop=this.options.BACKDROP,this.direction=this.options.DIRECTION,this._checkDirection(),this.directionString=p[this.direction],this.bound=this._bound;var i=m({},t,{SIZE:this.elementSize,TARGET:document});this.drawer=new at.SnappedDrawer(i,this.bound,at.DrawerManagementStore),at.DrawerManagementStore.pushActivity(this.state.activity),this.transition=this.directionString+" linear 0.1s"}var e=t.prototype;return e.activate=function(){return this.drawer.on("start",this._startHandler).on("move",this._moveHandler).on(vt,this._threshold).on("belowthreshold",this._belowThreshold).setContext(this).activate(),this.drawer.setServiceID(this.state.activity.id),0},e.deactivate=function(){return this.drawer.deactivate(),0},e._startHandler=function(t,e){var i;t.lock(),this.state.activity.run(),x(this.element,((i={})[this.directionString]=e.dimension,i.boxShadow=r[this.directionString],i[dt]=this.transition,i)),this._body.style.overflow=ft},e._moveHandler=function(t,e,i){var n;t.lock();var s=this.direction===at.UP||this.direction===at.DOWN?i.coordsY.y2:i.coordsX.x2;if(x(this.element,((n={})[this.directionString]=e.dimension,n[dt]="none",n[pt]=ft,n)),this.direction===at.RIGHT)return s=f.screen.width-s,void this._backdrop.setOpacity(s/this.elementSize);this._backdrop.setOpacity(s/this.elementSize)},e._threshold=function(t,e,i,n){t.lock();var s="open"===e[1],r={stateObj:i,transition:this.directionString+" "+ut+" "+this._calcSpeed(i.TIMING,n.width)/1e3+"s"};s?this._hide(r):this._show(r)},e._belowThreshold=function(t,e,i,n){t.lock();var s,r="open"!==e[1],o=i.TIMING,h=this.direction===at.UP||this.direction===at.DOWN?n.displacementY:n.displacementX,a={stateObj:i,transition:this.directionString+" "+ut+" "+this._calcSpeed(i.TIMING,n.width)/1e3+"s"};if(s=this.direction===at.LEFT&&r||this.direction===at.RIGHT&&!r?0<h&&10<=h&&n.greaterWidth:h<0&&h<=-10&&n.greaterWidth,o/1e3<.5)if(s)this._overrideBelowThresh(!r,a);else{if(r)return void this._hide(a);this._show(a)}else{if(r)return void this._hide(a);this._show(a)}},e._show=function(t){this._showPrep(t),this.element.style[this.directionString]=t.stateObj.dimension},e._hide=function(t){this._hidePrep(t),this.element.style[this.directionString]=t.stateObj.dimension},e._overrideBelowThresh=function(t,e){t?this._hidePrep(e):this._showPrep(e),this.element.style[this.directionString]=e.stateObj.oppositeDimension},e._hidePrep=function(t){var e;this.state.activity.derun(),this._body.style.overflow="scroll",this._backdrop.hide(this.options.TRANSITION),x(this.element,((e={})[dt]=t.transition,e[pt]="auto",e)),this.bound.lower||(this.element.style.boxShadow="none"),this._setState("close"),this.state.isRegisteredEvent(h.hide)&&this.state.getStateEventHandler(h.hide)()},e._showPrep=function(t){var e,i=w(this.options.INIT_ELEM,"href")||g(this.options.INIT_ELEM,"data-href");i&&(f.location.hash=i),this._body.style.overflow=ft,this._backdrop.show(this.options.TRANSITION),x(this.element,((e={})[dt]=t.transition,e[pt]="auto",e)),this._setState("open"),this.state.isRegisteredEvent(h.show)&&this.state.getStateEventHandler(h.show)()},e._calcSpeed=function(t,e){var i=this.elementSize-e;if(~Math.sign(i)){var n=i*t/e;return 500<n?n=500:n<100&&(n=100),n}return 0},e._checkDirection=function(){if(this.direction!==at.LEFT&&this.direction!==at.RIGHT)throw new RangeError("Direction out of range")},e._setState=function(t){switch(t){case"open":this.state.activity.run();break;case"close":this.state.activity.derun();break;default:throw new Error("this should never happen")}},i(t,[{key:"elementSize",get:function(){var t=this.direction;return t===at.UP||t===at.DOWN?this.element.offsetHeight:this.element.offsetWidth}},{key:"_bound",get:function(){var t=this.elementSize;if(this.direction===at.RIGHT){var e=f.screen.width-this.element.offsetLeft;return new k(e,t)}var i=t+this.element.offsetLeft;return new k(i,t)}}]),t}(),_t="transition",St="transitionend",gt=function(){function i(t,e){this.options=t,this.state=e,this.nav=t.ELEMENT,this.button=t.INIT_ELEM,this.body=t.BODY,this.backdrop=t.BACKDROP,this.backdropElement=this.backdrop.backdrop,this.event="click",this.direction=t.DIRECTION,this.width=this.nav.offsetWidth,this.transTime=t.TRANSITION/1e3,this.transition=this.direction+" cubic-bezier(0, 0.5, 0, 1) "+this.transTime+"s",this.alive=!1,this._closeInvoked=!1,this._initialState=i.css(this.nav,this.direction),this._handlers=null}var t=i.prototype;return t.activate=function(){var e=this;return this._register({ClickHandler:function(t){e.handler(t)},BackdropHandler:function(){e._close()},TransitionHandler:function(){!e.alive&&e._closeInvoked&&(e._cleanShadow(),e._closeInvoked=!1)}}),this.button.addEventListener(this.event,this._handlers.ClickHandler),this.backdropElement.addEventListener(this.event,this._handlers.BackdropHandler),this._initialState==="-"+this._width("px")&&this.nav.addEventListener(St,this._handlers.TransitionHandler),0},t.deactivate=function(){throw new ReferenceError("cannot deactivate a default service. This service must be kept running")},t.forceDeactivate=function(){this.button.removeEventListener(this.event,this._handlers.ClickHandler),this.backdropElement.removeEventListener(this.event,this._handlers.BackdropHandler),this._initialState==="-"+this._width("px")&&this.nav.removeEventListener(St,this._handlers.TransitionHandler),this._register(null)},t.handler=function(t){if(t.preventDefault(),i._toNum(i.css(this.nav,this.direction))<0){var e=w(this.button,"href")||g(this.button,"data-href");e&&(f.location.hash=e),this._open()}else this._close()},i.css=function(t,e,i){return x(t,e,i)},i._toNum=function(t){return t=t.replace(/[^\d]*$/,""),/\.(?=\d)/.test(t)?Math.round(parseFloat(t)):parseInt(t,10)},t._width=function(t){return t=t||"",this.width+t},t._register=function(t){this._handlers=t},t._open=function(){var t,e=((t={})[this.direction]=0,t[_t]=this.transition,t.boxShadow=r[this.direction],t);i.css(this.nav,e),this.backdrop.show(this.options.TRANSITION),i.css(this.body,"overflow","hidden"),this.state.isRegisteredEvent(h.show)&&this.state.getStateEventHandler(h.show)(),this.alive=!0,this.state.activity.run()},t._close=function(){var t,e=((t={})[this.direction]=this._initialState,t[_t]=this.transition,t);i.css(this.nav,e),this.backdrop.hide(this.options.TRANSITION),i.css(this.body,"overflow","initial"),this.state.isRegisteredEvent(h.hide)&&this.state.getStateEventHandler(h.hide)(),this.alive=!1,this._closeInvoked=!0,this.state.activity.derun()},t._cleanShadow=function(){i.css(this.nav,"boxShadow","none")},i}(),mt=function(){function e(t,e,i){this.options=e,this.state=i,this.parentService=t,this.button=e.INIT_ELEM,this.event="hashchange",this.handler=null}var t=e.prototype;return t.activate=function(){var e=this;return this._register(function(t){e._hashchange(t)}),f.addEventListener(this.event,this.handler,!0),0},t.deactivate=function(){return f.removeEventListener(this.event,this.handler,!0),this._register(null),0},t._hashchange=function(t){e._getHash(t.oldURL)===(w(this.button,"href")||g(this.button,"data-href"))&&this.state.activity.isRunning()&&(t.stopImmediatePropagation(),this.parentService._close())},t._register=function(t){this.handler=t},e._getHash=function(t){var e=t,i=e.lastIndexOf("#");return e=-1!==i?e.slice(i).replace(/(?:[^\w\d-]+)$/):null},e}(),bt={SHOW:"show",HIDE:"hide"},yt=function(){function t(t){var e;this.activity=t,this._stateEventRegistry=((e={})[bt.SHOW]=null,e[bt.HIDE]=null,e)}var e=t.prototype;return e.getStateEventHandler=function(t){if(-1!==Object.values(bt).indexOf(t))return this._stateEventRegistry[t];throw new Error("unknown event type")},e.isRegisteredEvent=function(t){return"function"==typeof this._stateEventRegistry[t]},i(t,[{key:"onshow",set:function(t){if("function"!=typeof t)throw new TypeError("value is not a callable type");return this._stateEventRegistry.show=t,!0}},{key:"onhide",set:function(t){if("function"!=typeof t)throw new TypeError("value is not a callable type");return this._stateEventRegistry.hide=t,!0}}]),t}(),Et=f.Nav||null,Tt=function(){function d(t,e){this.backdrop=document.createElement("div"),this.backdrop.className="backdrop",x(this.backdrop,{background:"rgba(0,0,0,.4)",height:"100%",width:"100%",display:"none",position:"fixed",top:0,left:0}),this.src=t,this.dest=e,this.body=document.body,this.Drawer=null,this.SheetService=null,this.PopService=null,this._Activity=new a(this),this.State=new yt(this._Activity)}var t=d.prototype;return t.setup=function(t){if(!this.src)throw new TypeError("expected Nav to be constructed with at least 'src' argument:\n        expected 'src' to be selector string or HTMLElement.\n          constructor(src: string | HTMLElement, dest?: string | HTMLElement)");var e="function"==typeof Object.assign?Object.assign({},d.defaultConfig):m({},d.defaultConfig);if(t&&"object"==typeof t)for(var i=Object.keys(t),n=0;n<i.length;n++){var s=i[n];Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=t[s])}this.dest=this.dest?this.dest:e.dest;var r=this.src instanceof HTMLElement?this.src:v(this.src),o=this.dest instanceof HTMLElement?this.dest:v(this.dest),h=g(o,"data-max-width");if(e.useBackdrop){var a=e.backdrop||!1;if(a)if("string"==typeof a){var c=/^\./.test(a)?a:"."+a;this.backdrop=v(c)}else{if(!(a instanceof HTMLElement))throw new TypeError("expected 'options.backdrop' to be a selector string or HTMLElement.");this.backdrop=a}else o.insertAdjacentElement("beforeBegin",this.backdrop)}h=/px$/.test(h)?h:h+"px";var l={ELEMENT:o,INIT_ELEM:r,BACKDROP:new lt(this.backdrop),BODY:this.body,TRANSITION:e.transition,DIRECTION:p[e.direction],unit:e.unit},u=m({},l,{MAX_WIDTH:h,DIRECTION:e.direction,maxStartArea:e.maxStartArea,threshold:e.threshold,scrollableContainer:e.scrollableContainer,CustomDrawer:e.CustomDrawer});return new kt(this,{defaultOptions:l,drawerOptions:u,hashOptions:{INIT_ELEM:l.INIT_ELEM}})},t.terminate=function(t){if((t|=0)&d.SERVICES.Default&&this.SheetService instanceof gt&&this.SheetService.deactivate(),t&d.SERVICES.Drawer&&this.Drawer instanceof wt&&this.Drawer.deactivate(),t&d.SERVICES.Hash&&this.PopService instanceof mt&&this.PopService.deactivate(),!t)throw new Error("a service id is required")},t.toString=function(){return"[object NavCard]"},d.namespace=function(t){f[t]=f[t]||{},f[t].Nav=d,f.Nav=Et},t._drawerAPI=function(t){var e=this,i=t.CustomDrawer;return this.Drawer=i&&"object"==typeof i?new i(t,this.State):new wt(t,this.State),{activate:function(){return e.Drawer.activate()},deactivate:function(){return e.Drawer.deactivate()}}},t._hashAPI=function(t){var e=this;return this.PopService=new mt(this.SheetService,t,this.State),{activate:function(){return e.PopService.activate()},deactivate:function(){return e.PopService.deactivate()}}},t._defaultAPI=function(t){var e=this;return this.SheetService=new gt(t,this.State),{activate:function(){return e.SheetService.activate()},deactivate:function(){return e.SheetService.deactivate()}}},d}();e(Tt,"defaultConfig",{transition:500,direction:-1,useBackdrop:!1,backdrop:null,dest:null,scrollableContainer:null,maxStartArea:25,threshold:.5,unit:"px",CustomDrawer:null}),e(Tt,"SERVICES",{Default:32,Drawer:64,Pop:128});var kt=function(){function t(t,e){this.$this=t,this.options=e}var e=t.prototype;return e.mount=function(){var i=this,n=!this.$this._defaultAPI(this.options.defaultOptions).activate(),s=!this.$this._drawerAPI(this.options.drawerOptions).activate(),r=!this.$this._hashAPI(this.options.hashOptions).activate();return new Promise(function(t,e){n&&s&&r?t(new Ot(i.$this,i.$this.State)):e(new Error("one or more services could not activate"))})},e.unmount=function(){this.$this.SheetService.forceDeactivate(),this.$this.Drawer.deactivate(),this.$this.PopService.deactivate()},e.toString=function(){return"[object NavMountWorker]"},t}(),Ot=function(){function t(t,e){this.events=[h.show,h.hide],this.$this=t,this._State=e}var e=t.prototype;return e.on=function(t,e){if(void 0===e&&(e=function(){return!1}),!(this.events.indexOf(t)+1))throw new Error("unknown event '"+t+"'");this._State["on"+t]=e.bind(this.$this)},e.off=function(t){if(!(this.events.indexOf(t)+1))throw new Error("unknown event '"+t+"'");this._State["on"+t]=null},t}(),It="transition",Ct="overflow",xt="hidden",Dt="auto",Nt="threshold",At="high",Mt="mid",Yt="low",Xt=function(){function l(t,e){var i;this.options=t,this.state=e,this.element=this.options.ELEMENT,this._body=this.options.BODY,this.backdrop=this.options.BACKDROP,this.direction=this.options.DIRECTION,this._scCheck=this.options.scrollableContainer,this._sc=this._scCheck||document.createElement("div"),this._checkDirection(),this.directionString=p[this.direction],this.bound=this._bound,this._oldbound=null;var n=m({},t,{SIZE:this.elementSize,TARGET:document});this.drawer=new at.SnappedDrawer(n,this.bound,at.DrawerManagementStore),at.DrawerManagementStore.pushActivity(this.state.activity),this.transition=this.directionString+" linear 0.1s",this.marks=((i={})[At]=0,i[Mt]=this.bound.slack*C(t.threshold),i[Yt]=document.documentElement.clientHeight-this.element.offsetTop-this.elementSize,i),this._Control={touchMoveExited:!1,lastMetredPos:0}}var t=l.prototype;return t.activate=function(){return this.drawer.on("start",this._startHandler).on("move",this._moveHandler).on(Nt,this._threshold).on("belowthreshold",this._belowThreshold).setContext(this).activate(),this.drawer.setServiceID(this.state.activity.id),0},t.deactivate=function(){return this.drawer.deactivate(),0},t._startHandler=function(t,e){var i;t.lock(),this.state.activity.run(),x(this.element,((i={})[this.directionString]=this.bound.lower?null:e.dimension,i.boxShadow=r[this.directionString],i[It]=this.transition,i)),this._body.style.overflow=xt},t._moveHandler=function(t,e,i){var n;t.lock();var s=f.screen.height,r=i.coordsY.y2;if(e.posOnStart===this.marks[At]&&(this._scCheck&&0!==this._sc.scrollTop||!this._scCheck))return this._Control.touchMoveExited=!0,void(this._Control.lastMetredPos=r);this._Control.touchMoveExited=!1;var o=this.direction===at.DOWN?this._Control.lastMetredPos-r+e.posOnStart:-this._Control.lastMetredPos+r+e.posOnStart;x(this.element,((n={})[this.directionString]=e.dimension,n[It]="none",n[Ct]=xt,n)),x(this._sc,Ct,xt),e.posOnStart===this.marks[At]&&e.closing&&x(this.element,this.directionString,l._toUnit(o,this.options.unit)),Math.round(e.posOnStart)===Math.round(this.marks[Mt])&&e.opening&&this.direction===at.DOWN&&this._sc.scrollTo(0,-i.displacementY),this.direction===at.DOWN&&(r=s-r),this.backdrop.setOpacity(r/this.elementSize)},t._threshold=function(t,e,i){t.lock();var n="open"===e[1],s={stateObj:i,transition:this.directionString+" ease "+this._calcSpeed(i.TIMING)/1e3+"s"};n?this._hide(s):this._show(s)},t._belowThreshold=function(t,e,i,n){t.lock();var s="open"!==e[1],r=i.TIMING,o=n.displacementY,h={rect:n,stateObj:i,transition:this.directionString+" ease "+this._calcSpeed(i.TIMING)/1e3+"s"},a=i.position,c=o/(r/1e3);(this.direction===at.UP&&s||this.direction===at.DOWN&&!s?150<c&&n.greaterHeight:c<-150&&n.greaterHeight)?this._overrideBelowThresh(!s,h):s?this.element.style[this.directionString]=l._toUnit(a>=this.marks[Mt]?(this._halfHidePrep(h),this.marks[Mt]):(this._hidePrep(h),this.marks[Yt]),this.options.unit):(this._showPrep(h),this.element.style[this.directionString]=l._toUnit(a>=this.marks[Mt]?this.marks[Mt]:this.marks[At],this.options.unit))},t._show=function(t){this._Control.touchMoveExited?this._Control.touchMoveExited=!1:(x(this._sc,Ct,"scroll"),this._showPrep(t),this.element.style[this.directionString]=l._toUnit(this.marks[At],this.options.unit))},t._hide=function(t){this._Control.touchMoveExited?this._Control.touchMoveExited=!1:(this._hidePrep(t),this.element.style[this.directionString]=l._toUnit(this.marks[Yt],this.options.unit))},t._overrideBelowThresh=function(t,e){var i=e.stateObj,n=i.oppositeDimension,s=i.position,r=this.direction===at.DOWN;if(t){if(this._Control.touchMoveExited)return void(this._Control.touchMoveExited=!1);this.element.style[this.directionString]=l._toUnit(s>=this.marks[Mt]?this.marks[Mt]:this.marks[Yt],this.options.unit),this._halfHidePrep(e)}else{var o=l._toUnit(this.marks[Mt],this.options.unit);this._showPrep(e),this.element.style[this.directionString]=r?o:n}},t._halfHidePrep=function(t){var e;this._body.style.overflow=xt,x(this.element,((e={})[It]=t.transition,e[Ct]=Dt,e))},t._hidePrep=function(t){var e;this._body.style.overflow="scroll",this.backdrop.hide(this.options.TRANSITION),x(this.element,((e={})[It]=t.transition,e[Ct]=Dt,e)),this.bound.lower||(this.element.style.boxShadow="none"),this._setState("close"),this.state.isRegisteredEvent(h.hide)&&this.state.getStateEventHandler(h.hide)()},t._showPrep=function(t){var e,i=w(this.options.INIT_ELEM,"href")||g(this.options.INIT_ELEM,"data-href");i&&(f.location.hash=i),this._body.style.overflow=t.bodyOverflow||xt,this.backdrop.show(this.options.TRANSITION),x(this.element,((e={})[It]=t.transition,e[Ct]=Dt,e)),this._setState("open"),this.state.isRegisteredEvent(h.show)&&this.state.getStateEventHandler(h.show)()},t._calcSpeed=function(t){if(1e3<=t)return 500;return t/1e3*100/100*500},t._checkDirection=function(){if(this.direction!==at.UP&&this.direction!==at.DOWN)throw new RangeError("Direction out of range")},t._setState=function(t){switch(t){case"open":this.state.activity.run();break;case"close":this.state.activity.derun();break;default:throw new Error("this should never happen")}},t._updateBound=function(){var t=this._bound;this._oldbound=new k(this.bound.lower,this.bound.upper),this.bound.lower=t.lower},l._toUnit=function(t,e){return void 0===e&&(e="px"),t+e},i(l,[{key:"elementSize",get:function(){return this.element.offsetHeight}},{key:"_bound",get:function(){var t=this.elementSize;if(this.direction===at.DOWN){var e=f.screen.height-this.element.offsetTop;return new k(e,t)}var i=t+this.element.offsetTop;return new k(i,t)}}]),l}(),Pt="transition",Rt="transitionend",Ht=function(){function i(t,e){this.options=t,this.state=e,this.sheet=t.ELEMENT,this.button=t.INIT_ELEM,this.backdrop=t.BACKDROP,this.backdropElement=this.backdrop.backdrop,this._body=t.BODY,this.event="click",this.direction=t.DIRECTION,this.height=this.sheet.offsetHeight,this.transTime=t.TRANSITION/1e3,this.transition=this.direction+" ease "+this.transTime+"s",this.alive=!1,this._closeInvoked=!1,this._initialState=i.css(this.sheet,this.direction),this._handlers=null}var t=i.prototype;return t.activate=function(){var e=this;return this._register({ClickHandler:function(t){e.handler(t)},BackdropHandler:function(){e._close()},TransitionHandler:function(){!e.alive&&e._closeInvoked&&(e._cleanShadow(),e._closeInvoked=!1)}}),this.button.addEventListener(this.event,this._handlers.ClickHandler),this.backdropElement.addEventListener(this.event,this._handlers.BackdropHandler),this._initialState==="-"+this._height("px")&&this.sheet.addEventListener(Rt,this._handlers.TransitionHandler),0},t.deactivate=function(){throw new ReferenceError("cannot deactivate a default service. This service must be kept running")},t.forceDeactivate=function(){this.button.removeEventListener(this.event,this._handlers.ClickHandler),this.backdropElement.removeEventListener(this.event,this._handlers.BackdropHandler),this._initialState==="-"+this._height("px")&&this.sheet.removeEventListener(Rt,this._handlers.TransitionHandler),this._register(null)},t.handler=function(t){if(t.preventDefault(),i._toNum(i.css(this.sheet,this.direction))<0){var e=w(this.button,"href")||g(this.button,"data-href");e&&(f.location.hash=e),this._open()}else this._close()},i.css=function(t,e,i){return x(t,e,i)},i._toNum=function(t){return t=t.replace(/[^\d]*$/,""),/\.(?=\d)/.test(t)?Math.round(parseFloat(t)):parseInt(t,10)},t._height=function(t){return t=t||"",this.height+t},t._register=function(t){this._handlers=t},t._open=function(){var t,e=((t={})[this.direction]=0,t[Pt]=this.transition,t.boxShadow=r[this.direction],t);i.css(this.sheet,e),this.backdrop.show(this.options.TRANSITION),this._body.style.overflow="hidden",this.state.isRegisteredEvent(h.show)&&this.state.getStateEventHandler(h.show)(),this.alive=!0,this.state.activity.run()},t._close=function(){var t,e=((t={})[this.direction]=this._initialState,t[Pt]=this.transition,t);i.css(this.sheet,e),this.backdrop.hide(this.options.TRANSITION),this._body.style.overflow="scroll",this.state.isRegisteredEvent(h.hide)&&this.state.getStateEventHandler(h.hide)(),this.alive=!1,this._closeInvoked=!0,this.state.activity.derun()},t._cleanShadow=function(){i.css(this.sheet,"boxShadow","none")},i}(),zt="Sheet",Lt=f[zt]||null,jt=function(n){function s(t,e){var i;return(i=n.call(this,t,e)||this).SheetService=null,s.defaultConfig.threshold=2/3,i}o(s,n);var t=s.prototype;return t.setup=function(t){var e=n.prototype.setup.call(this,t);return new Wt(this,e.options)},t.terminate=function(t){if((t|=0)&Tt.SERVICES.Default&&this.SheetService instanceof Ht&&this.SheetService.deactivate(),t&Tt.SERVICES.Drawer&&this.Drawer instanceof Xt&&this.Drawer.deactivate(),t&Tt.SERVICES.Pop&&this.PopService&&this.PopService.deactivate(),!t)throw new Error("a service id is required")},t.toString=function(){return"[object Sheet]"},s.namespace=function(t){f[t]=f[t]||{},f[t][zt]=s,f[zt]=Lt},t._drawerAPI=function(t){var e=this,i=t.CustomDrawer;return this.Drawer=i&&"object"==typeof i?new i(t,this.State):new Xt(t,this.State),{activate:function(){return e.Drawer.activate()},deactivate:function(){return e.Drawer.deactivate()}}},t._hashAPI=function(t){var e=n.prototype._hashAPI.call(this,t);return this.PopService.parentService=this.SheetService,e},t._defaultAPI=function(t){var e=this;return this.SheetService=new Ht(t,this.State),{activate:function(){return e.SheetService.activate()},deactivate:function(){return e.SheetService.deactivate()}}},s}(Tt),Wt=function(){function t(t,e){this.$this=t,this.options=e}var e=t.prototype;return e.mount=function(){var i=this,n=!this.$this._defaultAPI(this.options.defaultOptions).activate(),s=!this.$this._drawerAPI(this.options.drawerOptions).activate(),r=!this.$this._hashAPI(this.options.hashOptions).activate();return new Promise(function(t,e){n&&s&&r?t(new Gt(i.$this,i.$this.State)):e(new Error("one or more services could not activate"))})},e.unmount=function(){this.SheetService.forceDeactivate(),this.Drawer.deactivate(),this.PopService.deactivate()},e.toString=function(){return"[object SheetMountWorker]"},t}(),Gt=function(){function t(t,e){this.events=[h.show,h.hide],this.$this=t,this._State=e}var e=t.prototype;return e.on=function(t,e){if(void 0===e&&(e=function(){return!1}),!(this.events.indexOf(t)+1))throw new Error("unknown event '"+t+"'");this._State["on"+t]=e.bind(this.$this)},e.off=function(t){if(!(this.events.indexOf(t)+1))throw new Error("unknown event '"+t+"'");this._State["on"+t]=null},t}(),Bt={NAV_BOX_SHADOW:r,ZERO:0,DIRECTIONS:p,NAVSTATE_EVENTS:h,Path:u,Bound:k,dataCamelCase:c,camelCase:d,unique:function(t){return void 0===t&&(t=1),Math.floor(Math.random()*t)},$:v,getAttribute:w,hasAttribute:function(t,e){return t.hasAttribute(e)},setAttribute:function(t,e,i){t.setAttribute(e,i)},getData:g,resolveThreshold:C,css:x};t.CircularPath=R,t.Drawer=at,t.Nav=Tt,t.Sheet=jt,t.Util=Bt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cardinal.min.js.map