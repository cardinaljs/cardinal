{"version":3,"file":"cardinal.js","sources":["../src/util.js","../src/circular-path/circle.js","../src/circular-path/index.js","../src/drawer/service.js","../src/drawer/rectangle.js","../src/drawer/vector.js","../src/drawer/snapped-drawer/bottom.js","../src/drawer/snapped-drawer/left.js","../src/drawer/snapped-drawer/right.js","../src/drawer/snapped-drawer/top.js","../src/drawer/snapped-drawer/index.js","../src/drawer/index.js","../src/nav/backdrop.js","../src/nav/drawer.js","../src/nav/navservice.js","../src/nav/popservice.js","../src/nav/state.js","../src/nav/index.js","../src/sheet/drawer.js","../src/sheet/sheetservice.js","../src/sheet/index.js","../src/index.js"],"sourcesContent":["// constants\nconst BLUR_SPREAD_SHADE = '0.7rem 0 rgba(0,0,0,.3)'\nexport const NAV_BOX_SHADOW = {\n  top: `0 0.2rem ${BLUR_SPREAD_SHADE}`,\n  left: `0.2rem 0 ${BLUR_SPREAD_SHADE}`,\n  bottom: `0 -0.2rem ${BLUR_SPREAD_SHADE}`,\n  right: `-0.2rem 0 ${BLUR_SPREAD_SHADE}`\n}\nexport const ZERO = 0\nexport const DIRECTIONS = [\n  'top', 'left',\n  'bottom', 'right'\n]\nexport const NAVSTATE_EVENTS = {\n  show: 'show',\n  hide: 'hide'\n}\nexport const DrawerResponseInterface = {\n  position: 'position',\n  posOnStart: 'posOnStart',\n  dimension: 'dimension',\n  displacement: 'displacement',\n  oppositeDimension: 'oppositeDimension',\n  close: 'closing',\n  open: 'opening'\n}\nexport const WINDOW = window\n\n// classes\nexport class Path {\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  /**\n   * Get difference between two paths\n   * @param {Path} path1 Path Object\n   * @param {Path} path2 Path Object\n   * @returns {Path} A different Path\n   */\n  static pathDifference(path1, path2) {\n    const x = path1.x - path2.x\n    const y = path1.y - path2.y\n    return new Path(x, y)\n  }\n\n  /**\n   * Join two different paths\n   * @param {Path} path1 Path Object\n   * @param {Path} path2 Path Object\n   * @returns {Path} A joined Path\n   */\n  static join(path1, path2) {\n    const x = path1.x + path2.x\n    const y = path1.y + path2.y\n    return new Path(x, y)\n  }\n}\n\nexport class Bound {\n  constructor(lower, upper) {\n    this.lower = lower\n    this.upper = upper\n  }\n\n  get gap() {\n    return this.upper - this.lower\n  }\n\n  get slack() {\n    return this.lower - this.upper\n  }\n}\n\nexport class ActivityManager {\n  constructor(activity) {\n    this.activity = activity\n    this.running = false\n    this.id = Date.now()\n  }\n\n  run() {\n    this.running = true\n  }\n\n  derun() {\n    this.running = false\n  }\n\n  isRunning() {\n    return this.running\n  }\n}\n\n// functions\nexport function dataCamelCase(data) {\n  // remove 'data-' prefix and return camelCase string\n  return camelCase(data.substring(5), '-')\n}\n\nexport function camelCase(data, delim = '-') {\n  const list = data instanceof Array ? data : data.split(delim)\n  return list.reduce((acc, cur) => acc + cur.charAt(0)\n    .toUpperCase() + cur.slice(1)\n  )\n}\n\nexport function unique(max = 1) {\n  return Math.floor(Math.random() * max)\n}\n\nexport function $(query) {\n  return document.querySelectorAll(query)[0]\n}\n\nexport function getAttribute(el, attr) {\n  return el.getAttribute(attr)\n}\n\nexport function hasAttribute(el, attr) {\n  return el.hasAttribute(attr)\n}\n\nexport function setAttribute(el, attr, value) {\n  el.setAttribute(attr, value)\n}\n\nexport function getData(el, dataName) {\n  const prop = dataCamelCase(dataName)\n  // this may return `undefined` in some Safari\n  if (el.dataset && el.dataset[prop]) {\n    return el.dataset[prop]\n  }\n  return getAttribute(el, dataName.substring(5))\n}\n\nexport function offsetRight(el) {\n  return WINDOW.screen.width - el.offsetLeft - el.offsetWidth\n}\n\nexport function offsetBottom(el) {\n  return WINDOW.screen.height - el.offsetTop - el.offsetHeight\n}\n\nexport function resolveThreshold(threshold) {\n  const MAX_THRESHOLD = 1\n  const MIN_ILLEGAL_THRESHOLD = 0\n  if (threshold < MAX_THRESHOLD && threshold > MIN_ILLEGAL_THRESHOLD) {\n    threshold = MAX_THRESHOLD - threshold\n    return threshold\n  } else if (threshold < MIN_ILLEGAL_THRESHOLD) {\n    threshold = MAX_THRESHOLD\n    return threshold\n  }\n  return MAX_THRESHOLD\n}\n\n/**\n * @param {HTMLElement} el an HTMLElement whose style should\n * be accessed\n * @param {string | string[] | {}} property A property/properties\n * to set or get\n * @param {string | number} value value to set as\n * @returns {CSSStyleDeclaration | string} A css style property\n * or CSSStyleDeclaration object\n */\nexport function css(...args) {\n  if (args.length < 1) {\n    return null\n  }\n  const el = args[0]\n  const property = args[1]\n  let value = args[2]\n  const STYLEMAP = WINDOW.getComputedStyle(el)\n\n  if (typeof property === 'string' && value) {\n    // setting one property\n    el.style[property] = value\n    return null\n  }\n  if (typeof property === 'object' && property instanceof Object) {\n    // `style` MUST = null\n    // setting many properties\n    value = property\n    for (const prop of Object.keys(value)) {\n      el.style[prop] = value[prop]\n    }\n    return null\n  } else if (Array.isArray(property)) {\n    // return all values of properties in the array for\n    // the element as object\n    const ostyle = {}\n    for (const prop of STYLEMAP) {\n      ostyle[prop] = STYLEMAP[prop]\n    }\n    return ostyle\n  } else if (typeof property === 'string') {\n    // get value of property\n    return STYLEMAP[property]\n  }\n  return STYLEMAP\n}\n","export const POINT_ANGLE = 360\nexport const PI = Math.PI\nexport const RAD = PI / (POINT_ANGLE >> 1)\n\nexport class Circle {\n  constructor(radius) {\n    this.radius = radius\n    this.diameter = this.radius * 2\n  }\n\n  get area() {\n    return PI * this.radius ** 2\n  }\n\n  get circumference() {\n    return 2 * PI * this.radius\n  }\n\n  areaOfSect(angle) {\n    angle *= RAD\n    return angle / POINT_ANGLE * this.area\n  }\n\n  arc(angle) {\n    angle *= RAD\n    return angle / POINT_ANGLE * this.circumference\n  }\n}\n","import {\n  Circle,\n  RAD\n} from './circle'\nimport {\n  Path\n} from '../util'\n\nconst DEG = 1 / RAD\n/**\n * Enum of all quadrants from first to fourth.\n * The quadrant is not a usual one; it starts from the 12th\n * hand of the clock and moves anti-clockwise\n * @enum {number}\n * @const\n */\nconst Quadrant = {\n  FIRST: 360,\n  SECOND: 90,\n  THIRD: 180,\n  FOURTH: 270\n}\n\nexport default class CircularPath extends Circle {\n  constructor(radius, ...angles) {\n    super(radius)\n    this._angles = angles\n    this.angles = angles.map((value) => this._degToRad(value))\n    this._quad = null\n  }\n\n  get paths() {\n    /**\n     * @type {Path[]}\n     */\n    const out = []\n    this.angles.forEach((value) => {\n      const [\n        x, y\n      ] = this._findPath(value)\n      out.push(new Path(x, y))\n    })\n    return out\n  }\n\n  // private\n  _degToRad(deg) {\n    return RAD * deg\n  }\n\n  _radToDeg(rad) {\n    return DEG * rad\n  }\n\n  _findPath(angle) {\n    // const quad = this.getQuadrant(DEG_ANGLE)\n    return [\n      parseFloat((this.radius * Math.cos(angle)).toFixed(3)),\n      parseFloat((this.radius * Math.sin(angle)).toFixed(3))\n    ]\n  }\n\n  getQuadrant(angle) {\n    if (angle <= Quadrant.FIRST) {\n      return Quadrant.FIRST\n    } else if (angle <= Quadrant.SECOND && angle > Quadrant.FIRST) {\n      return Quadrant.SECOND\n    } else if (angle <= Quadrant.THIRD && angle > Quadrant.SECOND) {\n      return Quadrant.THIRD\n    } else if (angle <= Quadrant.FOURTH && angle > Quadrant.THIRD) {\n      return Quadrant.FOURTH\n    }\n    throw RangeError('Quadrant out of range')\n  }\n}\n","export class Service {\n  constructor(event) {\n    this._event = event\n  }\n\n  lock() {\n    this._event.stopImmediatePropagation()\n  }\n\n  inhibitSubTask() {\n    this._event.preventDefault()\n  }\n}\n","export class Rectangle {\n  constructor(...paths) {\n    if (paths.length === 4) {\n      const [x1, y1, x2, y2] = paths\n      this.coordsX = {\n        x1,\n        x2\n      }\n      this.coordsY = {\n        y1,\n        y2\n      }\n    } else if (paths.length === 2) {\n      const {\n        x1, y1\n      } = paths[0]\n      const {\n        x2, y2\n      } = paths[1]\n      this.coordsX = {\n        x1,\n        x2\n      }\n      this.coordsY = {\n        y1,\n        y2\n      }\n    }\n  }\n\n  // getter\n  get width() {\n    return Math.abs(this.coordsX.x2 - this.coordsX.x1)\n  }\n\n  get height() {\n    return Math.abs(this.coordsY.y2 - this.coordsY.y1)\n  }\n\n  get perimeter() {\n    return 2 * (this.width + this.height)\n  }\n\n  get area() {\n    return this.width * this.height\n  }\n\n  get greaterWidth() {\n    return this.width > this.height\n  }\n\n  get greaterHeight() {\n    return !this.greaterWidth\n  }\n}\n","import {\n  Rectangle\n} from './rectangle'\n\nexport class VectorRectangle extends Rectangle {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(...paths) {\n    super(...paths)\n  }\n\n  get displacementX() {\n    return this.coordsX.x2 - this.coordsX.x1\n  }\n\n  get displacementY() {\n    return this.coordsY.y2 - this.coordsY.y1\n  }\n\n  get resultant() {\n    if (!this.displacementY) {\n      return this.displacementX\n    } else if (!this.displacementX) {\n      return this.displacementY\n    }\n    return Math.sqrt(\n      this.displacementY ** 2 + this.displacementX ** 2\n    )\n  }\n}\n","import {\n  Bound,\n  DrawerResponseInterface as DRI,\n  Path,\n  WINDOW,\n  ZERO,\n  offsetBottom,\n  resolveThreshold\n} from './../../util'\nimport {\n  Service\n} from './../service'\nimport {\n  VectorRectangle\n} from './../vector'\n\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\nconst OPEN = 'open'\nconst CLOSE = 'close'\nconst UNIT = 'px'\nconst MAX_START_AREA = 25\nconst THRESHOLD_VALUE = 0.667\nconst FALSE_TOUCH_START_POINT = 2\n\nexport default class Bottom {\n  /**\n   * @param {{}} options\n   * an object containing all required properties\n   * @param {Bound} bound a boundary object\n   */\n  constructor(options, bound) {\n    this.options = options\n    this.bound = bound\n    /**\n     * Drawer Element\n     * @type {HTMLElement}\n     */\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     * @type {Function}\n     */\n    this._winSize = this.options.sizeOfWindow || Bottom._windowSize\n    /**\n     * @type {number}\n     */\n    this.winSize = this._winSize()\n    /**\n     * @type {number}\n     */\n    this.height = this.options.SIZE\n    this.unit = this.options.unit || UNIT\n    /**\n     * @type {number}\n     * A minimum area where the draw-start is sensitive\n     */\n    this.minArea = this.winSize - (this.bound.lower || this.options.maxStartArea || MAX_START_AREA)\n\n    /**\n     * A threshold which the `touchmove` signal must attain\n     * before being qualified to stay shown\n     * the threshold should be a value between `0` and `1.0`\n     * @type {number}\n     */\n    this.threshold = this.options.threshold || THRESHOLD_VALUE\n    this.threshold = resolveThreshold(this.threshold)\n\n    // Touch coordinates (Touch Start)\n    this.startX = -1\n    this.startY = -1\n    // Touch coordinates (Touch Move)\n    this.resumeX = -1\n    this.resumeY = -1\n    // Touch coordinates (Touch End) [these may not be important]\n    this.endX = -1\n    this.endY = -1\n\n    /**\n     * A control for scroll. This control prevents\n     * a clash between coordinates dancing between\n     * the (&delta;`X`) coords and (&delta;`Y`) coords.\n     * Utilising the `Rectangle` class to get bounds\n     * and isolate territories\n     * @type {boolean}\n     */\n    this.scrollControlSet = false\n    this.scrollControl = null\n    this.timing = {\n      /**\n       * @type {Date}\n       */\n      start: null,\n      /**\n       * @type {Date}\n       */\n      end: null\n    }\n\n    this._context = this\n  }\n\n  /**\n   * The `touchstart` event handler for the `Bottom` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchstart` event.\n   * @param {Function} fn - a callback function called when the `start`\n   * event is triggered\n   * @returns {void}\n   */\n  start(touchEvent, fn) {\n    this.timing.start = new Date()\n    this._updateOrientation()\n    const WIN_HEIGHT = this.winSize\n    const start = touchEvent.changedTouches[0].clientY\n    this.startX = touchEvent.changedTouches[0].clientX\n    this.startY = start\n    /**\n     * The `Drawer`'s `Bottom` class uses the `CSS property`, `bottom`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = offsetBottom(this.element)\n    const bound = this.bound\n    this.positionOnStart = currentPosition\n    const dimension = bound.lower ? `-${bound.upper - bound.lower}${this.unit}` : `-${bound.upper - (WIN_HEIGHT - start)}${this.unit}`\n    const displacement = `-${bound.upper - FALSE_TOUCH_START_POINT}${this.unit}`\n\n    if (start <= WIN_HEIGHT && start >= this.minArea && currentPosition === bound.slack) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.dimension]: dimension,\n        [DRI.displacement]: displacement\n      }\n      fn.call(this._context, new Service(touchEvent), response, new Path(this.startX, this.startY))\n    }\n  }\n\n  /**\n   * The `touchmove` event handler for the `Bottom` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchmove` event.\n   * @param {Function} fn - a callback function called when the `move`\n   * event is triggered\n   * @returns {void}\n   */\n  move(touchEvent, fn) {\n    /* eslint complexity: [\"error\", 25] */\n    const WIN_HEIGHT = this.winSize\n    const FALSE_HEIGHT = WIN_HEIGHT - this.bound.upper // should be `-this.positionOnStart`\n    const resume = touchEvent.changedTouches[0].clientY\n    this.resumeX = touchEvent.changedTouches[0].clientX\n    this.resumeY = resume\n\n    const currentPosition = offsetBottom(this.element)\n    const bound = this.bound\n    // const nextAction = this.positionOnStart === ZERO ? CLOSE : OPEN\n\n    const start = this.startY\n    // const height = bound.upper || this.height\n    /**\n     * When the touch doesn't start from the max-height\n     * of the element ignore `start` and use `height`\n     * as starting point.\n     */\n    const virtualStart = start < FALSE_HEIGHT ? FALSE_HEIGHT : start\n\n    const dimension = `${start - resume + this.positionOnStart}${this.unit}`\n    // const dimension = `-${height - bound.lower - (WIN_HEIGHT - resume)}${this.unit}`\n\n    /**\n     * Dimension for closing. When the drawer is being closed,\n     * the `height` is the max dimension and the `start` could\n     * possibly be more than the `height`\n     * or less than the `height`.\n     * To assure an accurate dimension the `virtualStart`\n     * determines whether to use the `height` as starting point\n     * or the actual `start`. If the actual start is more than\n     * `height`, the height becomes the start point else the `start`\n     */\n    const vdimension = `-${-virtualStart + resume - this.positionOnStart}${this.unit}`\n    const rect = new VectorRectangle(\n      this.startX,\n      this.startY,\n      this.resumeX,\n      this.resumeY\n    )\n    const isBoundY = rect.greaterHeight\n\n    if (!this.scrollControlSet) {\n      this.scrollControl = isBoundY\n      this.scrollControlSet = !this.scrollControlSet\n    }\n\n    // OPEN LOGIC\n    if (start <= WIN_HEIGHT && (start >= this.minArea || start >= FALSE_HEIGHT - currentPosition) &&\n    currentPosition < ZERO && rect.width < bound.gap && isBoundY &&\n    this.scrollControl && rect.displacementY < ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: dimension,\n        [DRI.open]: true,\n        [DRI.close]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n\n    // CLOSE LOGIC\n    if (resume >= FALSE_HEIGHT && Math.abs(currentPosition) < bound.gap && rect.width < bound.gap &&\n    isBoundY && this.scrollControl && rect.displacementY > ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: vdimension,\n        [DRI.close]: true,\n        [DRI.open]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n  }\n\n  /**\n   * The `touchend` event handler for the `Bottom` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchend` event.\n   * @param {Function} fn - a callback function called when the `end`\n   * event is triggered\n   * @param {{}} thresholdState - a state object which should be passed\n   * by reference for updating by this method\n   * @returns {void}\n   */\n  end(touchEvent, fn, thresholdState) {\n    this.timing.end = new Date()\n    const WIN_HEIGHT = this.winSize\n    const FALSE_HEIGHT = WIN_HEIGHT - this.bound.upper\n    const end = touchEvent.changedTouches[0].clientY\n    this.endX = touchEvent.changedTouches[0].clientX\n    this.endY = end\n\n    const rect = new VectorRectangle(this.startX, this.startY, this.endX, this.endY)\n\n    const start = this.startY\n    const TIMING = this.timing.end.getTime() - this.timing.start.getTime()\n    const threshold = this.threshold\n    const signedOffsetSide =  offsetBottom(this.element)\n    const bound = this.bound\n    const customBound = new Bound(bound.upper + this.positionOnStart, bound.upper)\n    const nonZero = `${bound.slack}${this.unit}`\n    const zero = `${ZERO}`\n    const height = bound.upper || this.height\n    const offsetSide = Math.abs(signedOffsetSide)\n    let action = OPEN\n    // release the control for another session\n    this.scrollControl = this.scrollControlSet = false // eslint-disable-line no-multi-assign\n\n    const response = {\n      [DRI.position]: signedOffsetSide,\n      [DRI.posOnStart]: this.positionOnStart,\n      rect\n    }\n\n    function getResponse(state, trueForOpen) {\n      if (state === THRESHOLD && trueForOpen || state === BELOW_THRESHOLD && !trueForOpen) {\n        return {\n          [DRI.dimension]: zero,\n          TIMING,\n          [DRI.oppositeDimension]: nonZero,\n          ...response\n        }\n      } else if (state === THRESHOLD && !trueForOpen || state === BELOW_THRESHOLD && trueForOpen) {\n        return {\n          [DRI.dimension]: nonZero,\n          TIMING,\n          [DRI.oppositeDimension]: zero,\n          ...response\n        }\n      }\n      return {}\n    }\n\n    // OPEN LOGIC\n    if (rect.displacementY <= ZERO && (start >= this.minArea || start >= FALSE_HEIGHT - signedOffsetSide)) {\n      /**\n       * Threshold resolution is done here to get the original\n       * set value of the threshold before the first resolution\n       * Here it's the original value of threshold needed, if\n       * it was a legal value.\n       * value = 0.75\n       * value = resolve(value) => 0.25\n       * resolve(value) => 0.75\n       */\n      if (rect.height >= customBound.gap * resolveThreshold(threshold)) {\n        thresholdState.state = [THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n      return\n    }\n\n    // CLOSE LOGIC\n    if (rect.displacementY >= ZERO && this.resumeY >= FALSE_HEIGHT) {\n      action = CLOSE\n      if (offsetSide >= height * threshold) {\n        thresholdState.state = [THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n    }\n  }\n\n  setContext(ctx) {\n    this._context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? WINDOW.getComputedStyle(elt, pseudoElt) : WINDOW.getComputedStyle(elt)\n  }\n\n  static _windowSize() {\n    return WINDOW.screen.height\n  }\n\n  // no need for `window.onorientationchange`\n  _updateOrientation() {\n    this.winSize = typeof this._winSize === 'function' ? this._winSize() : Bottom._windowSize()\n    this.minArea = this.winSize - (this.bound.lower || this.options.maxStartArea || MAX_START_AREA)\n  }\n}\n","import {\n  Bound,\n  DrawerResponseInterface as DRI,\n  Path,\n  WINDOW,\n  ZERO,\n  resolveThreshold\n} from './../../util'\nimport {\n  Service\n} from './../service'\nimport {\n  VectorRectangle\n} from './../vector'\n\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\nconst OPEN = 'open'\nconst CLOSE = 'close'\nconst UNIT = 'px'\nconst MAX_START_AREA = 25\nconst THRESHOLD_VALUE = 0.667\nconst FALSE_TOUCH_START_POINT = 2\n\nexport default class Left {\n  /**\n   * @param {{}} options\n   * an object containing all required properties\n   * @param {Bound} bound a boundary object\n   */\n  constructor(options, bound) {\n    this.options = options\n    this.bound = bound\n    /**\n     * Drawer Element\n     * @type {HTMLElement}\n     */\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     *\n     * unused: required in `Right` and `Bottom`\n     * @type {Function}\n     */\n    this._winSize = this.options.sizeOfWindow || Left._windowSize\n    this.winSize = this._winSize()\n    /**\n     * @type {number}\n     */\n    this.width = this.options.SIZE\n    this.unit = this.options.unit || UNIT\n    /**\n     * @type {number}\n     * A maximum area where the draw-start is sensitive\n     * Use set boundary (`bound`) if there's an initial\n     * offset\n     */\n    this.maxArea = this.bound.lower || this.options.maxStartArea || MAX_START_AREA\n\n    /**\n     * A threshold which the `touchmove` signal must attain\n     * before being qualified to stay shown\n     * the threshold should be a value between `0` and `1.0`\n     * @type {number}\n     */\n    this.threshold = this.options.threshold || THRESHOLD_VALUE\n    this.threshold = resolveThreshold(this.threshold)\n\n    // Touch coordinates (Touch Start)\n    this.startX = -1\n    this.startY = -1\n    // Touch coordinates (Touch Move)\n    this.resumeX = -1\n    this.resumeY = -1\n    // Touch coordinates (Touch End) [these may not be important]\n    this.endX = -1\n    this.endY = -1\n\n    /**\n     * A control for scroll. This control prevents\n     * a clash between coordinates dancing between\n     * the (&delta;`X`) coords and (&delta;`Y`) coords.\n     * Utilising the `Rectangle` class to get bounds\n     * and isolate territories\n     * @type {boolean}\n     */\n    this.scrollControlSet = false\n    this.scrollControl = null\n    this.timing = {\n      /**\n       * @type {Date}\n       */\n      start: null,\n      /**\n       * @type {Date}\n       */\n      end: null\n    }\n\n    this._context = this\n  }\n\n  /**\n   * The `touchstart` event handler for the `Left` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchstart` event.\n   * @param {Function} fn - a callback function called when the `start`\n   * event is triggered\n   * @returns {void}\n   */\n  start(touchEvent, fn) {\n    this.timing.start = new Date()\n    this._updateOrientation()\n    const start = touchEvent.changedTouches[0].clientX\n    this.startX = start\n    this.startY = touchEvent.changedTouches[0].clientY\n    /**\n     * The `Drawer`'s `Left` class uses the `CSS property`, `left`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = this.element.offsetLeft\n    const bound = this.bound\n    this.positionOnStart = currentPosition\n    const dimension = bound.lower ? `-${bound.upper - bound.lower}${this.unit}` : `-${bound.upper - start}${this.unit}`\n    const displacement = `-${bound.upper - FALSE_TOUCH_START_POINT}${this.unit}`\n\n    if (start >= ZERO && start <= this.maxArea && currentPosition === bound.slack) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.dimension]: dimension,\n        [DRI.displacement]: displacement\n      }\n      fn.call(this._context, new Service(touchEvent), response, new Path(this.startX, this.startY))\n    }\n  }\n\n  /**\n   * The `touchmove` event handler for the `Left` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchmove` event.\n   * @param {Function} fn - a callback function called when the `move`\n   * event is triggered\n   * @returns {void}\n   */\n  move(touchEvent, fn) {\n    /* eslint complexity: [\"error\", 25] */\n    const resume = touchEvent.changedTouches[0].clientX\n    this.resumeX = resume\n    this.resumeY = touchEvent.changedTouches[0].clientY\n\n    const currentPosition = this.element.offsetLeft\n    const bound = this.bound\n    // const nextAction = this.positionOnStart === ZERO ? CLOSE : OPEN\n    const start = this.startX\n    const width = bound.upper || this.width\n    /**\n     * When the touch doesn't start from the max-width\n     * of the element ignore `start` and use `width`\n     * as starting point.\n     */\n    const virtualStart = start > width ? width : start\n    /**\n     * Dimension for opening. When the drawer is being opened,\n     * the `width` is the max dimension, and the `start` can\n     * only be less than the `width` (from a range of `0` to\n     * `this.maxArea` e.g `0` - `25`), so the current\n     * reading from `resume` is subtracted from the `width` to\n     * get the accurate position to update the drawer with.\n     */\n\n    const dimension = `${-start + resume + this.positionOnStart}${this.unit}`\n    // const dimension = `-${width - bound.lower - resume}${this.unit}`\n    /**\n     * Dimension for closing. When the drawer is being closed,\n     * the `width` is the max dimension and the `start` could\n     * possibly be more than the `width`\n     * or less than the `width`.\n     * To assure an accurate dimension the `virtualStart`\n     * determines whether to use the `width` as starting point\n     * or the actual `start`. If the actual start is more than\n     * `width`, the width becomes the start point else the `start`\n     */\n    const vdimension = `-${virtualStart - resume - this.positionOnStart}${this.unit}`\n    const rect = new VectorRectangle(\n      this.startX,\n      this.startY,\n      this.resumeX,\n      this.resumeY\n    )\n    const isBoundX = rect.greaterWidth\n\n    if (!this.scrollControlSet) {\n      this.scrollControl = isBoundX\n      this.scrollControlSet = !this.scrollControlSet\n    }\n\n    // OPEN LOGIC\n    if (start >= ZERO && (start <= this.maxArea || start <= width + currentPosition) &&\n    currentPosition < ZERO && rect.width < bound.gap && isBoundX &&\n    this.scrollControl && rect.displacementX > ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: dimension,\n        [DRI.open]: true,\n        [DRI.close]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n\n    // CLOSE LOGIC\n    if (resume <= width && Math.abs(currentPosition) < bound.gap && rect.width < bound.gap &&\n    isBoundX && this.scrollControl && rect.displacementX < ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: vdimension,\n        [DRI.close]: true,\n        [DRI.open]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n  }\n\n  /**\n   * The `touchend` event handler for the `Left` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchend` event.\n   * @param {Function} fn - a callback function called when the `end`\n   * event is triggered\n   * @param {{}} thresholdState - a state object which should be passed\n   * by reference for updating by this method\n   * @returns {void}\n   */\n  end(touchEvent, fn, thresholdState) {\n    this.timing.end = new Date()\n\n    const end = touchEvent.changedTouches[0].clientX\n    this.endX = end\n    this.endY = touchEvent.changedTouches[0].clientY\n\n    const rect = new VectorRectangle(this.startX, this.startY, this.endX, this.endY)\n\n    const start = this.startX\n    const TIMING = this.timing.end.getTime() - this.timing.start.getTime()\n    const threshold = this.threshold\n    const signedOffsetSide = this.element.offsetLeft\n    const bound = this.bound\n    const customBound = new Bound(bound.upper + this.positionOnStart, bound.upper)\n    const nonZero = `${bound.slack}${this.unit}`\n    const zero = `${ZERO}`\n    const width = bound.upper || this.width\n    const offsetSide = Math.abs(signedOffsetSide)\n    let action = OPEN\n    // release the control for another session\n    this.scrollControl = this.scrollControlSet = false // eslint-disable-line no-multi-assign\n\n    const response = {\n      [DRI.position]: signedOffsetSide,\n      [DRI.posOnStart]: this.positionOnStart,\n      rect\n    }\n\n    function getResponse(state, trueForOpen) {\n      if (state === THRESHOLD && trueForOpen || state === BELOW_THRESHOLD && !trueForOpen) {\n        return {\n          [DRI.dimension]: zero,\n          TIMING,\n          [DRI.oppositeDimension]: nonZero,\n          ...response\n        }\n      } else if (state === THRESHOLD && !trueForOpen || state === BELOW_THRESHOLD && trueForOpen) {\n        return {\n          [DRI.dimension]: nonZero,\n          TIMING,\n          [DRI.oppositeDimension]: zero,\n          ...response\n        }\n      }\n      return {}\n    }\n\n    // OPEN LOGIC\n    if (rect.displacementX >= ZERO && (start <= this.maxArea || start <= width + signedOffsetSide)) {\n      if (rect.width >= customBound.gap * resolveThreshold(threshold)) {\n        thresholdState.state = [THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n      return\n    }\n\n    // CLOSE LOGIC\n    if (rect.displacementX <= ZERO && this.resumeX <= width) {\n      action = CLOSE\n      if (offsetSide >= width * threshold) {\n        thresholdState.state = [THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n    }\n  }\n\n  setContext(ctx) {\n    this._context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? WINDOW.getComputedStyle(elt, pseudoElt) : WINDOW.getComputedStyle(elt)\n  }\n\n  static _windowSize() {\n    return WINDOW.screen.width\n  }\n\n  // window size is not needed here; at least not yet\n  // the major purpose of this is to update bound dependents\n  _updateOrientation() {\n    this.winSize = typeof this._winSize === 'function' ? this._winSize() : Left._windowSize()\n    this.minArea = this.bound.lower || this.options.maxStartArea || MAX_START_AREA\n  }\n}\n","import {\n  Bound,\n  DrawerResponseInterface as DRI,\n  Path,\n  WINDOW,\n  ZERO,\n  offsetRight,\n  resolveThreshold\n} from './../../util'\nimport {\n  Service\n} from './../service'\nimport {\n  VectorRectangle\n} from './../vector'\n\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\nconst OPEN = 'open'\nconst CLOSE = 'close'\nconst UNIT = 'px'\nconst MAX_START_AREA = 25\nconst THRESHOLD_VALUE = 0.667\nconst FALSE_TOUCH_START_POINT = 2\n\nexport default class Right {\n  /**\n   * @param {{}} options\n   * an object containing all required properties\n   * @param {Bound} bound a boundary object\n   */\n  constructor(options, bound) {\n    this.options = options\n    this.bound = bound\n    /**\n     * Drawer Element\n     * @type {HTMLElement}\n     */\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     * @type {Function}\n     */\n    this._winSize = this.options.sizeOfWindow || Right._windowSize\n    /**\n     * @type {number}\n     */\n    this.winSize = this._winSize()\n    /**\n     * @type {number}\n     */\n    this.width = this.options.SIZE\n    this.unit = this.options.unit || UNIT\n    /**\n     * @type {number}\n     * A minimum area where the draw-start is sensitive\n     */\n    this.minArea = this.winSize - (this.bound.lower || this.options.maxStartArea || MAX_START_AREA)\n\n    /**\n     * A threshold which the `touchmove` signal must attain\n     * before being qualified to stay shown\n     * the threshold should be a value between `0` and `1.0`\n     * @type {number}\n     */\n    this.threshold = this.options.threshold || THRESHOLD_VALUE\n    this.threshold = resolveThreshold(this.threshold)\n\n    // Touch coordinates (Touch Start)\n    this.startX = -1\n    this.startY = -1\n    // Touch coordinates (Touch Move)\n    this.resumeX = -1\n    this.resumeY = -1\n    // Touch coordinates (Touch End) [these may not be important]\n    this.endX = -1\n    this.endY = -1\n\n    /**\n     * A control for scroll. This control prevents\n     * a clash between coordinates dancing between\n     * the (&delta;`X`) coords and (&delta;`Y`) coords.\n     * Utilising the `Rectangle` class to get bounds\n     * and isolate territories\n     * @type {boolean}\n     */\n    this.scrollControlSet = false\n    this.scrollControl = null\n    this.timing = {\n      /**\n       * @type {Date}\n       */\n      start: null,\n      /**\n       * @type {Date}\n       */\n      end: null\n    }\n\n    this._context = this\n  }\n\n  /**\n   * The `touchstart` event handler for the `Left` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchstart` event.\n   * @param {Function} fn - a callback function called when the `start`\n   * event is triggered\n   * @returns {void}\n   */\n  start(touchEvent, fn) {\n    this.timing.start = new Date()\n    this._updateOrientation()\n    const WIN_WIDTH = this.winSize\n    const start = touchEvent.changedTouches[0].clientX\n    this.startX = start\n    this.startY = touchEvent.changedTouches[0].clientY\n    /**\n     * The `Drawer`'s `Right` class uses the `CSS property`, `right`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = offsetRight(this.element)\n    const bound = this.bound\n    this.positionOnStart = currentPosition\n    const dimension = bound.lower ? `-${bound.upper - bound.lower}${this.unit}` : `-${bound.upper - (WIN_WIDTH - start)}${this.unit}`\n    const displacement = `-${bound.upper - FALSE_TOUCH_START_POINT}${this.unit}`\n\n    if (start <= WIN_WIDTH && start >= this.minArea && currentPosition === bound.slack) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.dimension]: dimension,\n        [DRI.displacement]: displacement\n      }\n      fn.call(this._context, new Service(touchEvent), response, new Path(this.startX, this.startY))\n    }\n  }\n\n  /**\n   * The `touchmove` event handler for the `Right` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchmove` event.\n   * @param {Function} fn - a callback function called when the `move`\n   * event is triggered\n   * @returns {void}\n   */\n  move(touchEvent, fn) {\n    /* eslint complexity: [\"error\", 25] */\n    const WIN_WIDTH = this.winSize\n    const FALSE_WIDTH = WIN_WIDTH - this.bound.upper\n    const resume = touchEvent.changedTouches[0].clientX\n    this.resumeX = resume\n    this.resumeY = touchEvent.changedTouches[0].clientY\n\n    const currentPosition = offsetRight(this.element)\n    const bound = this.bound\n    // const nextAction = this.positionOnStart === ZERO ? CLOSE : OPEN\n\n    const start = this.startX\n    // const width = bound.upper || this.width\n    /**\n     * When the touch doesn't start from the max-width\n     * of the element ignore `start` and use `width`\n     * as starting point.\n     */\n    const virtualStart = start < FALSE_WIDTH ? FALSE_WIDTH : start\n\n    const dimension = `${start - resume + this.positionOnStart}${this.unit}`\n    // const dimension = `-${width - bound.lower - (WIN_WIDTH - resume)}${this.unit}`\n\n    /**\n     * Dimension for closing. When the drawer is being closed,\n     * the `width` is the max dimension and the `start` could\n     * possibly be more than the `width`\n     * or less than the `width`.\n     * To assure an accurate dimension the `virtualStart`\n     * determines whether to use the `width` as starting point\n     * or the actual `start`. If the actual start is more than\n     * `width`, the width becomes the start point else the `start`\n     */\n    const vdimension = `-${-virtualStart + resume - this.positionOnStart}${this.unit}`\n    const rect = new VectorRectangle(\n      this.startX,\n      this.startY,\n      this.resumeX,\n      this.resumeY\n    )\n    const isBoundX = rect.greaterWidth\n\n    if (!this.scrollControlSet) {\n      this.scrollControl = isBoundX\n      this.scrollControlSet = !this.scrollControlSet\n    }\n\n    // OPEN LOGIC\n    if (start <= WIN_WIDTH && (start >= this.minArea || start >= FALSE_WIDTH - currentPosition) &&\n    currentPosition < ZERO && rect.width < bound.gap && isBoundX &&\n    this.scrollControl && rect.displacementX < ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: dimension,\n        [DRI.open]: true,\n        [DRI.close]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n\n    // CLOSE LOGIC\n    if (resume >= FALSE_WIDTH && Math.abs(currentPosition) < bound.gap && rect.width < bound.gap &&\n    isBoundX && this.scrollControl && rect.displacementX > ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: vdimension,\n        [DRI.close]: true,\n        [DRI.open]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n  }\n\n  /**\n   * The `touchend` event handler for the `Right` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchend` event.\n   * @param {Function} fn - a callback function called when the `end`\n   * event is triggered\n   * @param {{}} thresholdState - a state object which should be passed\n   * by reference for updating by this method\n   * @returns {void}\n   */\n  end(touchEvent, fn, thresholdState) {\n    this.timing.end = new Date()\n    const WIN_WIDTH = this.winSize\n    const FALSE_WIDTH = WIN_WIDTH - this.bound.upper\n    const end = touchEvent.changedTouches[0].clientX\n    this.endX = end\n    this.endY = touchEvent.changedTouches[0].clientY\n\n    const rect = new VectorRectangle(this.startX, this.startY, this.endX, this.endY)\n\n    const start = this.startX\n    const TIMING = this.timing.end.getTime() - this.timing.start.getTime()\n    const threshold = this.threshold\n    const signedOffsetSide = offsetRight(this.element)\n    const bound = this.bound\n    const customBound = new Bound(bound.upper + this.positionOnStart, bound.upper)\n    const nonZero = `${bound.slack}${this.unit}`\n    const zero = `${ZERO}`\n    const width = bound.upper || this.width\n    const offsetSide = Math.abs(signedOffsetSide)\n    let action = OPEN\n    // release the control for another session\n    this.scrollControl = this.scrollControlSet = false // eslint-disable-line no-multi-assign\n\n    const response = {\n      [DRI.position]: signedOffsetSide,\n      [DRI.posOnStart]: this.positionOnStart,\n      rect\n    }\n\n    function getResponse(state, trueForOpen) {\n      if (state === THRESHOLD && trueForOpen || state === BELOW_THRESHOLD && !trueForOpen) {\n        return {\n          [DRI.dimension]: zero,\n          TIMING,\n          [DRI.oppositeDimension]: nonZero,\n          ...response\n        }\n      } else if (state === THRESHOLD && !trueForOpen || state === BELOW_THRESHOLD && trueForOpen) {\n        return {\n          [DRI.dimension]: nonZero,\n          TIMING,\n          [DRI.oppositeDimension]: zero,\n          ...response\n        }\n      }\n      return {}\n    }\n\n    // OPEN LOGIC\n    if (rect.displacementX <= ZERO && (start >= this.minArea || start >= FALSE_WIDTH - signedOffsetSide)) {\n      if (rect.width >= customBound.gap * resolveThreshold(threshold)) {\n        thresholdState.state = [THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n      return\n    }\n\n    // CLOSE LOGIC\n    if (rect.displacementX >= ZERO && this.resumeX >= FALSE_WIDTH) {\n      action = CLOSE\n      if (offsetSide >= width * threshold) {\n        thresholdState.state = [THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n    }\n  }\n\n  setContext(ctx) {\n    this._context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? WINDOW.getComputedStyle(elt, pseudoElt) : WINDOW.getComputedStyle(elt)\n  }\n\n  static _windowSize() {\n    return WINDOW.screen.width\n  }\n\n  // no need for `window.onorientationchange`\n  _updateOrientation() {\n    this.winSize = typeof this._winSize === 'function' ? this._winSize() : Right._windowSize()\n    this.minArea = this.winSize - (this.bound.lower || this.options.maxStartArea || MAX_START_AREA)\n  }\n}\n","import {\n  Bound,\n  DrawerResponseInterface as DRI,\n  Path,\n  WINDOW,\n  ZERO,\n  resolveThreshold\n} from './../../util'\nimport {\n  Service\n} from '../service'\nimport {\n  VectorRectangle\n} from './../vector'\n\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\nconst OPEN = 'open'\nconst CLOSE = 'close'\nconst UNIT = 'px'\nconst MAX_START_AREA = 25\nconst THRESHOLD_VALUE = 0.667\nconst FALSE_TOUCH_START_POINT = 2\n\nexport default class Top {\n  /**\n   * @param {{}} options\n   * an object containing all required properties\n   * @param {Bound} bound a boundary object\n   */\n  constructor(options, bound) {\n    this.options = options\n    this.bound = bound\n    /**\n     * Drawer Element\n     * @type {HTMLElement}\n     */\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     *\n     * unused: required in `Right` and `Bottom`\n     * @type {Function}\n     */\n    this._winSize = this.options.sizeOfWindow || Top._windowSize\n    this.winSize = this._winSize()\n    /**\n     * @type {number}\n     */\n    this.height = this.options.SIZE\n    this.unit = this.options.unit || UNIT\n    /**\n     * @type {number}\n     * A maximum area where the draw-start is sensitive\n     * Use set boundary (`bound`) if there's an initial\n     * offset\n     */\n    this.maxArea = this.bound.lower || this.options.maxStartArea || MAX_START_AREA\n\n    /**\n     * A threshold which the `touchmove` signal must attain\n     * before being qualified to stay shown\n     * the threshold should be a value between `0` and `1.0`\n     * @type {number}\n     */\n    this.threshold = this.options.threshold || THRESHOLD_VALUE\n    this.threshold = resolveThreshold(this.threshold)\n\n    // Touch coordinates (Touch Start)\n    this.startX = -1\n    this.startY = -1\n    // Touch coordinates (Touch Move)\n    this.resumeX = -1\n    this.resumeY = -1\n    // Touch coordinates (Touch End) [these may not be important]\n    this.endX = -1\n    this.endY = -1\n\n    /**\n     * A control for scroll. This control prevents\n     * a clash between coordinates dancing between\n     * the (&delta;`X`) coords and (&delta;`Y`) coords.\n     * Utilising the `Rectangle` class to get bounds\n     * and isolate territories\n     * @type {boolean}\n     */\n    this.scrollControlSet = false\n    this.scrollControl = null\n    this.timing = {\n      /**\n       * @type {Date}\n       */\n      start: null,\n      /**\n       * @type {Date}\n       */\n      end: null\n    }\n\n    this._context = this\n  }\n\n  /**\n   * The `touchstart` event handler for the `Top` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchstart` event.\n   * @param {Function} fn - a callback function called when the `start`\n   * event is triggered\n   * @returns {void}\n   */\n  start(touchEvent, fn) {\n    this.timing.start = new Date()\n    this._updateOrientation()\n    const start = touchEvent.changedTouches[0].clientY\n    this.startX = touchEvent.changedTouches[0].clientX\n    this.startY = start\n    /**\n     * The `Drawer`'s `Top` class uses the `CSS property`, `top`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = this.element.offsetTop\n    const bound = this.bound\n    this.positionOnStart = currentPosition\n    const dimension = bound.lower ? `-${bound.upper - bound.lower}${this.unit}` : `-${bound.upper - start}${this.unit}`\n    const displacement = `-${bound.upper - FALSE_TOUCH_START_POINT}${this.unit}`\n    const maxArea = bound.lower || this.minArea\n\n    if (start >= ZERO && start <= maxArea && currentPosition === bound.slack) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.dimension]: dimension,\n        [DRI.displacement]: displacement\n      }\n      fn.call(this._context, new Service(touchEvent), response, new Path(this.startX, this.startY))\n    }\n  }\n\n  /**\n   * The `touchmove` event handler for the `Top` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchmove` event.\n   * @param {Function} fn - a callback function called when the `move`\n   * event is triggered\n   * @returns {void}\n   */\n  move(touchEvent, fn) {\n    /* eslint complexity: [\"error\", 25] */\n    const resume = touchEvent.changedTouches[0].clientY\n    this.resumeX = touchEvent.changedTouches[0].clientX\n    this.resumeY = resume\n\n    const currentPosition = this.element.offsetTop\n    const bound = this.bound\n    // const nextAction = this.positionOnStart === ZERO ? CLOSE : OPEN\n\n    const start = this.startX\n    const height = bound.upper || this.height\n    /**\n     * When the touch doesn't start from the max-height\n     * of the element ignore `start` and use `height`\n     * as starting point.\n     */\n    const virtualStart = start > height ? height : start\n    /**\n     * Dimension for opening. When the drawer is being opened,\n     * the `height` is the max dimension, and the `start` can\n     * only be less than the `height` (from a range of `0` to\n     * `this.maxArea` e.g `0` - `25`), so the current\n     * reading from `resume` is subtracted from the `height` to\n     * get the accurate position to update the drawer with.\n     */\n\n    const dimension = `${-start + resume + this.positionOnStart}${this.unit}`\n    // const dimension = `-${height - bound.lower - resume}${this.unit}`\n    /**\n     * Dimension for closing. When the drawer is being closed,\n     * the `height` is the max dimension and the `start` could\n     * possibly be more than the `height`\n     * or less than the `height`.\n     * To assure an accurate dimension the `virtualStart`\n     * determines whether to use the `height` as starting point\n     * or the actual `start`. If the actual start is more than\n     * `height`, the height becomes the start point else the `start`\n     */\n    const vdimension = `-${virtualStart - resume - this.positionOnStart}${this.unit}`\n    const rect = new VectorRectangle(\n      this.startX,\n      this.startY,\n      this.resumeX,\n      this.resumeY\n    )\n    const isBoundY = rect.greaterHeight\n\n    if (!this.scrollControlSet) {\n      this.scrollControl = isBoundY\n      this.scrollControlSet = !this.scrollControlSet\n    }\n\n    // OPEN LOGIC\n    if (start >= ZERO && (start <= this.maxArea || start <= height + currentPosition) &&\n    currentPosition < ZERO && rect.width < bound.gap && isBoundY &&\n    this.scrollControl && rect.displacementY > ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: dimension,\n        [DRI.open]: true,\n        [DRI.close]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n\n    // CLOSE LOGIC\n    if (resume <= this.height && Math.abs(currentPosition) < bound.gap && rect.width < bound.gap &&\n    isBoundY && this.scrollControl && rect.displacementY < ZERO) {\n      const response = {\n        [DRI.position]: currentPosition,\n        [DRI.posOnStart]: this.positionOnStart,\n        [DRI.dimension]: vdimension,\n        [DRI.close]: true,\n        [DRI.open]: false\n      }\n      fn.call(this._context, new Service(touchEvent), response, rect)\n    }\n  }\n\n  /**\n   * The `touchend` event handler for the `Top` drawer `class`\n   * @param {TouchEvent} touchEvent an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchend` event.\n   * @param {Function} fn - a callback function called when the `end`\n   * event is triggered\n   * @param {{}} thresholdState - a state object which should be passed\n   * by reference for updating by this method\n   * @returns {void}\n   */\n  end(touchEvent, fn, thresholdState) {\n    this.timing.end = new Date()\n\n    const end = touchEvent.changedTouches[0].clientY\n    this.endX = touchEvent.changedTouches[0].clientX\n    this.endY = end\n\n    const rect = new VectorRectangle(this.startX, this.startY, this.endX, this.endY)\n\n    const start = this.startY\n    const TIMING = this.timing.end.getTime() - this.timing.start.getTime()\n    const threshold = this.threshold\n    const signedOffsetSide = this.element.offsetTop\n    const bound = this.bound\n    const customBound = new Bound(bound.upper + this.positionOnStart, bound.upper)\n    const nonZero = `${bound.slack}${this.unit}`\n    const zero = `${ZERO}`\n    const height = bound.upper || this.height\n    const offsetSide = Math.abs(signedOffsetSide)\n    let action = OPEN\n    // release the control for another session\n    this.scrollControl = this.scrollControlSet = false // eslint-disable-line no-multi-assign\n\n    const response = {\n      [DRI.position]: signedOffsetSide,\n      [DRI.posOnStart]: this.positionOnStart,\n      rect\n    }\n\n    function getResponse(state, trueForOpen) {\n      if (state === THRESHOLD && trueForOpen || state === BELOW_THRESHOLD && !trueForOpen) {\n        return {\n          [DRI.dimension]: zero,\n          TIMING,\n          [DRI.oppositeDimension]: nonZero,\n          ...response\n        }\n      } else if (state === THRESHOLD && !trueForOpen || state === BELOW_THRESHOLD && trueForOpen) {\n        return {\n          [DRI.dimension]: nonZero,\n          TIMING,\n          [DRI.oppositeDimension]: zero,\n          ...response\n        }\n      }\n      return {}\n    }\n\n    // OPEN LOGIC\n    if (rect.displacementY >= ZERO && (start <= this.maxArea || start <= height + signedOffsetSide)) {\n      if (rect.height >= customBound.gap * resolveThreshold(threshold)) {\n        thresholdState.state = [THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n      return\n    }\n\n    // CLOSE LOGIC\n    if (rect.displacementY <= ZERO && this.resumeY <= height) {\n      action = CLOSE\n      if (offsetSide >= height * threshold) {\n        thresholdState.state = [THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n      }\n      thresholdState.service = new Service(touchEvent)\n      fn.call(this, action)\n    }\n  }\n\n  setContext(ctx) {\n    this._context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? WINDOW.getComputedStyle(elt, pseudoElt) : WINDOW.getComputedStyle(elt)\n  }\n\n  static _windowSize() {\n    return WINDOW.screen.height\n  }\n\n  // window size is not need here; at least not yet\n  // the major purpose of this is to update bound dependents\n  _updateOrientation() {\n    this.winSize = typeof this._winSize === 'function' ? this._winSize() : Top._windowSize()\n    this.minArea = this.bound.lower || this.options.maxStartArea || MAX_START_AREA\n  }\n}\n","import Bottom from './bottom'\nimport Left from './left'\nimport Right from './right'\nimport Top from './top'\nimport {\n  WINDOW\n} from '../../util'\n\nconst BELOW_THRESHOLD = 'belowthreshold'\nconst THRESHOLD = 'threshold'\nconst START = 'start'\nconst MOVE = 'move'\nconst END = 'end'\nconst CLASS_TYPE = '[object SnappedDrawer]'\n\nexport default class SnappedDrawer {\n  /**\n   * @param {{}} options an object of configuration options\n   * @param {Bound} bound a boundary object\n   * @param {{}} drawerManager an object that helps manage drawers\n   * especially when more than one drawer service is running\n   */\n  constructor(options, bound, drawerManager) {\n    this._options = options\n    this._drawerManager = drawerManager\n    this._element = options.ELEMENT\n    this._target = options.TARGET\n    this._handlers = null\n    this._direction = options.DIRECTION\n    this._calibration = null\n    this._callbacks = null\n    this._context = this\n    this._id = 0\n    this.events = ['touchstart', 'touchmove', 'touchend']\n\n    this._setCalibration(this._direction, bound)\n  }\n\n  // enum\n  static UP = 0\n  static LEFT = 1\n  static DOWN = 2\n  static RIGHT = 3\n\n  // public\n  /**\n   * Make sure event handlers are registered using `Drawer.on(...)` before\n   * calling `Drawer.activate()`\n   *\n   * @see {@link Drawer#on | Drawer.on}\n   * @returns {void}\n   */\n  activate() {\n    // get registered callbacks or set default\n    const startfn = this._callbacks ? this._callbacks[START] : def\n    const movefn = this._callbacks ? this._callbacks[MOVE] : def\n    const endfn = this._callbacks ? this._callbacks[END] : def\n\n    const startHandler = (touchEvent) => {\n      const activity = this._drawerManager.getRunningActivity()\n      if (this._calibration &&\n        (this._id && activity && activity.id === this._id ||\n          !activity && this._isCoolSignal(this._getSignal(touchEvent)))) {\n        this._calibration.start(touchEvent, startfn)\n      }\n    }\n\n    const moveHandler = (touchEvent) => {\n      const activity = this._drawerManager.getRunningActivity()\n      if (this._calibration && activity && activity.id === this._id) {\n        this._calibration.move(touchEvent, movefn)\n      }\n    }\n\n    const endHandler = (touchEvent) => {\n      const activity = this._drawerManager.getRunningActivity()\n      if (this._calibration && activity && activity.id === this._id) {\n        const state = {}\n        this._calibration.end(touchEvent, endfn, state) // state by Ref\n        this._processThresholdState(state)\n      }\n    }\n\n    this._register(startHandler, moveHandler, endHandler)\n    for (let i = 0; i < this.events.length; i++) {\n      this._target.addEventListener(this.events[i], this._handlers[i])\n    }\n  }\n\n  /**\n   * A method provided by the `Drawer interface` to deactivate the drawer\n   * @returns {void}\n   */\n  deactivate() {\n    for (let i = 0; i < this.events.length; i++) {\n      this._target.removeEventListener(this.events[i], this._handlers[i])\n    }\n    this._register(null)\n  }\n\n  /**\n   * A method used to register callbacks for the `Drawer class` `touchstart`,\n   * `touchmove` and `touchend` event handlers.\n   *\n   * Always call `Drawer.on(...)` before `Drawer.activate()`.\n   * As in:\n   * ```js\n   * const drawer = new Drawer()\n   * drawer.on(event, () => {\n   *  // TODO\n   * }).activate()\n   * ```\n   *\n   * To prevent modifying the context of `this`, the\n   * `drawer.setContext(...)` method should be invoked with an\n   * argument which is the `this` context of the\n   * `calling class` or alternatively using a wrapper function,\n   * then call the main handler method.\n   * ```js\n   * class UseDrawer {\n   *  // CODE\n   *  method() {\n   *    const drawer = new Drawer()\n   *    drawer.on(...)\n   *      .setContext(this)\n   *      .activate()\n   *  }\n   * }\n   * // OR\n   * drawer.on(event, (stateObj) => {\n   *  this.handler.call(this, stateObj)\n   * }).activate()\n   * ```\n   *\n   * Valid event types taken by this method are:\n   * - `start`\n   * - `move`\n   * - `end`\n   * - `threshold`\n   * - `belowthreshold`\n   * @param {string} event The event type as in the above list\n   * @param {Function} fn A function to call when this event triggers\n   * @returns {this} Returns an instance variable of the `Drawer` class\n   */\n  on(event, fn) {\n    this._registerCallbacks(event, fn)\n    return this\n  }\n\n  setContext(ctx) {\n    this._context = ctx\n    this._calibration.setContext(ctx)\n    return this\n  }\n\n  setServiceID(id) {\n    if (typeof id !== 'number') {\n      throw new TypeError('expected `id` to be a unique number')\n    }\n    this._id = id\n  }\n\n  toString() {\n    return CLASS_TYPE\n  }\n\n  _processThresholdState(state) {\n    if (Object.keys(state).length < 1) {\n      return\n    }\n    const {\n      state: stateArray,\n      stateObj,\n      service\n    } = state\n    const {\n      rect\n    } = stateObj\n    this._callbacks[stateArray[0]].call(this._context, service, stateArray, stateObj, rect)\n  }\n\n  _setCalibration(point, bound) {\n    switch (point) {\n      case SnappedDrawer.UP:\n        this._calibration = new Top(this._options, bound)\n        break\n      case SnappedDrawer.LEFT:\n        this._calibration = new Left(this._options, bound)\n        break\n      case SnappedDrawer.DOWN:\n        this._calibration = new Bottom(this._options, bound)\n        break\n      case SnappedDrawer.RIGHT:\n        this._calibration = new Right(this._options, bound)\n        break\n      default:\n        throw RangeError('Direction out of range')\n    }\n  }\n\n  _isCoolSignal(signal) {\n    const size = this._direction === SnappedDrawer.UP || this._direction === SnappedDrawer.DOWN ? WINDOW.screen.height : WINDOW.screen.width\n    switch (this._direction) {\n      case SnappedDrawer.UP:\n      case SnappedDrawer.LEFT:\n        return signal <= size / 2\n      case SnappedDrawer.RIGHT:\n      case SnappedDrawer.DOWN:\n        return signal > size / 2\n      default:\n        return false\n    }\n  }\n\n  _getSignal(emitter) {\n    switch (this._direction) {\n      case SnappedDrawer.UP:\n      case SnappedDrawer.DOWN:\n        return emitter.changedTouches[0].clientY\n      case SnappedDrawer.LEFT:\n      case SnappedDrawer.RIGHT:\n        return emitter.changedTouches[0].clientX\n      default:\n        return null\n    }\n  }\n\n  _registerCallbacks(event, fn) {\n    this._callbacks = this._callbacks || {\n      [START]: def,\n      [MOVE]: def,\n      [END]: def,\n      [THRESHOLD]: def,\n      [BELOW_THRESHOLD]: def\n    }\n    if (event in this._callbacks) {\n      this._callbacks[event] = fn\n    }\n  }\n\n  _register(...handlers) {\n    this._handlers = handlers\n  }\n}\n\nfunction def() {\n  return false\n}\n","import SnappedDrawer from './snapped-drawer'\n\nclass DrawerManagementStore {\n  constructor() {\n    this.activities = []\n  }\n\n  pushActivity(activity) {\n    this.activities.push(activity)\n  }\n\n  getRunningActivity() {\n    return this.activities.find((activity) => activity.isRunning())\n  }\n}\n\nexport default class Drawer {\n  static SnappedDrawer = SnappedDrawer\n  // enum\n  static UP = SnappedDrawer.UP\n  static LEFT = SnappedDrawer.LEFT\n  static DOWN = SnappedDrawer.DOWN\n  static RIGHT = SnappedDrawer.RIGHT\n  static DrawerManagementStore = new DrawerManagementStore()\n}\n","import {\n  css\n} from '../util'\n\nexport class Backdrop {\n  constructor(backdrop) {\n    this.backdrop = backdrop\n  }\n\n  show(time) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: 1,\n      transition: `opacity linear ${time / 1e3}s`\n    })\n  }\n\n  hide(time) {\n    css(this.backdrop, {\n      opacity: 0,\n      transition: `opacity linear ${time / 1e3}s`\n    })\n    window.setTimeout(() => {\n      css(this.backdrop, {\n        display: 'none'\n      })\n    }, time)\n  }\n\n  setOpacity(val) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: val,\n      transition: 'none'\n    })\n  }\n}\n","import {\n  Bound,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  WINDOW,\n  css,\n  getAttribute,\n  getData\n} from './../util'\nimport Drawer from './../drawer/'\n\nconst ZERO = 0\nconst KILO = 1e3\nconst MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD = 0.5\nconst MIN_POSITIVE_DISPLACEMENT = 10\nconst MIN_NEGATIVE_DISPLACEMENT = -MIN_POSITIVE_DISPLACEMENT\nconst TRANSITION_STYLE = 'linear'// 'cubic-bezier(0, 0.5, 0, 1)'\nconst EFFECT = 'transition'\nconst OVERFLOW = 'overflow'\nconst TRANS_TIMING = '0.1s'\nconst TRANS_TEMPLATE = `${TRANSITION_STYLE} ${TRANS_TIMING}`\nconst HIDDEN = 'hidden'\nconst SCROLL = 'scroll'\nconst AUTO = 'auto'\nconst HREF = 'href'\nconst HASH_ATTR = `data-${HREF}`\nconst START = 'start'\nconst MOVE = 'move'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = `below${THRESHOLD}`\nconst MIN_SPEED = 100\nconst MAX_SPEED = 500\n\nclass NavDrawer {\n  /**\n   * Creates a new NavDrawer object. Providing the Left and Right\n   * Drawer functionality.\n   * Support for Top and Bottom may come in the future\n   * @throws RangeError\n   * @param {{}} options An options Object to configure the Drawer with\n   * @param {{}} state An activity and service manager\n   */\n  constructor(options, state) {\n    this.options = options\n    this.state = state\n    this.element = this.options.ELEMENT\n    this._body = this.options.BODY\n    this._backdrop = this.options.BACKDROP\n    this.direction = this.options.DIRECTION\n\n    this._checkDirection()\n\n    this.directionString = DIRECTIONS[this.direction]\n    this.bound = this._bound\n\n    const o = {\n      ...options,\n      SIZE: this.elementSize,\n      TARGET: document\n    }\n    this.drawer = new Drawer.SnappedDrawer(o, this.bound, Drawer.DrawerManagementStore)\n    Drawer.DrawerManagementStore.pushActivity(this.state.activity)\n    this.transition = `${this.directionString} ${TRANS_TEMPLATE}`\n  }\n\n  activate() {\n    this.drawer.on(START, this._startHandler)\n      .on(MOVE, this._moveHandler)\n      .on(THRESHOLD, this._threshold)\n      .on(BELOW_THRESHOLD, this._belowThreshold)\n      .setContext(this)\n      .activate()\n    this.drawer.setServiceID(this.state.activity.id)\n    return 0\n  }\n\n  deactivate() {\n    this.drawer.deactivate()\n    return 0\n  }\n\n  get elementSize() {\n    const axis = this.direction\n    if (axis === Drawer.UP || axis === Drawer.DOWN) {\n      return this.element.offsetHeight\n    }\n    return this.element.offsetWidth\n  }\n\n  /**\n   * @returns {Bound} a boundary object: Bound\n   */\n  get _bound() {\n    const upperBound = this.elementSize\n    if (this.direction === Drawer.RIGHT) {\n      const lowerBound = WINDOW.screen.width - this.element.offsetLeft\n      return new Bound(lowerBound, upperBound)\n    }\n    const lowerBound = upperBound + this.element.offsetLeft\n    return new Bound(lowerBound, upperBound)\n  }\n\n  _startHandler(service, response) {\n    service.lock()\n    this.state.activity.run()\n    css(this.element, {\n      [this.directionString]: response.dimension,\n      boxShadow: NAV_BOX_SHADOW[this.directionString],\n      [EFFECT]: this.transition\n    })\n    this._body.style.overflow = HIDDEN\n  }\n\n  _moveHandler(service, response, rectangle) {\n    service.lock()\n    let curPos = this.direction === Drawer.UP || this.direction === Drawer.DOWN ? rectangle.coordsY.y2 : rectangle.coordsX.x2\n    css(this.element, {\n      [this.directionString]: response.dimension,\n      [EFFECT]: 'none',\n      [OVERFLOW]: HIDDEN\n    })\n    if (this.direction === Drawer.RIGHT) {\n      const WIN_SIZE = WINDOW.screen.width\n      curPos = WIN_SIZE - curPos\n      this._backdrop.setOpacity(curPos / this.elementSize)\n      return\n    }\n    this._backdrop.setOpacity(curPos / this.elementSize)\n  }\n\n  _threshold(service, state, stateObj, rect) {\n    service.lock()\n    const isOpen = state[1] === 'open'\n    const options = {\n      stateObj,\n      transition: `${this.directionString} ${TRANSITION_STYLE} ${this._calcSpeed(stateObj.TIMING, rect.width) / KILO}s`\n    }\n    if (isOpen) {\n      this._hide(options)\n    } else {\n      this._show(options)\n    }\n  }\n\n  _belowThreshold(service, state, stateObj, rect) {\n    service.lock()\n    const isClosed = state[1] !== 'open'\n    const overallEventTime = stateObj.TIMING\n    const MTTOB = MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD\n    const MPD = MIN_POSITIVE_DISPLACEMENT\n    const MND = MIN_NEGATIVE_DISPLACEMENT\n    const displacement = this.direction === Drawer.UP || this.direction === Drawer.DOWN\n      ? rect.displacementY : rect.displacementX\n    const options = {\n      stateObj,\n      transition: `${this.directionString} ${TRANSITION_STYLE} ${this._calcSpeed(stateObj.TIMING, rect.width) / KILO}s`\n    }\n    let LOGIC\n    if (this.direction === Drawer.LEFT && isClosed || this.direction === Drawer.RIGHT && !isClosed) {\n      LOGIC =  displacement > ZERO && displacement >= MPD && rect.greaterWidth\n    } else {\n      LOGIC = displacement < ZERO && displacement <= MND && rect.greaterWidth\n    }\n\n    if (overallEventTime / KILO < MTTOB) {\n      if (LOGIC) {\n        this._overrideBelowThresh(!isClosed, options)\n      } else {\n        if (isClosed) {\n          // Close it. Can't override\n          this._hide(options)\n          return\n        }\n        // Open it. Can't override. Not enough displacement\n        this._show(options)\n      }\n    } else {\n      if (isClosed) {\n        // close it\n        this._hide(options)\n        return\n      }\n      // open it\n      this._show(options)\n    }\n  }\n\n  _show(options) {\n    this._showPrep(options)\n    this.element.style[this.directionString] = options.stateObj.dimension\n  }\n\n  _hide(options) {\n    this._hidePrep(options)\n    this.element.style[this.directionString] = options.stateObj.dimension\n  }\n\n  _overrideBelowThresh(isOpen, options) {\n    if (isOpen) {\n      this._hidePrep(options)\n      this.element.style[this.directionString] = options.stateObj.oppositeDimension\n    } else {\n      this._showPrep(options)\n      this.element.style[this.directionString] = options.stateObj.oppositeDimension\n    }\n  }\n\n  _hidePrep(options) {\n    this.state.activity.derun()\n    this._body.style.overflow = SCROLL\n    this._backdrop.hide(this.options.TRANSITION)\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n    if (!this.bound.lower) {\n      this.element.style.boxShadow = 'none'\n    }\n    this._setState('close')\n    // callback for when nav is hidden\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.hide)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.hide)()\n    }\n  }\n\n  _showPrep(options) {\n    const buttonHash = getAttribute(this.options.INIT_ELEM, HREF) || getData(this.options.INIT_ELEM, HASH_ATTR)\n    if (buttonHash) {\n      WINDOW.location.hash = buttonHash\n    }\n    this._body.style.overflow = HIDDEN\n    this._backdrop.show(this.options.TRANSITION)\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n    this._setState('open')\n    // callback for when nav is shown\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.show)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.show)()\n    }\n  }\n\n  _calcSpeed(time, distance) {\n    const distanceRemain = this.elementSize - distance\n    if (~Math.sign(distanceRemain)) {\n      let newTime = distanceRemain * time / distance\n      if (newTime > MAX_SPEED) {\n        newTime = MAX_SPEED\n      } else if (newTime < MIN_SPEED) {\n        newTime = MIN_SPEED\n      }\n      return newTime\n    }\n    return 0\n  }\n\n  _checkDirection() {\n    if (this.direction !== Drawer.LEFT && this.direction !== Drawer.RIGHT) {\n      throw new RangeError('Direction out of range')\n    }\n  }\n\n  _setState(mode) {\n    switch (mode) {\n      case 'open':\n        this.state.activity.run()\n        break\n      case 'close':\n        this.state.activity.derun()\n        break\n      default:\n        throw new Error('this should never happen')\n    }\n  }\n}\n\nexport default NavDrawer\n","import {\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  WINDOW,\n  ZERO,\n  css,\n  getAttribute,\n  getData\n} from './../util'\n\nconst TRANSITION_STYLE = 'cubic-bezier(0, 0.5, 0, 1)'\nconst EFFECT = 'transition'\nconst TRANS_END = 'transitionend'\n\nclass NavService {\n  constructor(options, state) {\n    this.options = options\n    this.state = state\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.body = options.BODY\n    this.backdrop = options.BACKDROP\n    this.backdropElement = this.backdrop.backdrop\n    this.event = 'click'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offsetWidth\n    this.transTime = options.TRANSITION / 1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.transTime}s`\n    // state of the nav, whether open or close\n    this.alive = false\n    // diff. btw. event triggered from Drawer class and on here\n    /**\n     * @private\n     */\n    this._closeInvoked = false\n    /**\n     * @readonly\n     * @private\n     */\n    this._initialState = NavService.css(this.nav, this.direction)\n    this._handlers = null\n  }\n\n  activate() {\n    const ClickHandler = (mouseEvent) => {\n      this.handler(mouseEvent)\n    }\n    const BackdropHandler = () => {\n      this._close()\n    }\n    const TransitionHandler = () => {\n      if (!this.alive && this._closeInvoked) {\n        this._cleanShadow()\n        this._closeInvoked = false\n      }\n    }\n    this._register({\n      ClickHandler,\n      BackdropHandler,\n      TransitionHandler\n    })\n\n    this.button.addEventListener(this.event, this._handlers.ClickHandler)\n    this.backdropElement.addEventListener(this.event, this._handlers.BackdropHandler)\n    if (this._initialState === `-${this._width('px')}`) {\n      this.nav.addEventListener(TRANS_END, this._handlers.TransitionHandler)\n    }\n    return 0\n  }\n\n  deactivate() {\n    throw new ReferenceError('cannot deactivate a default service. This service must be kept running')\n  }\n\n  forceDeactivate() {\n    this.button.removeEventListener(this.event, this._handlers.ClickHandler)\n    this.backdropElement.removeEventListener(this.event, this._handlers.BackdropHandler)\n    if (this._initialState === `-${this._width('px')}`) {\n      this.nav.removeEventListener(TRANS_END, this._handlers.TransitionHandler)\n    }\n    this._register(null)\n  }\n\n  handler(mouseEvent) {\n    mouseEvent.preventDefault()\n    const state = NavService._toNum(NavService.css(this.nav, this.direction))\n    if (state < ZERO) {\n      const buttonHash = getAttribute(this.button, 'href') || getData(this.button, 'data-href')\n      if (buttonHash) {\n        WINDOW.location.hash = buttonHash\n      }\n      this._open()\n    } else {\n      this._close()\n    }\n  }\n\n  static css(el, property, style) {\n    return css(el, property, style)\n  }\n\n  static _toNum(val) {\n    val = val.replace(/[^\\d]*$/, '')\n    return /\\.(?=\\d)/.test(val) ? Math.round(parseFloat(val)) : parseInt(val, 10)\n  }\n\n  _width(unit) {\n    unit = unit || ''\n    return this.width + unit\n  }\n\n  _register(handler) {\n    this._handlers = handler\n  }\n\n  _open() {\n    const style = {\n      [this.direction]: ZERO,\n      [EFFECT]: this.transition,\n      boxShadow: NAV_BOX_SHADOW[this.direction]\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.show(this.options.TRANSITION)\n    NavService.css(this.body, 'overflow', 'hidden')\n    // callback for when nav is shown\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.show)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.show)()\n    }\n    this.alive = true\n    this.state.activity.run()\n  }\n\n  _close() {\n    const style = {\n      [this.direction]: this._initialState,\n      [EFFECT]: this.transition\n      // don't clean shadow here\n      // it's transitioning\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.hide(this.options.TRANSITION)\n    NavService.css(this.body, 'overflow', 'initial')\n    // callback for when nav is hidden\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.hide)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.hide)()\n    }\n    this.alive = false\n    this._closeInvoked = true\n    this.state.activity.derun()\n  }\n\n  _cleanShadow() {\n    NavService.css(this.nav, 'boxShadow', 'none')\n  }\n}\n\nexport default NavService\n","import {\n  WINDOW,\n  getAttribute,\n  getData\n} from '../util'\n\nclass PopService {\n  constructor(parentService, options, state) {\n    this.options = options\n    this.state = state\n    this.parentService = parentService\n    this.button = options.INIT_ELEM\n    this.event = 'hashchange'\n    this.handler = null\n  }\n\n  activate() {\n    const handler = (hashChangeEvent) => {\n      this._hashchange(hashChangeEvent)\n    }\n    this._register(handler)\n    WINDOW.addEventListener(this.event, this.handler, true)\n    return 0\n  }\n\n  deactivate() {\n    WINDOW.removeEventListener(this.event, this.handler, true)\n    this._register(null)\n    return 0\n  }\n\n  /**\n   * @param {HashChangeEvent} hashChangeEvent Event object\n   * @returns {void}\n   */\n  _hashchange(hashChangeEvent) {\n    const oldHash = PopService._getHash(hashChangeEvent.oldURL)\n    if (oldHash === (getAttribute(this.button, 'href') ||\n    getData(this.button, 'data-href')) &&\n    this.state.activity.isRunning()) {\n      hashChangeEvent.stopImmediatePropagation()\n      this.parentService._close()\n    }\n  }\n\n  _register(handler) {\n    this.handler = handler\n  }\n\n  static _getHash(uri) {\n    let hash = uri\n    const indexOfHash = hash.lastIndexOf('#')\n    hash = indexOfHash !== -1 ? hash.slice(indexOfHash).replace(/(?:[^\\w\\d-]+)$/) : null\n    return hash\n  }\n}\n\nexport default PopService\n","const EventInterface = {\n  SHOW: 'show',\n  HIDE: 'hide'\n}\n\nexport default class State {\n  constructor(activity) {\n    this.activity = activity // activity manager\n    this._stateEventRegistry = {\n      [EventInterface.SHOW]: null,\n      [EventInterface.HIDE]: null\n    }\n  }\n\n  set onshow(val) {\n    if (typeof val !== 'function') {\n      throw new TypeError('value is not a callable type')\n    }\n    this._stateEventRegistry.show = val\n    return true\n  }\n\n  set onhide(val) {\n    if (typeof val !== 'function') {\n      throw new TypeError('value is not a callable type')\n    }\n    this._stateEventRegistry.hide = val\n    return true\n  }\n\n  getStateEventHandler(type) {\n    if (Object.values(EventInterface).indexOf(type) !== -1) {\n      return this._stateEventRegistry[type]\n    }\n    throw new Error('unknown event type')\n  }\n\n  isRegisteredEvent(type) {\n    return typeof this._stateEventRegistry[type] === 'function'\n  }\n}\n","import {\n  $,\n  ActivityManager,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  WINDOW,\n  css,\n  getData\n} from './../util'\nimport {\n  Backdrop\n} from './backdrop'\nimport NavDrawer from './drawer'\nimport NavService from './navservice'\nimport PopService from './popservice'\nimport State from './state'\n\nconst BACKDROP = 'backdrop'\nconst MEDIA_DRAW = 'data-max-width'\nconst CLASS_TYPE = '[object NavCard]'\nconst NAME = 'Nav'\nconst NAV = WINDOW[NAME] || null\n\nclass NavCard {\n  constructor(src, dest) {\n    /**\n     * Covert Backdrop\n     * ----------------\n     * Just incase `options.backdrop = false`\n     * prevents multiple `if` statements\n     * so we don't have to check whether\n     * backdrop is enabled anytime we want to access it.\n     *\n     * Insert into DOM only:\n     * when `options.backdrop = true`\n     * `options.backdropClass` is undefined\n     */\n    this.backdrop = document.createElement('div')\n    this.backdrop.className = BACKDROP\n    css(this.backdrop, {\n      background: 'rgba(0,0,0,.4)',\n      height: '100%',\n      width: '100%',\n      display: 'none',\n      position: 'fixed',\n      top: 0,\n      left: 0\n    })\n    this.src = src\n    this.dest = dest\n    this.body = document.body\n    this.Drawer = null\n    this.SheetService = null\n    this.PopService = null\n    this._Activity = new ActivityManager(this)\n    this.State = new State(this._Activity)\n  }\n\n  static defaultConfig = {\n    transition: 500,\n    direction: -1,\n    useBackdrop: false,\n    backdrop: null,\n    dest: null,\n    scrollableContainer: null,\n    maxStartArea: 25,\n    threshold: 1 / 2,\n    unit: 'px',\n    CustomDrawer: null\n  }\n\n  static SERVICES = {\n    Default: 0x20,\n    Drawer: 0x40,\n    Pop: 0x80\n  }\n\n  setup(options) {\n    if (!this.src) {\n      throw new TypeError(\n        `expected ${NAME} to be constructed with at least 'src' argument:\n        expected 'src' to be selector string or HTMLElement.\n          constructor(src: string | HTMLElement, dest?: string | HTMLElement)`\n      )\n    }\n\n    const opts = typeof Object.assign === 'function' ? Object.assign({}, NavCard.defaultConfig) : {\n      ...NavCard.defaultConfig\n    }\n\n    if (options && typeof options === 'object') {\n      for (const prop of Object.keys(options)) {\n        if (Object.prototype.hasOwnProperty.call(opts, prop)) {\n          opts[prop] = options[prop]\n        } else {\n          continue\n        }\n      }\n    }\n\n    this.dest = this.dest ? this.dest : opts.dest\n\n    const srcEl = this.src instanceof HTMLElement ? this.src : $(this.src)\n    const destEl = this.dest instanceof HTMLElement ? this.dest : $(this.dest)\n    let maxWidth  = getData(destEl, MEDIA_DRAW)\n\n    if (opts.useBackdrop) {\n      const backdropclass = opts.backdrop || false\n      // if `opts.useBackdrop` and no `backdrop` given\n      // append a custom backdrop\n      if (!backdropclass) {\n        destEl.insertAdjacentElement('beforeBegin', this.backdrop)\n      } else if (typeof backdropclass === 'string') {\n        // check if backdropclass is normal string or css class selector\n        const backdrop =  /^\\./.test(backdropclass) ? backdropclass : `.${backdropclass}`\n        this.backdrop = $(backdrop)\n      } else if (backdropclass instanceof HTMLElement) {\n        this.backdrop = backdropclass\n      } else {\n        throw new TypeError('expected \\'options.backdrop\\' to be a selector string or HTMLElement.')\n      }\n    }\n\n    maxWidth = /px$/.test(maxWidth) ? maxWidth : `${maxWidth}px`\n    const defaultOptions = {\n      ELEMENT: destEl,\n      INIT_ELEM: srcEl,\n      BACKDROP: new Backdrop(this.backdrop),\n      BODY: this.body,\n      TRANSITION: opts.transition,\n      DIRECTION: DIRECTIONS[opts.direction],\n      unit: opts.unit\n    }\n    const drawerOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: maxWidth,\n      DIRECTION: opts.direction,\n      maxStartArea: opts.maxStartArea,\n      threshold: opts.threshold,\n      scrollableContainer: opts.scrollableContainer,\n      CustomDrawer: opts.CustomDrawer\n    }\n    const hashOptions = {\n      INIT_ELEM: defaultOptions.INIT_ELEM\n    }\n\n    return new NavMountWorker(this, {\n      defaultOptions,\n      drawerOptions,\n      hashOptions\n    })\n  }\n\n  terminate(service) {\n    service |= 0\n    if (service & NavCard.SERVICES.Default && this.SheetService instanceof NavService) {\n      this.SheetService.deactivate()\n    }\n    if (service & NavCard.SERVICES.Drawer && this.Drawer instanceof NavDrawer) {\n      this.Drawer.deactivate()\n    }\n    if (service & NavCard.SERVICES.Hash && this.PopService instanceof PopService) {\n      this.PopService.deactivate()\n    }\n    if (!service) {\n      throw new Error('a service id is required')\n    }\n  }\n\n  toString() {\n    return CLASS_TYPE\n  }\n\n  static namespace(name) {\n    WINDOW[name] = WINDOW[name] || {}\n    WINDOW[name][NAME] = NavCard\n    WINDOW[NAME] = NAV\n  }\n\n  _drawerAPI(options) {\n    const {\n      CustomDrawer\n    } = options\n    this.Drawer = CustomDrawer && typeof CustomDrawer === 'object' ? new CustomDrawer(options, this.State) : new NavDrawer(options, this.State)\n    return {\n      activate: () => this.Drawer.activate(),\n      deactivate: () => this.Drawer.deactivate()\n    }\n  }\n\n  _hashAPI(options) {\n    this.PopService = new PopService(this.SheetService, options, this.State)\n    return {\n      activate: () => this.PopService.activate(),\n      deactivate: () => this.PopService.deactivate()\n    }\n  }\n\n  _defaultAPI(options) {\n    this.SheetService = new NavService(options, this.State)\n    return {\n      activate: () => this.SheetService.activate(),\n      deactivate: () => this.SheetService.deactivate()\n    }\n  }\n}\n\nclass NavMountWorker {\n  constructor(borrowedContext, options) {\n    this.$this = borrowedContext\n    this.options = options\n  }\n\n  mount() {\n    const DEFAULT_ACTIVE = !this.$this._defaultAPI(this.options.defaultOptions).activate()\n    const DRAWER_ACTIVE = !this.$this._drawerAPI(this.options.drawerOptions).activate()\n    const HASH_ACTIVE = !this.$this._hashAPI(this.options.hashOptions).activate()\n    return new Promise((resolve, reject) => {\n      if (!(DEFAULT_ACTIVE && DRAWER_ACTIVE && HASH_ACTIVE)) {\n        reject(new Error('one or more services could not activate'))\n        return\n      }\n      resolve(new NavStateEvent(this.$this, this.$this.State))\n    })\n  }\n\n  unmount() {\n    this.$this.SheetService.forceDeactivate()\n    this.$this.Drawer.deactivate()\n    this.$this.PopService.deactivate()\n  }\n\n  toString() {\n    return '[object NavMountWorker]'\n  }\n}\n\nclass NavStateEvent {\n  constructor($this, state) {\n    this.events = [NAVSTATE_EVENTS.show, NAVSTATE_EVENTS.hide]\n    this.$this = $this\n    this._State = state\n  }\n\n  on(event, handle = () => false) {\n    if (!(this.events.indexOf(event) + 1)) {\n      throw new Error(`unknown event '${event}'`)\n    }\n    this._State[`on${event}`] = handle.bind(this.$this)\n  }\n\n  off(event) {\n    if (!(this.events.indexOf(event) + 1)) {\n      throw new Error(`unknown event '${event}'`)\n    }\n    this._State[`on${event}`] = null\n  }\n}\n\nexport default NavCard\n","import {\n  Bound,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  WINDOW,\n  css,\n  getAttribute,\n  getData,\n  resolveThreshold\n} from './../util'\nimport Drawer from './../drawer/'\n\nconst ZERO = 0\nconst KILO = 1e3\nconst MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD = 0.1\nconst MIN_POSITIVE_DISPLACEMENT = 15\nconst MIN_NEGATIVE_DISPLACEMENT = -MIN_POSITIVE_DISPLACEMENT\nconst TRANSITION_STYLE = 'linear'\nconst EFFECT = 'transition'\nconst OVERFLOW = 'overflow'\nconst TRANS_TIMING = '0.1s'\nconst TRANS_TEMPLATE = `${TRANSITION_STYLE} ${TRANS_TIMING}`\nconst HIDDEN = 'hidden'\nconst SCROLL = 'scroll'\nconst AUTO = 'auto'\nconst HREF = 'href'\nconst HASH_ATTR = `data-${HREF}`\nconst START = 'start'\nconst MOVE = 'move'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = `below${THRESHOLD}`\nconst MAX_TIME = KILO\nconst MAX_SPEED = 500\nconst MarkIndex = {\n  high: 'high',\n  mid: 'mid',\n  low: 'low'\n}\n\nclass SheetDrawer {\n  /**\n   * Creates a new SheetDrawer object. Providing the Top and Bottom\n   * Drawer functionality\n   * @throws RangeError\n   * @param {{}} options An options Object to configure the Drawer with\n   * @param {State} state An activity and service manager\n   */\n  constructor(options, state) {\n    this.options = options\n    this.state = state\n    this.element = this.options.ELEMENT\n    this._body = this.options.BODY\n    this.backdrop = this.options.BACKDROP\n    this.direction = this.options.DIRECTION\n    this._scCheck = this.options.scrollableContainer\n    this._sc = this._scCheck || document.createElement('div')\n\n    this._checkDirection()\n\n    this.directionString = DIRECTIONS[this.direction]\n    this.bound = this._bound\n    this._oldbound = null\n\n    const o = {\n      ...options,\n      SIZE: this.elementSize,\n      TARGET: document\n    }\n    this.drawer = new Drawer.SnappedDrawer(o, this.bound, Drawer.DrawerManagementStore)\n    Drawer.DrawerManagementStore.pushActivity(this.state.activity)\n    this.transition = `${this.directionString} ${TRANS_TEMPLATE}`\n    this.marks = {\n      [MarkIndex.high]: ZERO,\n      [MarkIndex.mid]: this.bound.slack * resolveThreshold(options.threshold),\n      [MarkIndex.low]: document.documentElement.clientHeight - this.element.offsetTop - this.elementSize\n    }\n    this._Control = {\n      touchMoveExited: false,\n      lastMetredPos: 0\n    }\n  }\n\n  activate() {\n    this.drawer.on(START, this._startHandler)\n      .on(MOVE, this._moveHandler)\n      .on(THRESHOLD, this._threshold)\n      .on(BELOW_THRESHOLD, this._belowThreshold)\n      .setContext(this)\n      .activate()\n    this.drawer.setServiceID(this.state.activity.id)\n    return 0\n  }\n\n  deactivate() {\n    this.drawer.deactivate()\n    return 0\n  }\n\n  get elementSize() {\n    return this.element.offsetHeight\n  }\n\n  get _bound() {\n    const upperBound = this.elementSize\n    if (this.direction === Drawer.DOWN) {\n      // get `element.offsetBottom`\n      const lowerBound = WINDOW.screen.height - this.element.offsetTop\n      return new Bound(lowerBound, upperBound)\n    }\n    const lowerBound = upperBound + this.element.offsetTop\n    return new Bound(lowerBound, upperBound)\n  }\n\n  _startHandler(service, response) {\n    service.lock()\n    this.state.activity.run()\n    css(this.element, {\n      [this.directionString]: !this.bound.lower ? response.dimension : null,\n      boxShadow: NAV_BOX_SHADOW[this.directionString],\n      [EFFECT]: this.transition\n    })\n    this._body.style.overflow = HIDDEN\n  }\n\n  _moveHandler(service, response, rectangle) {\n    service.lock()\n    const WIN_SIZE = WINDOW.screen.height\n    let curPos = rectangle.coordsY.y2\n    if (response.posOnStart === this.marks[MarkIndex.high] && (this._scCheck && this._sc.scrollTop !== ZERO || !this._scCheck)) {\n      this._Control.touchMoveExited = true\n      this._Control.lastMetredPos = curPos\n      return\n    }\n    this._Control.touchMoveExited = false\n    const customDimension = this.direction === Drawer.DOWN ? this._Control.lastMetredPos - curPos + response.posOnStart : -this._Control.lastMetredPos + curPos + response.posOnStart\n    css(this.element, {\n      [this.directionString]: response.dimension,\n      [EFFECT]: 'none',\n      [OVERFLOW]: HIDDEN\n    })\n    css(this._sc, OVERFLOW, HIDDEN)\n\n    if (response.posOnStart === this.marks[MarkIndex.high] && response.closing) {\n      css(this.element, this.directionString, SheetDrawer._toUnit(customDimension, this.options.unit))\n    }\n    if (Math.round(response.posOnStart) === Math.round(this.marks[MarkIndex.mid]) && response.opening && this.direction === Drawer.DOWN\n    ) {\n      this._sc.scrollTo(0, -rectangle.displacementY)\n    }\n    if (this.direction === Drawer.DOWN) {\n      curPos = WIN_SIZE - curPos\n    }\n    this.backdrop.setOpacity(curPos / this.elementSize)\n  }\n\n  _threshold(service, state, stateObj) {\n    service.lock()\n    const isOpen = state[1] === 'open'\n    const options = {\n      stateObj,\n      transition: `${this.directionString} ease ${this._calcSpeed(stateObj.TIMING) / KILO}s`\n    }\n    if (isOpen) {\n      this._hide(options)\n    } else {\n      this._show(options)\n    }\n  }\n\n  _belowThreshold(service, state, stateObj, rect) {\n    service.lock()\n    const isClosed = state[1] !== 'open'\n    const overallEventTime = stateObj.TIMING\n    const MTTOB = MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD\n    const MPD = MIN_POSITIVE_DISPLACEMENT\n    const MND = MIN_NEGATIVE_DISPLACEMENT\n    const displacement = rect.displacementY\n    const options = {\n      rect,\n      stateObj,\n      transition: `${this.directionString} ease ${this._calcSpeed(stateObj.TIMING) / KILO}s`\n    }\n    const {\n      position\n    } = stateObj\n    const minForwardVelocity = MPD / MTTOB // pixel/second: pps\n    const minBackwardVelocity = MND / MTTOB // pps\n    const velocity = displacement / (overallEventTime / KILO)\n    const LOGIC = this.direction === Drawer.UP && isClosed ||\n    this.direction === Drawer.DOWN && !isClosed\n      ? velocity > minForwardVelocity && rect.greaterHeight\n      : velocity < minBackwardVelocity && rect.greaterHeight\n\n    if (LOGIC) {\n      this._overrideBelowThresh(!isClosed, options)\n      return\n    }\n    if (isClosed) {\n      this.element.style[this.directionString] = SheetDrawer._toUnit(\n        position >= this.marks[MarkIndex.mid] ? (this._halfHidePrep(options), this.marks[MarkIndex.mid]) : (this._hidePrep(options), this.marks[MarkIndex.low]),\n        this.options.unit\n      )\n    } else {\n      this._showPrep(options)\n      this.element.style[this.directionString] = SheetDrawer._toUnit(\n        position >= this.marks[MarkIndex.mid] ? this.marks[MarkIndex.mid] : this.marks[MarkIndex.high],\n        this.options.unit\n      )\n    }\n  }\n\n  _show(options) {\n    if (this._Control.touchMoveExited) {\n      this._Control.touchMoveExited = false\n      return\n    }\n    css(this._sc, OVERFLOW, SCROLL)\n    this._showPrep(options)\n    this.element.style[this.directionString] = SheetDrawer._toUnit(this.marks[MarkIndex.high], this.options.unit)\n  }\n\n  _hide(options) {\n    if (this._Control.touchMoveExited) {\n      this._Control.touchMoveExited = false\n      return\n    }\n    this._hidePrep(options)\n    this.element.style[this.directionString] = SheetDrawer._toUnit(this.marks[MarkIndex.low], this.options.unit)\n  }\n\n  _overrideBelowThresh(isOpen, options) {\n    const {\n      oppositeDimension,\n      position\n    } = options.stateObj\n    const isDownDrawer = this.direction === Drawer.DOWN\n    if (isOpen) {\n      if (this._Control.touchMoveExited) {\n        this._Control.touchMoveExited = false\n        return\n      }\n      this.element.style[this.directionString] = SheetDrawer._toUnit(\n        position >= this.marks[MarkIndex.mid] ? this.marks[MarkIndex.mid] : this.marks[MarkIndex.low],\n        this.options.unit\n      )\n      this._halfHidePrep(options)\n    } else {\n      const halfDimension = SheetDrawer._toUnit(this.marks[MarkIndex.mid], this.options.unit)\n      this._showPrep(options)\n      this.element.style[this.directionString] = isDownDrawer ? halfDimension : oppositeDimension\n    }\n  }\n\n  _halfHidePrep(options) {\n    this._body.style.overflow = HIDDEN\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n  }\n\n  _hidePrep(options) {\n    this._body.style.overflow = SCROLL\n    this.backdrop.hide(this.options.TRANSITION)\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n    if (!this.bound.lower) {\n      this.element.style.boxShadow = 'none'\n    }\n    this._setState('close')\n    // callback for when nav is hidden\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.hide)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.hide)()\n    }\n  }\n\n  _showPrep(options) {\n    const buttonHash = getAttribute(this.options.INIT_ELEM, HREF) || getData(this.options.INIT_ELEM, HASH_ATTR)\n    if (buttonHash) {\n      WINDOW.location.hash = buttonHash\n    }\n    this._body.style.overflow = options.bodyOverflow || HIDDEN\n    this.backdrop.show(this.options.TRANSITION)\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n    this._setState('open')\n    // callback for when nav is shown\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.show)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.show)()\n    }\n  }\n\n  _calcSpeed(time) {\n    if (time >= MAX_TIME) {\n      return MAX_SPEED\n    }\n    const percent = 100\n    const percentage = time / MAX_TIME * percent\n    return percentage / percent * MAX_SPEED\n  }\n\n  _checkDirection() {\n    if (this.direction !== Drawer.UP && this.direction !== Drawer.DOWN) {\n      throw new RangeError('Direction out of range')\n    }\n  }\n\n  _setState(mode) {\n    switch (mode) {\n      case 'open':\n        this.state.activity.run()\n        break\n      case 'close':\n        this.state.activity.derun()\n        break\n      default:\n        throw new Error('this should never happen')\n    }\n  }\n\n  _updateBound() {\n    const bound = this._bound\n    this._oldbound = new Bound(this.bound.lower, this.bound.upper)\n    this.bound.lower = bound.lower\n  }\n\n  static _toUnit(value, unit = 'px') {\n    return value + unit\n  }\n}\n\nexport default SheetDrawer\n","import {\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  WINDOW,\n  ZERO,\n  css,\n  getAttribute,\n  getData\n} from '../util'\n\nconst TRANSITION_STYLE = 'ease'\nconst EFFECT = 'transition'\nconst TRANS_END = 'transitionend'\nconst SCROLL = 'scroll'\nconst HIDDEN = 'hidden'\n\n/**\n * This Service is pretty much similar to NavService\n * @see {@link ../nav/navservice.js}\n * \"Extend the NavService class\"; you may think, but\n * things will get a lot messy.\n * Some little bit of copy-and-paste and tweaking was done.\n */\nclass SheetService {\n  constructor(options, state) {\n    this.options = options\n    this.state = state\n    this.sheet = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.backdropElement = this.backdrop.backdrop\n    this._body = options.BODY\n    this.event = 'click'\n    this.direction = options.DIRECTION\n    this.height = this.sheet.offsetHeight\n    this.transTime = options.TRANSITION / 1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.transTime}s`\n    // state of the nav, whether open or close\n    this.alive = false\n    // diff. btw. event triggered from Drawer class and on here\n    /**\n     * @private\n     */\n    this._closeInvoked = false\n    /**\n     * @readonly\n     * @private\n     */\n    this._initialState = SheetService.css(this.sheet, this.direction)\n    this._handlers = null\n  }\n\n  activate() {\n    const ClickHandler = (mouseEvent) => {\n      this.handler(mouseEvent)\n    }\n    const BackdropHandler = () => {\n      this._close()\n    }\n    const TransitionHandler = () => {\n      if (!this.alive && this._closeInvoked) {\n        this._cleanShadow()\n        this._closeInvoked = false\n      }\n    }\n    this._register({\n      ClickHandler,\n      BackdropHandler,\n      TransitionHandler\n    })\n\n    this.button.addEventListener(this.event, this._handlers.ClickHandler)\n    this.backdropElement.addEventListener(this.event, this._handlers.BackdropHandler)\n    if (this._initialState === `-${this._height('px')}`) {\n      this.sheet.addEventListener(TRANS_END, this._handlers.TransitionHandler)\n    }\n    return 0\n  }\n\n  deactivate() {\n    throw new ReferenceError('cannot deactivate a default service. This service must be kept running')\n  }\n\n  forceDeactivate() {\n    this.button.removeEventListener(this.event, this._handlers.ClickHandler)\n    this.backdropElement.removeEventListener(this.event, this._handlers.BackdropHandler)\n    if (this._initialState === `-${this._height('px')}`) {\n      this.sheet.removeEventListener(TRANS_END, this._handlers.TransitionHandler)\n    }\n    this._register(null)\n  }\n\n  handler(mouseEvent) {\n    mouseEvent.preventDefault()\n    const state = SheetService._toNum(SheetService.css(this.sheet, this.direction))\n    if (state < ZERO) {\n      const buttonHash = getAttribute(this.button, 'href') || getData(this.button, 'data-href')\n      if (buttonHash) {\n        WINDOW.location.hash = buttonHash\n      }\n      this._open()\n    } else {\n      this._close()\n    }\n  }\n\n  static css(el, property, style) {\n    return css(el, property, style)\n  }\n\n  static _toNum(val) {\n    val = val.replace(/[^\\d]*$/, '')\n    return /\\.(?=\\d)/.test(val) ? Math.round(parseFloat(val)) : parseInt(val, 10)\n  }\n\n  _height(unit) {\n    unit = unit || ''\n    return this.height + unit\n  }\n\n  _register(handler) {\n    this._handlers = handler\n  }\n\n  _open() {\n    const style = {\n      [this.direction]: ZERO,\n      [EFFECT]: this.transition,\n      boxShadow: NAV_BOX_SHADOW[this.direction]\n    }\n    SheetService.css(this.sheet, style)\n    this.backdrop.show(this.options.TRANSITION)\n    this._body.style.overflow = HIDDEN\n    // callback for when nav is shown\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.show)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.show)()\n    }\n    this.alive = true\n    this.state.activity.run()\n  }\n\n  _close() {\n    const style = {\n      [this.direction]: this._initialState,\n      [EFFECT]: this.transition\n      // don't clean shadow here\n      // it's transitioning\n    }\n    SheetService.css(this.sheet, style)\n    this.backdrop.hide(this.options.TRANSITION)\n    this._body.style.overflow = SCROLL\n    // callback for when nav is hidden\n    if (this.state.isRegisteredEvent(NAVSTATE_EVENTS.hide)) {\n      this.state.getStateEventHandler(NAVSTATE_EVENTS.hide)()\n    }\n    this.alive = false\n    this._closeInvoked = true\n    this.state.activity.derun()\n  }\n\n  _cleanShadow() {\n    SheetService.css(this.sheet, 'boxShadow', 'none')\n  }\n}\n\nexport default SheetService\n","import {\n  NAVSTATE_EVENTS, WINDOW\n} from './../util'\nimport NavCard from '../nav/index'\nimport SheetDrawer from './drawer'\nimport SheetService from './sheetservice'\n\nconst CLASS_TYPE = '[object Sheet]'\nconst NAME = 'Sheet'\nconst SHEET = WINDOW[NAME] || null\n\n\nclass Sheet extends NavCard {\n  constructor(src, dest) {\n    super(src, dest)\n    this.SheetService = null\n    Sheet.defaultConfig.threshold = 2 / 3\n  }\n\n  /**\n   * @override\n   */\n  setup(options) {\n    const navMountWorker = super.setup(options)\n    return new SheetMountWorker(this, navMountWorker.options)\n  }\n\n  /**\n   * @override\n   */\n  terminate(service) {\n    service |= 0\n    if (service & NavCard.SERVICES.Default && this.SheetService instanceof SheetService) {\n      this.SheetService.deactivate()\n    }\n    if (service & NavCard.SERVICES.Drawer && this.Drawer instanceof SheetDrawer) {\n      this.Drawer.deactivate()\n    }\n    if (service & NavCard.SERVICES.Pop && this.PopService) {\n      /**\n       * we can't strictly determine that `this.PopService`\n       * is an instance of PopService class.\n       * This is an edge case as there is no access to that\n       * type.\n       */\n      this.PopService.deactivate() // or super.terminate(...)\n    }\n    if (!service) {\n      throw new Error('a service id is required')\n    }\n  }\n\n  /**\n   * @override\n   */\n  toString() {\n    return CLASS_TYPE\n  }\n\n  /**\n   * @override\n   */\n  static namespace(name) {\n    WINDOW[name] = WINDOW[name] || {}\n    WINDOW[name][NAME] = Sheet\n    WINDOW[NAME] = SHEET\n  }\n\n  /**\n   * @override\n   */\n  _drawerAPI(options) {\n    const {\n      CustomDrawer\n    } = options\n    this.Drawer = CustomDrawer && typeof CustomDrawer === 'object' ? new CustomDrawer(options, this.State) : new SheetDrawer(options, this.State)\n    return {\n      activate: () => this.Drawer.activate(),\n      deactivate: () => this.Drawer.deactivate()\n    }\n  }\n\n  /**\n   * @override\n   */\n  _hashAPI(options) {\n    const Interface = super._hashAPI(options)\n    this.PopService.parentService = this.SheetService\n    return Interface\n  }\n\n  /**\n   * @override\n   */\n  _defaultAPI(options) {\n    this.SheetService = new SheetService(options, this.State)\n    return {\n      activate: () => this.SheetService.activate(),\n      deactivate: () => this.SheetService.deactivate()\n    }\n  }\n}\n\nclass SheetMountWorker {\n  constructor(borrowedContext, options) {\n    this.$this = borrowedContext\n    this.options = options\n  }\n\n  mount() {\n    const DEFAULT_ACTIVE = !this.$this._defaultAPI(this.options.defaultOptions).activate()\n    const DRAWER_ACTIVE = !this.$this._drawerAPI(this.options.drawerOptions).activate()\n    const HASH_ACTIVE = !this.$this._hashAPI(this.options.hashOptions).activate()\n    return new Promise((resolve, reject) => {\n      if (!(DEFAULT_ACTIVE && DRAWER_ACTIVE && HASH_ACTIVE)) {\n        reject(new Error('one or more services could not activate'))\n        return\n      }\n      resolve(new SheetStateEvent(this.$this, this.$this.State))\n    })\n  }\n\n  unmount() {\n    this.SheetService.forceDeactivate()\n    this.Drawer.deactivate()\n    this.PopService.deactivate()\n  }\n\n  toString() {\n    return '[object SheetMountWorker]'\n  }\n}\n\nclass SheetStateEvent {\n  constructor($this, state) {\n    this.events = [NAVSTATE_EVENTS.show, NAVSTATE_EVENTS.hide]\n    this.$this = $this\n    this._State = state\n  }\n\n  on(event, handle = () => false) {\n    if (!(this.events.indexOf(event) + 1)) {\n      throw new Error(`unknown event '${event}'`)\n    }\n    this._State[`on${event}`] = handle.bind(this.$this)\n  }\n\n  off(event) {\n    if (!(this.events.indexOf(event) + 1)) {\n      throw new Error(`unknown event '${event}'`)\n    }\n    this._State[`on${event}`] = null\n  }\n}\n\nexport default Sheet\n","import {\n  $,\n  Bound,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  Path,\n  ZERO,\n  camelCase,\n  css,\n  dataCamelCase,\n  getAttribute,\n  getData,\n  hasAttribute,\n  resolveThreshold,\n  setAttribute,\n  unique\n} from './util'\nimport CircularPath from './circular-path'\nimport Drawer from './drawer'\nimport Nav from './nav'\nimport Sheet from './sheet'\n\n\nconst Util = {\n  NAV_BOX_SHADOW,\n  ZERO,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  Path,\n  Bound,\n  dataCamelCase,\n  camelCase,\n  unique,\n  $,\n  getAttribute,\n  hasAttribute,\n  setAttribute,\n  getData,\n  resolveThreshold,\n  css\n}\n\nexport {\n  CircularPath,\n  Drawer,\n  Nav,\n  Sheet,\n  Util\n}\n"],"names":["BLUR_SPREAD_SHADE","NAV_BOX_SHADOW","top","left","bottom","right","ZERO","DIRECTIONS","NAVSTATE_EVENTS","show","hide","DrawerResponseInterface","position","posOnStart","dimension","displacement","oppositeDimension","close","open","WINDOW","window","Path","x","y","pathDifference","path1","path2","join","Bound","lower","upper","ActivityManager","activity","running","id","Date","now","run","derun","isRunning","dataCamelCase","data","camelCase","substring","delim","list","Array","split","reduce","acc","cur","charAt","toUpperCase","slice","unique","max","Math","floor","random","$","query","document","querySelectorAll","getAttribute","el","attr","hasAttribute","setAttribute","value","getData","dataName","prop","dataset","offsetRight","screen","width","offsetLeft","offsetWidth","offsetBottom","height","offsetTop","offsetHeight","resolveThreshold","threshold","MAX_THRESHOLD","MIN_ILLEGAL_THRESHOLD","css","length","property","STYLEMAP","getComputedStyle","style","Object","keys","isArray","ostyle","POINT_ANGLE","PI","RAD","Circle","radius","diameter","areaOfSect","angle","area","arc","circumference","DEG","Quadrant","FIRST","SECOND","THIRD","FOURTH","CircularPath","angles","_angles","map","_degToRad","_quad","deg","_radToDeg","rad","_findPath","parseFloat","cos","toFixed","sin","getQuadrant","RangeError","out","forEach","push","Service","event","_event","lock","stopImmediatePropagation","inhibitSubTask","preventDefault","Rectangle","paths","x1","y1","x2","y2","coordsX","coordsY","abs","greaterWidth","VectorRectangle","displacementY","displacementX","sqrt","THRESHOLD","BELOW_THRESHOLD","OPEN","CLOSE","UNIT","MAX_START_AREA","THRESHOLD_VALUE","FALSE_TOUCH_START_POINT","Bottom","options","bound","element","ELEMENT","_winSize","sizeOfWindow","_windowSize","winSize","SIZE","unit","minArea","maxStartArea","startX","startY","resumeX","resumeY","endX","endY","scrollControlSet","scrollControl","timing","start","end","_context","touchEvent","fn","_updateOrientation","WIN_HEIGHT","changedTouches","clientY","clientX","currentPosition","positionOnStart","slack","response","DRI","call","move","FALSE_HEIGHT","resume","virtualStart","vdimension","rect","isBoundY","greaterHeight","gap","thresholdState","TIMING","getTime","signedOffsetSide","customBound","nonZero","zero","offsetSide","action","getResponse","state","trueForOpen","stateObj","service","setContext","ctx","_getStyle","elt","pseudoElt","Left","maxArea","isBoundX","Right","WIN_WIDTH","FALSE_WIDTH","Top","START","MOVE","END","CLASS_TYPE","SnappedDrawer","drawerManager","_options","_drawerManager","_element","_target","TARGET","_handlers","_direction","DIRECTION","_calibration","_callbacks","_id","events","_setCalibration","activate","startfn","def","movefn","endfn","startHandler","getRunningActivity","_isCoolSignal","_getSignal","moveHandler","endHandler","_processThresholdState","_register","i","addEventListener","deactivate","removeEventListener","on","_registerCallbacks","setServiceID","TypeError","toString","stateArray","point","UP","LEFT","DOWN","RIGHT","signal","size","emitter","handlers","DrawerManagementStore","activities","pushActivity","find","Drawer","Backdrop","backdrop","time","display","opacity","transition","setTimeout","setOpacity","val","KILO","MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD","MIN_POSITIVE_DISPLACEMENT","MIN_NEGATIVE_DISPLACEMENT","TRANSITION_STYLE","EFFECT","OVERFLOW","TRANS_TIMING","TRANS_TEMPLATE","HIDDEN","SCROLL","AUTO","HREF","HASH_ATTR","MIN_SPEED","MAX_SPEED","NavDrawer","_body","BODY","_backdrop","BACKDROP","direction","_checkDirection","directionString","_bound","o","elementSize","drawer","_startHandler","_moveHandler","_threshold","_belowThreshold","boxShadow","overflow","rectangle","curPos","WIN_SIZE","isOpen","_calcSpeed","_hide","_show","isClosed","overallEventTime","MTTOB","MPD","MND","LOGIC","_overrideBelowThresh","_showPrep","_hidePrep","TRANSITION","_setState","isRegisteredEvent","getStateEventHandler","buttonHash","INIT_ELEM","location","hash","distance","distanceRemain","sign","newTime","mode","Error","axis","upperBound","lowerBound","TRANS_END","NavService","nav","button","body","backdropElement","transTime","alive","_closeInvoked","_initialState","ClickHandler","mouseEvent","handler","BackdropHandler","_close","TransitionHandler","_cleanShadow","_width","ReferenceError","forceDeactivate","_toNum","_open","replace","test","round","parseInt","PopService","parentService","hashChangeEvent","_hashchange","oldHash","_getHash","oldURL","uri","indexOfHash","lastIndexOf","EventInterface","SHOW","HIDE","State","_stateEventRegistry","type","values","indexOf","MEDIA_DRAW","NAME","NAV","NavCard","src","dest","createElement","className","background","SheetService","_Activity","setup","opts","assign","defaultConfig","prototype","hasOwnProperty","srcEl","HTMLElement","destEl","maxWidth","useBackdrop","backdropclass","insertAdjacentElement","defaultOptions","drawerOptions","MAX_WIDTH","scrollableContainer","CustomDrawer","hashOptions","NavMountWorker","terminate","SERVICES","Default","Hash","namespace","name","_drawerAPI","_hashAPI","_defaultAPI","Pop","borrowedContext","$this","mount","DEFAULT_ACTIVE","DRAWER_ACTIVE","HASH_ACTIVE","Promise","resolve","reject","NavStateEvent","unmount","_State","handle","bind","off","MAX_TIME","MarkIndex","high","mid","low","SheetDrawer","_scCheck","_sc","_oldbound","marks","documentElement","clientHeight","_Control","touchMoveExited","lastMetredPos","scrollTop","customDimension","closing","_toUnit","opening","scrollTo","minForwardVelocity","minBackwardVelocity","velocity","_halfHidePrep","isDownDrawer","halfDimension","bodyOverflow","percent","percentage","_updateBound","sheet","_height","SHEET","Sheet","navMountWorker","SheetMountWorker","Interface","SheetStateEvent","Util"],"mappings":"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"}