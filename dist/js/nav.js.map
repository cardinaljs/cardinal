{"version":3,"file":"nav.js","sources":["../../src_modules/js/nav/drawer.js","../../src_modules/js/nav/navservice.js","../../src_modules/js/nav/hashstate.js","../../src_modules/js/nav/index.js"],"sourcesContent":["import BoundDrawer from './../drawer/'\n\nconst TRANSITION_STYLE = 'linear'\nconst EFFECT = 'transition'\nconst TRANS_TIMING = '0.1s' // This value is basic, the calc'ed value will depend on drawer speed\nconst OPACITY = 'opacity'\nconst TRANS_TEMPLATE = `${TRANSITION_STYLE} ${TRANS_TIMING}`\nconst HIDDEN = 'hidden'\nconst SCROLL = 'scroll'\nconst START = 'start'\nconst MOVE = 'move'\nconst END = 'end'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = `below${THRESHOLD}`\nconst DIRECTIONS = ['top', 'left', 'bottom', 'right']\n\nclass NavDrawer {\n  /**\n   *\n   * @param {{}} options An options Object to configure the Drawer with\n   */\n  constructor(options) {\n    this.options = options\n    /**\n     * @type {HTMLElement}\n     */\n    this.element = this.options.ELEMENT\n    /**\n     * @type {HTMLElement}\n     */\n    this.body = this.options.BODY\n    /**\n     * @type {HTMLElement}\n     */\n    this.backdrop = this.options.BACKDROP\n    /**\n     * @type {string}\n     */\n    this.direction = this.options.DIRECTION\n    this.directionString = DIRECTIONS[this.direction]\n    this.handlers = []\n    this.events = [\n      this.options.touchstart,\n      this.options.touchmove,\n      this.options.touchend\n    ]\n\n    let o = {\n      ...options,\n      TARGET: document\n    }\n    this.drawer = new BoundDrawer(o)\n    this.transition = `${this.directionString} ${TRANS_TEMPLATE}`\n    this.backdropTransition = `${OPACITY} ${TRANS_TEMPLATE}`\n  }\n\n  activate() {\n    this.drawer.on(START, this._startHandler)\n      .on(MOVE, this._moveHandler)\n      .on(THRESHOLD, this._threshold)\n      .on(BELOW_THRESHOLD, this._belowThreshold)\n      .setContext(this)\n      .activate()\n    return 0\n  }\n\n  deactivate() {\n    this.drawer.deactivate()\n    return 0\n  }\n\n  _startHandler(response, rectangle) {\n    this.element.style[this.directionString] = response.displacement\n    this.element.style[EFFECT] = this.transition\n    this.body.style.overflow = HIDDEN\n  }\n\n  _moveHandler(response, rectangle) {\n    this.element.style[this.directionString] = response.dimension\n    this.element.style[EFFECT] = this.transition\n  }\n\n  _threshold(state, stateObj) {\n    const isOpen = state[1] === 'open'\n    this.body.style.overflow = isOpen ? SCROLL : HIDDEN\n    this.element.style[this.directionString] = stateObj.dimension\n  }\n\n  _belowThreshold(state, stateObj, rect) {\n    const isClosed = state[1] !== 'open'\n    this.body.style.overflow = isClosed ? SCROLL : HIDDEN\n    this.element.style[this.directionString] = stateObj.dimension\n    const overallEventTime = stateObj.TIMING\n    if (overallEventTime / 1e3 < 0.7) {\n      console.log(overallEventTime)\n      if(rect.width >= 30) {\n        this.body.style.overflow = !isClosed ? SCROLL : HIDDEN\n        this.element.style[this.directionString] = stateObj.oppositeDimension\n        console.log(`yeah ${rect.width}`)\n      }\n\n    }\n  }\n}\n\nexport default NavDrawer\n","\nconst OPACITY = \"opacity\"\nconst DISPLAY = \"display\"\nconst LEFT = \"left\"\nconst RIGHT = \"right\"\nconst TRANSITION_STYLE = \"ease\"\nconst TRANSITION_TIMING = \"0.6s\"\nconst EFFECT = \"transition\"\nconst HASH = \"menu\"\nconst BACK = \"back\"\nconst FORTH = \"forth\"\nconst UNIT = \"px\"\nconst TSTT = `${TRANSITION_STYLE} ${TRANSITION_TIMING}`\nconst BACKDROP_TRANS = `background ${TSTT},\n${DISPLAY} ${TSTT}`\nconst BACKDROP_BGA = \"rgba(0,0,0,.4)\"\nconst BACKDROP_BGI = \"rgba(0,0,0,0)\"\n\nclass NavService {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.event = options.DEFAULT_EVENT || 'click'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offsetWidth\n    this.trans_time = options.TRANSITION/1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.trans_time}s`\n    // state of the nav, whether open or close\n    this.alive = false\n  }\n\n  _width(unit) {\n    unit = unit || \"\"\n    return this.width + unit\n  }\n\n  activate() {\n    this.button.addEventListener(this.event, (e) => {\n      this.handler.call(this, e)\n    })\n    return 0\n  }\n\n  handler() {\n    console.log('clicked')\n    NavService.backdrop_color = this.backdrop.style.background || this.backdrop.style.backgroundColor || BACKDROP_BGA\n    let state = NavService.css(this.nav, this.direction).\n      replace(/[^\\d]*$/, '')\n    state = /\\.(?=\\d)/.test(state) ? Math.floor(parseFloat(state)) : parseInt(state)\n    if (`${state}${UNIT}` == `-${this._width(UNIT)}`) {\n      this._open()\n    } else {\n      this._close()\n    }\n  }\n\n  _open() {\n    let style = {\n      [this.direction]: 0,\n      [EFFECT]: this.transition\n    }\n    NavService.css(this.nav, style)\n    let bdStyle = {\n      background: NavService.backdrop_color,\n      [EFFECT]: BACKDROP_TRANS,\n      [DISPLAY]: \"BLOCK\"\n    }\n    NavService.css(this.backdrop, bdStyle)\n    this.alive = true\n  }\n\n  _close() {\n    let style = {\n      [this.direction]: `-${this._width(UNIT)}`,\n      [EFFECT]: this.transition\n    }\n    NavService.css(this.nav, style)\n    let bdStyle = {\n      background: BACKDROP_BGI,\n      [EFFECT]: BACKDROP_TRANS,\n      [DISPLAY]: \"NONE\"\n    }\n    NavService.css(this.backdrop, bdStyle)\n    this.alive = false\n  }\n\n  static css(el, property, style) {\n    return _css(el, property, style)\n  }\n\n  deactivate() {\n    this.button.removeEventListener(this.event, this.handler)\n    return 0\n  }\n}\n\nexport function _css(el, property, style) {\n  const STYLEMAP = window.getComputedStyle(el)\n  /**\n   * @param property?: string\n   * @param style: string|Array|Object\n   * @return void\n   *     if called as a setter\n   *\n   */\n  style = style || null\n  property = property || null\n\n  if (typeof property === \"string\" && style !== null) {\n    // setting one property\n    el.style[property] = style\n    return\n  }\n  if (typeof property === \"object\" && property instanceof Object) {\n    // `style` MUST = null\n    // setting many properties\n    style = property\n    for (let prop of Object.keys(style)) {\n      el.style[prop] = style[prop]\n    }\n  } else if (property instanceof Array) {\n    // return all values of properties in the array for\n    // the element as object\n    let ostyle = {}\n    style = STYLEMAP\n    for (let prop of style) {\n      ostyle[prop] = style[prop]\n    }\n    return ostyle\n  } else {\n    // get style from property\n    return STYLEMAP[property]\n  }\n  return void(0)\n}\n\nexport default NavService\n","import NavService from './navservice'\n\nconst TRANSITION_STYLE = 'ease'\n\nclass HashState {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.event = 'hashchange'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offSetWidth\n    this.trans_time = options.transition/1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.trans_time}s`\n    // state of the nav, whether open or close\n    this.alive = false\n  }\n\n  activate() {\n    window.addEventListener(this.event, this.handler)\n    return 0\n  }\n\n  handler(e) {\n    let hash = HashState._getHash(e)\n    let ns = new NavService(this.options)\n    if (hash === null) {\n      ns._close()\n    } else if (hash === this.button.getAttribute('href')) {\n      ns._open()\n    } else {\n      return\n    }\n  }\n\n  static _getHash(e) {\n    let hash = e.newURL\n    let indexOfHash = hash.lastIndexOf('#')\n    hash = indexOfHash !== -1 ? hash.slice(indexOfHash).replace(/(?:[^\\w\\d-]+)$/) : null\n    return hash\n  }\n\n  deactivate() {\n    window.removeEventListener(this.event, this.handler)\n    return 0\n  }\n}\nexport default HashState\n","import NavDrawer from './drawer'\nimport HashState from './hashstate'\nimport NavService, {_css} from './navservice'\n\nconst BACKDROP = \"backdrop\"\nconst DEF_CLASSNAME = \"cardinal-navcard\"\nconst MEDIA_HASH = \"data-hash-max-width\"\nconst MEDIA_DRAW = \"data-draw-max-width\"\nconst _CLASS = \"class\"\nconst EVENTS = {\n  touchend: \"touchend\",\n  touchmove: \"touchmove\",\n  touchstart: \"touchstart\"\n}\n\nclass NavCard {\n\n  constructor(){\n    // **Do not insert the below element into DOM**\n    /**\n     * **Covert Backdrop**\n     * just incase `options.backdrop = false`\n     * prevent multiple `if` statements\n     * so we don't have to check whether\n     * backdrop is enabled anytime we want to access it\n     * insert into DOM only:\n     * when `options.backdrop = true`\n     * `options.backdropClass` is undefined\n    */\n    this.backdrop = document.createElement('div')\n    this.backdrop.className = BACKDROP\n    this.backdrop.style = _css(this.backdrop, {\n      background: 'rgba(0,0,0,.4)',\n      height: '100%',\n      width: '100%',\n      top: 0,\n      left: 0\n    })\n\n    this.body = document.body\n    // init with null\n    this.Drawer = null\n    this.NavService = null\n    this.HashState = null\n\n    NavCard.defaultConfig = {\n      type: \"nav\",\n      transition: 500,\n      event: \"click\",\n      direction: \"left\",\n      backdrop: false,\n      backdropClass: null,\n      accessAttr: \"data-target\",\n      maxStartArea: 25,\n      threshold: 1/2,\n      unit: 'px'\n    }\n\n    NavCard.API = {\n      DEFAULT: 0,\n      DRAWER: 1,\n      HASH: 2,\n    }\n  }\n\n  setup(_elem, options) {\n    let element,\n      backdrop,\n      dataAccess,\n      opts,\n      HASH_NAV_MAX_WIDTH,\n      NAV_DRAW_MAX_WIDTH,\n      destinationId,\n      destination\n\n    opts = NavCard.defaultConfig\n\n    if (options && \"object\" === typeof options) {\n      for (let prop of Object.keys(options)) {\n        if (opts.hasOwnProperty(prop))\n          opts[prop] = options[prop]\n        else\n          continue\n      }\n    }\n\n    if (opts.backdrop) {\n      let backdrop_class = !!opts.backdropClass ? opts.backdropClass : false\n      // if `opts.backdrop` and no `backdrop_class` given\n      // append our custom backdrop\n      if (!backdrop_class) this.body.append(this.backdrop)\n\n      if (typeof backdrop_class === 'string') {\n        // check if backdrop_class is normal string or css class selector\n        backdrop =  /^\\./.test(backdrop_class) ? backdrop_class : `.${backdrop_class}`\n        this.backdrop = $(backdrop)\n      }\n\n    }\n\n    dataAccess = opts.accessAttr\n\n    /**\n     * Initialization element e.g <button ...</button>\n     */\n    element = $(_elem)\n    destinationId = getData(element, dataAccess)\n\n    // check if the data-* attribute value is a valid css selector\n    // if not prepend a '#' to it as id selector is default\n    let isCSS_Selector = /^(?:\\#|\\.|\\u005b[^\\u005c]\\u005c)/.test(destinationId),\n    isClass = /^\\./.test(destinationId)\n    destinationId = isCSS_Selector ? destinationId : `#${destinationId}`\n\n    destination = $(destinationId)\n\n    // we want a class too so in case we've got an id selector\n    // find the classname or assign a unique class\n    let default_class = `${DEF_CLASSNAME}-${unique(2<<7)}`\n    let classname = isClass ? destinationId : hasAttribute(destination, _CLASS) ? getAttribute(destination, _CLASS) : (setAttribute(destination, _CLASS, default_class), default_class)\n    let classlist = classname.split(/\\s+/)\n    classname = \".\" + ((classlist.length >= 2) ? classlist[0] + \".\" + classlist[1] : classname)\n    destination = isClass ? destination : $(classname)\n\n    // These attributes are used for the RWD(Responsive Web Design)\n    // features. The navigation drawer module is best suited for mobile\n    // touch devices. The program shouldn't listen for certain events on\n    // desktop devices as side-nav may be hidden. The attribute here are\n    // the screen sizes after which the nav is hidden.\n    HASH_NAV_MAX_WIDTH = getData(destination, MEDIA_HASH)\n    NAV_DRAW_MAX_WIDTH = getData(destination, MEDIA_DRAW)\n    HASH_NAV_MAX_WIDTH = /px$/.test(HASH_NAV_MAX_WIDTH) ? HASH_NAV_MAX_WIDTH : `${HASH_NAV_MAX_WIDTH}px`\n    NAV_DRAW_MAX_WIDTH = /px$/.test(NAV_DRAW_MAX_WIDTH) ? NAV_DRAW_MAX_WIDTH : `${NAV_DRAW_MAX_WIDTH}px`\n\n    let defaultOptions = {\n      ELEMENT: destination,\n      INIT_ELEM: element,\n      BACKDROP: this.backdrop,\n      BODY: this.body,\n      TRANSITION: opts.transition,\n      DIRECTION: ['top', 'left', 'bottom', 'right'][opts.direction],\n      unit: options.unit\n    }\n    let drawerOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: NAV_DRAW_MAX_WIDTH,\n      ...EVENTS,\n      DIRECTION: opts.direction,\n      maxStartArea: opts.maxStartArea,\n      threshold: opts.threshold\n    }\n    let hashOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: HASH_NAV_MAX_WIDTH\n    }\n\n    this._drawerAPI(drawerOptions).activate()\n    this._hashAPI(hashOptions).activate()\n    this._defaultAPI(defaultOptions).activate()\n\n  }\n\n  _drawerAPI(options) {\n    this.Drawer = new NavDrawer(options)\n    return {\n      activate: () => this.Drawer.activate(),\n      deactivate: () => this.Drawer.deactivate()\n    }\n  }\n\n  _hashAPI(options) {\n    this.HashState = new HashState(options)\n    return {\n      activate: () => this.HashState.activate(),\n      deactivate: () => this.HashState.deactivate(),\n    }\n  }\n\n  _defaultAPI(options) {\n    this.NavService = new NavService(options)\n    return {\n      activate: () => this.NavService.activate(),\n      deactivate: () => this.NavService.deactivate(),\n    }\n  }\n\n  terminate(state) {\n    // this._*API(null).deactivate()\n    switch(state) {\n      case NavCard.API.DEFAULT:\n        if (this.NavService instanceof NavService)\n          this.NavService.deactivate()\n        break\n      case NavCard.API.DRAWER:\n        if (this.Drawer instanceof Drawer)\n          this.Drawer.deactivate()\n        break\n      case NavCard.API.HASH:\n        if (this.HashState instanceof HashState)\n          this.HashState.deactivate()\n        break\n      default:\n        this._drawerAPI(null).deactivate()\n        this._hashAPI(null).deactivate()\n        this._defaultAPI(null).deactivate()\n    }\n  }\n}\n\nconst dataCamelCase = data  => {\n  // remove 'data-' prefix and return camelCase string\n  return camelCase(data.substring(5), \"-\")\n}\nconst camelCase = (data, delim=\"-\") => {\n  let list = data instanceof Array ? data : data.split(delim)\n  return list.reduce((acc, cur)=> {\n    return acc + cur.charAt(0)\n    .toUpperCase() + cur.slice(1)\n  })\n}\nconst unique = max => Math.floor(Math.random() * max)\n\nconst $ = (...query) => {\n  /**\n   * **This is not jQuery**\n   * This selector is seperated as a function\n   * so for extensibility. If you'd love jQuery's `$`\n   * ```js\n   * import jQuery from 'where/ever'\n   * const $ = jQuery\n   * // or\n   * const $ = (...query) => jQuery(...query)\n   * ```\n   */\n  return  document.querySelectorAll(query[0])[0]\n}\nconst getAttribute = (el, attr) =>  el.getAttribute(attr)\nconst hasAttribute = (el, attr) => el.hasAttribute(attr)\n\nconst setAttribute = (el, attr, value) => {\n  el.setAttribute(attr, value)\n}\n\nconst getData = (el, attr) => {\n  let prop = dataCamelCase(attr)\n  // this may return `undefined` in some Safari\n  if (el.dataset && el.dataset[prop]) {\n   return  el.dataset[prop]\n  } else {\n    return getAttribute(el, attr)\n  }\n}\n\nexport default NavCard\n"],"names":["TRANSITION_STYLE","EFFECT","TRANS_TIMING","OPACITY","TRANS_TEMPLATE","HIDDEN","SCROLL","START","MOVE","THRESHOLD","BELOW_THRESHOLD","DIRECTIONS","NavDrawer","options","element","ELEMENT","body","BODY","backdrop","BACKDROP","direction","DIRECTION","directionString","handlers","events","touchstart","touchmove","touchend","o","TARGET","document","drawer","BoundDrawer","transition","backdropTransition","activate","on","_startHandler","_moveHandler","_threshold","_belowThreshold","setContext","deactivate","response","rectangle","style","displacement","overflow","dimension","state","stateObj","isOpen","rect","isClosed","overallEventTime","TIMING","console","log","width","oppositeDimension","DISPLAY","TRANSITION_TIMING","UNIT","TSTT","BACKDROP_TRANS","BACKDROP_BGA","BACKDROP_BGI","NavService","nav","button","INIT_ELEM","event","DEFAULT_EVENT","offsetWidth","trans_time","TRANSITION","alive","_width","unit","addEventListener","e","handler","call","backdrop_color","background","backgroundColor","css","replace","test","Math","floor","parseFloat","parseInt","_open","_close","bdStyle","el","property","_css","removeEventListener","STYLEMAP","window","getComputedStyle","Object","keys","prop","Array","ostyle","HashState","offSetWidth","hash","_getHash","ns","getAttribute","newURL","indexOfHash","lastIndexOf","slice","DEF_CLASSNAME","MEDIA_HASH","MEDIA_DRAW","_CLASS","EVENTS","NavCard","createElement","className","height","top","left","Drawer","defaultConfig","type","backdropClass","accessAttr","maxStartArea","threshold","API","DEFAULT","DRAWER","HASH","setup","_elem","dataAccess","opts","HASH_NAV_MAX_WIDTH","NAV_DRAW_MAX_WIDTH","destinationId","destination","hasOwnProperty","backdrop_class","append","$","getData","isCSS_Selector","isClass","default_class","unique","classname","hasAttribute","setAttribute","classlist","split","length","defaultOptions","drawerOptions","MAX_WIDTH","hashOptions","_drawerAPI","_hashAPI","_defaultAPI","terminate","dataCamelCase","data","camelCase","substring","delim","list","reduce","acc","cur","charAt","toUpperCase","max","random","querySelectorAll","attr","value","dataset"],"mappings":"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"}