{"version":3,"file":"drawer.js","sources":["../../src_modules/js/util.js","../../src_modules/js/drawer/bottom.js","../../src_modules/js/drawer/vector.js","../../src_modules/js/drawer/rectangle.js","../../src_modules/js/drawer/left.js","../../src_modules/js/drawer/right.js","../../src_modules/js/drawer/top.js","../../src_modules/js/drawer/index.js"],"sourcesContent":["const MAX_THRESHOLD = 1\nconst MIN_ILLEGAL_THRESHOLD = 0\n\nexport default class Final {\n  static START = 2\n  static HIDDEN = 'hidden'\n  static ZERO = 0\n  static DISPLAY = 'block'\n}\n\nexport function dataCamelCase(data) {\n  // remove 'data-' prefix and return camelCase string\n  return camelCase(data.substring(5), '-')\n}\n\nexport function camelCase(data, delim = '-') {\n  const list = data instanceof Array ? data : data.split(delim)\n  return list.reduce((acc, cur) => acc + cur.charAt(0)\n    .toUpperCase() + cur.slice(1)\n  )\n}\n\nexport function unique(max) {\n  Math.floor(Math.random() * max)\n}\n\nexport function $(query) {\n  return document.querySelectorAll(query)[0]\n}\n\nexport function getAttribute(el, attr) {\n  return el.getAttribute(attr)\n}\n\nexport function hasAttribute(el, attr) {\n  return el.hasAttribute(attr)\n}\n\nexport function setAttribute(el, attr, value) {\n  el.setAttribute(attr, value)\n}\n\nexport function getData(el, attr) {\n  const prop = dataCamelCase(attr)\n  // this may return `undefined` in some Safari\n  if (el.dataset && el.dataset[prop]) {\n    return el.dataset[prop]\n  }\n  return getAttribute(el, attr)\n}\n\nexport function validateThreshold(tsh) {\n  if (tsh < MAX_THRESHOLD && tsh > MIN_ILLEGAL_THRESHOLD) {\n    tsh = MAX_THRESHOLD - tsh\n    return tsh\n  } else if (tsh < MIN_ILLEGAL_THRESHOLD) {\n    tsh = MAX_THRESHOLD\n    return tsh\n  }\n  return MAX_THRESHOLD\n}\n\nexport function css(el, property, style) {\n  const STYLEMAP = window.getComputedStyle(el)\n\n  style = style || null\n  property = property || null\n\n  if (typeof property === 'string' && style !== null) {\n    // setting one property\n    el.style[property] = style\n    return\n  }\n  if (typeof property === 'object' && property instanceof Object) {\n    // `style` MUST = null\n    // setting many properties\n    style = property\n    for (const prop of Object.keys(style)) {\n      el.style[prop] = style[prop]\n    }\n  } else if (property instanceof Array) {\n    // return all values of properties in the array for\n    // the element as object\n    const ostyle = {}\n    style = STYLEMAP\n    for (const prop of style) {\n      ostyle[prop] = style[prop]\n    }\n    return ostyle\n  } else {\n    // get style from property\n    return STYLEMAP[property]\n  }\n}\n","import Final from '../util'\n\nexport default class Bottom {\n  /**\n   *\n   * @param {*} options\n   * an object containing all required properties\n   */\n  constructor(options) {\n    this.options = options\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     */\n    this.winSize = this.options.sizeOfWindow || window.screen.availHeight\n    this.height = this.element.offsetHeight\n    this.unit = this.options.unit\n    /**\n     * @type number\n     * A maximum area where the draw-start is sensitive\n     */\n    this.maxArea = this.winSize - this.options.maxStartArea\n\n    this.context = null\n  }\n\n  start(e) {\n    const start = e.changedTouches[0].pageY || e.changedTouches[0].clientY\n    const startX =  e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    /**\n     * The `Drawer`'s `Top` class uses the `CSS property` `top`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = parseFloat(\n      this.element.style.bottom.replace(\n        /[^\\d]*$/, ''\n      )\n    )\n    const dimension = `-${this.height - start}${this.unit}`\n    const displacement = `-${this.height - Final.START}${this.unit}`\n\n    if (start >= Final.ZERO && start <= this.maxArea && currentPosition !== Final.ZERO) {\n      this.element.style.bottom = displacement || dimension\n      // Block every scroll job on the screen\n      document.body.style.overflow = Final.HIDDEN\n    }\n  }\n\n  move() {\n\n  }\n\n  end() {\n\n  }\n\n  setContext(ctx) {\n    this.context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? window.getComputedStyle(elt, pseudoElt) : window.getComputedStyle(elt)\n  }\n\n  // no need for `window.onorientationchange`\n  _loopWinSizeChangeEvent() {\n    window.setInterval(() => {\n      this.winSize = window.screen.availWidth\n    }, 1e3)\n  }\n}\n","export class Vector {\n  constructor(x1, y1, x2, y2) {\n    this.coordsX = {\n      x1,\n      x2\n    }\n    this.coordsY = {\n      y1,\n      y2\n    }\n  }\n\n  get displacementX() {\n    return this.coordsX.x2 - this.coordsX.x1\n  }\n\n  get displacementY() {\n    return this.coordsY.y2 - this.coordsY.y1\n  }\n}\n","import { Vector } from './vector'\n\nexport class Rectangle extends Vector {\n  constructor(x1, y1, x2, y2) {\n    super(x1, y1, x2, y2)\n    //this.inheritted = true\n  }\n\n  // getter\n  get width() {\n    return Math.abs(this.displacementX)\n  }\n\n  get height() {\n    return Math.abs(this.displacementY)\n  }\n\n  // methods\n  get greaterWidth() {\n    return this.width > this.height\n  }\n\n  get greaterHeight() {\n    return !this.greaterWidth\n  }\n}\n","import {Rectangle} from './rectangle'\nimport Util, { validateThreshold } from './../util'\n\nconst DIRECTION = 'left'\nconst DIMENSION = 'dimension'\nconst DISPLACEMENT = 'displacement'\nconst EVENT_OBJ = 'event'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\nconst OPEN = 'open'\nconst CLOSE = 'close'\nconst UNIT = 'px'\nconst MAX_START_AREA = 25\nconst THRESHOLD_VALUE = 0.666666666\n\nexport default class Left {\n  /**\n   *\n   * @param {{}} options\n   * an object containing all required properties\n   */\n  constructor(options) {\n    this.options = options\n    /**\n     * @type {HTMLElement}\n     */\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     * @type {number}\n     */\n    this.winSize = this.options.sizeOfWindow || window.screen.availWidth\n    /**\n     * @type {number}\n     */\n    this.width = this.element.offsetWidth\n    this.unit = this.options.unit || UNIT\n    /**\n     * @type {number}\n     * A maximum area where the draw-start is sensitive\n     */\n    this.maxArea = this.options.maxStartArea || MAX_START_AREA\n\n    /**\n     * A threshold which the `touchmove` signal must attain\n     * before being qualified to stay shown\n     * the threshold should be a value between `0` and `1.0`\n     * @type {number}\n     */\n    this.threshold = this.options.threshold || THRESHOLD_VALUE\n    this.threshold = validateThreshold(this.threshold)\n\n    // Touch coordinates (Touch Start)\n    this.startX = -1\n    this.startY = -1\n    // Touch coordinates (Touch Move)\n    this.resumeX = -1\n    this.resumeY = -1\n    // Touch coordinates (Touch End) [these may not be important]\n    this.endX = -1\n    this.endY = -1\n\n    /**\n     * A control for scroll. This control prevents\n     * a clash between coordinates dancing between\n     * the (&delta;`X`) coords and (&delta;`Y`) coords.\n     * Utilising the `Rectangle` class to get bounds\n     * and isolate territories\n     * @type {boolean}\n     */\n    this.scrollControlSet = false\n    this.scrollControl = null\n    this.timing = {\n      /**\n       * @type {Date}\n       */\n      start: null,\n      /**\n       * @type {Date}\n       */\n      end: null\n    }\n\n    this.context = null\n  }\n\n  /**\n   * The `touchstart` event handler for the `Left` drawer `class`\n   * @param {{}} e an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchstart` event.\n   * @param {Function} fn - a callback function called when the `start`\n   * event is triggered\n   * @returns {void}\n   */\n  start(e, fn) {\n    this.timing.start = new Date()\n    const start = e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    this.startX = start\n    this.startY =  e.changedTouches[0].pageY || e.changedTouches[0].clientY\n    /**\n     * The `Drawer`'s `Left` class uses the `CSS property` -- `left`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = parseFloat(\n      Left._getStyle(this.element)[DIRECTION].replace(\n        /[^\\d]*$/, ''\n      )\n    )\n    this.positionOnStart = currentPosition\n    const dimension = `-${this.width - start}${this.unit}`\n    const displacement = `-${this.width - Util.START}${this.unit}`\n\n    if (start >= Util.ZERO && start <= this.maxArea && currentPosition !== Util.ZERO) {\n      const response = {\n        [EVENT_OBJ]: e,\n        [DIMENSION]: dimension,\n        [DISPLACEMENT]: displacement\n      }\n      fn.call(this.context || this, response, new Rectangle(this.startX, this.startY, -1, -1))\n      // this.element.style.left = displacement || dimension\n      // Block every scroll job on the screen\n      // document.body.style.overflow = Final.HIDDEN\n    }\n  }\n\n  /**\n   * The `touchstart` event handler for the `Left` drawer `class`\n   * @param {{}} e an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchmove` event.\n   * @param {Function} fn - a callback function called when the `move`\n   * event is triggered\n   * @returns {void}\n   */\n  move(e, fn) {\n    const resume = e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    this.resumeX = resume\n    this.resumeY = e.changedTouches[0].pageY || e.changedTouches[0].clientY\n\n    const currentPosition = parseFloat(\n      Left._getStyle(this.element)[DIRECTION].replace(\n        /[^\\d]*$/, ''\n      )\n    )\n    const nextAction = this.positionOnStart === Util.ZERO ? CLOSE : OPEN\n\n    const start = this.startX\n    const width = this.width\n    /**\n     * When the touch doesn't start from the max-width\n     * of the element ignore `start` and use `width`\n     * as starting point.\n     */\n    const virtualStart = start > width ? width : start\n    /**\n     * Dimension for opening. When the drawer is being opened,\n     * the `width` is the max dimension, and the `start` can\n     * only be less than the `width` (from a range of `0` to `this.maxArea` e.g `0` - `25`), so the current\n     * reading from `resume` is subtracted from the `width` to\n     * get the accurate position to update the drawer with.\n     */\n    const dimension = `-${width - resume}${this.unit}`\n    /**\n     * Dimension for closing. When the drawer is being closed,\n     * the `width` is the max dimension and the `start` could\n     * possibly be more than the `width`\n     * or less than the `width`.\n     * To assure an accurate dimension the `virtualStart`\n     * determines whether to use the `width` as starting point\n     * or the actual `start`. If the actual start is more than\n     * `width`, the width becomes the start point else the `start`\n     */\n    const vdimension = `-${virtualStart - resume}${this.unit}`\n    const rect = new Rectangle(\n      this.startX,\n      this.startY,\n      this.resumeX,\n      this.resumeY\n    )\n    const isBoundX = rect.greaterWidth\n\n    if (!this.scrollControlSet) {\n      this.scrollControl = isBoundX\n      this.scrollControlset = !this.scrollControlSet\n    }\n\n    // OPEN LOGIC\n    if (start >= Util.ZERO && start <= this.maxArea && currentPosition !== Util.ZERO && isBoundX && nextAction === OPEN && this.scrollControl && rect.displacementX > Util.ZERO) {\n      const response = {\n        [EVENT_OBJ]: e,\n        [DIMENSION]: dimension,\n        open: true,\n        close: false\n      }\n      fn.call(this.context || this, response, rect)\n      // this.element.style[DIRECTION] = dimension\n    }\n\n    // CLOSE LOGIC\n    if (currentPosition !== this.width && isBoundX && nextAction === CLOSE && this.scrollControl && rect.displacementX < Util.ZERO) {\n      const response = {\n        [EVENT_OBJ]: e,\n        [DIMENSION]: vdimension,\n        close: true,\n        open: false\n      }\n      fn.call(this.context || this, response, rect)\n      // this.element.style[DIRECTION] = vdimension\n    }\n  }\n\n  /**\n   * The `touchstart` event handler for the `Left` drawer `class`\n   * @param {{}} e an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchend` event.\n   * @param {Function} fn - a callback function called when the `end`\n   * event is triggered\n   * @param {{}} thresholdState - a state object which should be passed\n   * by reference for updating by this method\n   * @returns {void}\n   */\n  end(e, fn, thresholdState) {\n    this.timing.end = new Date()\n\n    const end = e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    this.endX = end\n    this.endY = e.changedTouches[0].pageY || e.changedTouches[0].clientY\n\n    const rect = new Rectangle(this.startX, this.startY, this.endX, this.endY)\n\n    const start = this.startX\n    const TIMING = this.timing.end.getTime() - this.timing.start.getTime()\n    const threshold = this.threshold\n    const signedOffsetSide = parseFloat(\n      Left._getStyle(this.element)[DIRECTION].replace(\n        /[^\\d]*$/, ''\n      )\n    )\n    const nonZero = `-${this.width}px`\n    const zero = `${Util.ZERO}`\n    const offsetSide = Math.abs(signedOffsetSide)\n    let action = OPEN\n    // release the control for another session\n    this.scrollControl = this.scrollControlSet = false // eslint-disable-line no-multi-assign\n\n    const nextAction = this.positionOnStart === Util.ZERO ? CLOSE : OPEN\n    const response = {\n      [EVENT_OBJ]: e,\n      position: signedOffsetSide,\n      rect\n    }\n\n    function getResponse(state, trueForOpen) {\n      const opposite = 'oppositeDimension'\n      if (state === THRESHOLD && trueForOpen || state === BELOW_THRESHOLD && !trueForOpen) {\n        return {\n          [DIMENSION]: zero,\n          TIMING,\n          [opposite]: nonZero,\n          ...response\n        }\n      } else if (state === THRESHOLD && !trueForOpen || state === BELOW_THRESHOLD && trueForOpen) {\n        return {\n          [DIMENSION]: nonZero,\n          TIMING,\n          [opposite]: zero,\n          ...response\n        }\n      }\n      return {}\n    }\n\n    // OPEN LOGIC\n    if (nextAction === OPEN && start <= this.maxArea) {\n      if (offsetSide <= this.width * threshold) {\n        thresholdState.state = [THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n        // this.element.style[DIRECTION] = zero\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, CLOSE]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], true)\n        // this.element.style[DIRECTION] = nonZero\n      }\n      fn.call(this, action)\n      return\n    }\n\n\n    // CLOSE LOGIC\n    if (nextAction === CLOSE && rect.displacementX < 0) {\n      action = CLOSE\n      if (offsetSide > this.width * threshold) {\n        thresholdState.state = [THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n        // this.element.style[DIRECTION] = nonZero\n      } else {\n        thresholdState.state = [BELOW_THRESHOLD, OPEN]\n        thresholdState.stateObj = getResponse(thresholdState.state[0], false)\n        // this.element.style[DIRECTION] = zero\n      }\n      fn.call(this, action)\n    }\n  }\n\n  setContext(ctx) {\n    this.context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? window.getComputedStyle(elt, pseudoElt) : window.getComputedStyle(elt)\n  }\n\n  // no need for `window.onorientationchange`\n  _loopWinSizeChangeEvent() {\n    window.setInterval(() => {\n      this.winSize = window.screen.availWidth\n    }, 1e3) // eslint-disable-line no-magic-numbers\n  }\n}\n","import Final from '../util'\n\nconst DIRECTION = 'right'\nconst DIMENSION = 'dimension'\nconst DISPLACEMENT = 'displacement'\nconst EVENT_OBJ = 'event'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\n\nexport default class Right {\n  /**\n   *\n   * @param {*} options\n   * an object containing all required properties\n   */\n  constructor(options) {\n    this.options = options\n    // the target element, not listening to,\n    // but reacting to event\n    this.element = options.ELEMENT\n    /**\n     * @type number\n     * Size of device window in pixels\n     */\n    this.winSize = this.options.sizeOfWindow || window.screen.availWidth\n    /**\n     * @type number\n     * A numerical representation of the\n     * target element's width\n     */\n    this.width = this.element.offsetWidth\n    this.unit = this.options.UNIT\n    /**\n     * @type number\n     * A maximum area where the draw-start is sensitive\n     */\n    this.maxArea = this.winSize - this.options.maxStartArea\n\n    /**\n     * A threshold which the `touchmove` signal must attain\n     * before being qualified to stay shown\n     * the threshold should be a value between `1.0` and `0`\n     * @type number\n     */\n    this.threshold = this.options.threshold\n\n    // Touch coordinates (Touch Start)\n    this.startX = -1\n    this.startY = -1\n    // Touch coordinates (Touch Move)\n    this.resumeX = -1\n    this.resumeY = -1\n\n    /**\n     * A control for scroll. This control prevents\n     * a clash between coordinates dancing between\n     * the (&delta;`X`) coords and (&delta;`Y`) coords.\n     * Utilising the `Rectangle` class to get bounds\n     * and isolate territories\n     * @type boolean\n     */\n    this.scrollControlSet = false\n    this.scrollControl = null\n\n    this.context = null\n  }\n\n  start() {\n    const start = e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    this.startX = start\n    this.startY =  e.changedTouches[0].pageY || e.changedTouches[0].clientY\n    /**\n     * The `Drawer`'s `Right` class uses the `CSS property` `Right`\n     * for updating and defining position of the drawn element\n     */\n    const currentPosition = parseFloat(\n      this.element.style.right.replace(\n        /[^\\d]*$/, ''\n      )\n    )\n    const dimension = `-${this.width - (this.winSize - start)}${this.unit}`\n    const displacement = `-${this.width - Final.START}${this.unit}`\n\n    if (start >= Final.ZERO && start <= this.maxArea && currentPosition !== Final.ZERO) {\n      this.element.style.right = displacement || dimension\n      // Block every scroll job on the screen\n      document.body.style.overflow = Final.HIDDEN\n    }\n  }\n\n  /**\n   * The `touchmove` event handler for the `Right` drawer `class`\n   * @param {*} e an event `object`: An event `object`\n   * representing an `object` of all `properties` related\n   * to the `touchstart` event.\n   */\n  move() {\n    const resume = e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    this.resumeX = resume\n    this.resumeY = e.changedTouches[0].pageY || e.changedTouches[0].clientY\n\n    const currentPosition = parseFloat(\n      this.element.style[DIRECTION].replace(\n        /[^\\d]*$/, ''\n      )\n    )\n\n    const start = this.startX\n    const width = this.width\n    /**\n     * When the touch doesn't start from the max-width\n     * of the element ignore `start` and use `width`\n     * as starting point.\n     */\n    const virtualStart = start < (this.winSize - width) ? this.winSize - width : start\n    /**\n     * Dimension for opening. When the drawer is being opened,\n     * the `width` is the max dimension, and the `start` can\n     * only be less than the `width` (from a range of `0` to `this.maxArea` e.g `0` - `25`), so the current\n     * reading from `resume` is subtracted from the `width` to\n     * get the accurate position to update the drawer with.\n     *\n     *\n     * **WHY IT IS LIKE THIS `width - (this.winSize - resume)`**\n     *\n     * `this.winSize - resume` converts it from a vector to a scalar.\n     * Keeping it as a vector makes the dimension inaccurate\n     * as the `right` property of the `HTMLElement.style` is the one being updated and not the left,\n     * so the css `right` property is an enough respect for its direction.\n     *\n     * *__If it should be respected then__*,\n     * 1. The `Right Drawer class` would be updating `left css property` and not `right`, i.e, initialy an element that uses the `Right Drawer` must have a `css file` that defines a `css left property` for the element and not a `right` property; As in\n     * ```scss\n     * .menu {\n     *   left: // (window size + width of the element)px\n     * }\n     * ```\n     * 2. Cardinal's `Right Drawer class` can always update\n     * as `HTMLElement.style.left = ${width - resume}px`, and\n     * not as it is now.\n     * This way there is no `right` property respecting the direction\n     * So the vector attribute of the dimension is preserved.\n     */\n    const dimension = `-${width - (this.winSize - resume)}${this.unit}`\n    /**\n     * Dimension for closing. When the drawer is being closed,\n     * the `width` is the max dimension and the `start` could\n     * possibly be more than the `width`\n     * or less than the `width`.\n     * To assure an accurate dimension the `virtualStart`\n     * determines whether to use the `width` as starting point\n     * or the actual `start`. If the actual start is more than\n     * `width`, the width becomes the start point else the `start`\n     */\n    const vdimension = `-${resume - virtualStart}${this.unit}`\n    new Final()\n    const backdropSheet = {\n      opacity: (this.winSize - resume) / width,\n      display: Final.DISPLAY\n    }\n    const rect = new Rectangle(\n      this.startX,\n      this.startY,\n      this.resumeX,\n      this.resumeY\n    )\n    const isBoundX = rect.wGTh()\n    // eslint-disable-next-line no-unused-expression, no-sequence, no-extra-parens\n    !this.scrollControlSet &&\n    (this.scrollControl = isBoundX), (this.scrollControlset = !this.scrollControlSet)\n  }\n\n  end() {\n\n  }\n\n  setContext(ctx) {\n    this.context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? window.getComputedStyle(elt, pseudoElt) : window.getComputedStyle(elt)\n  }\n\n  // no need for `window.onorientationchange`\n  _loopWinSizeChangeEvent() {\n    window.setInterval(() => {\n      this.winSize = window.screen.availWidth\n    }, 1e3)\n  }\n}\n","import Final from '../util'\n\nexport default class Top {\n  /**\n   *\n   * @param {*} options\n   * an object containing all required properties\n   */\n  constructor(options) {\n    this.options = options\n    this.element = options.ELEMENT\n    /**\n     * Size of device window\n     */\n    this.winSize = this.options.sizeOfWindow || window.screen.availHeight\n    this.height = this.element.offsetHeight\n    this.unit = this.options.unit\n    /**\n     * @type number\n     * A maximum area where the draw-start is sensitive\n     */\n    this.maxArea = this.options.maxStartArea\n    this.context = null\n  }\n\n  start(e) {\n    let start = e.changedTouches[0].pageY || e.changedTouches[0].clientY\n    let startX =  e.changedTouches[0].pageX || e.changedTouches[0].clientX\n    /**\n     * The `Drawer`'s `Top` class uses the `CSS property` `top`\n     * for updating and defining position of the drawn element\n     */\n    let currentPosition = parseFloat(\n      this.element.style.top.replace(\n        /[^\\d]*$/, ''\n      )\n    )\n    let dimension = `-${this.height - start}${this.unit}`\n    let displacement = `-${this.height - Final.START}${this.unit}`\n\n    if (start >= Final.ZERO && start <= this.maxArea && currentPosition != Final.ZERO) {\n      this.element.style.top = displacement || dimension\n      // Block every scroll job on the screen\n      document.body.style.overflow = Final.HIDDEN\n    }\n  }\n\n  move() {\n\n  }\n\n  end() {\n\n  }\n\n  setContext(ctx) {\n    this.context = ctx\n    return this\n  }\n\n  static _getStyle(elt, pseudoElt) {\n    return pseudoElt ? window.getComputedStyle(elt, pseudoElt) : window.getComputedStyle(elt)\n  }\n\n  // no need for `window.onorientationchange`\n  _loopWinSizeChangeEvent() {\n    window.setInterval(() => {\n      this.winSize = window.screen.availWidth\n    }, 1e3)\n  }\n}\n","import Bottom from './bottom'\nimport Left from './left'\nimport Right from './right'\nimport Top from './top'\n\nconst START = 'start'\nconst MOVE = 'move'\nconst END = 'end'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = 'belowthreshold'\n\nexport default class Drawer {\n  /**\n   *\n   * @param {{}} options - an object of configuration options\n   */\n  constructor(options) {\n    this.options = options\n    /**\n     * @type {HTMLElement}\n     */\n    this.element = options.ELEMENT\n    this.target = options.TARGET\n    this.events = ['touchstart', 'touchmove', 'touchend']\n    this.handlers = null\n    this.direction = options.DIRECTION\n    this.callibration = null\n    /**\n     *\n     * @type {{}}\n     */\n    this.callbacks = null\n    this.context = null\n  }\n\n  // enum\n  static UP = 0\n  static LEFT = 1\n  static DOWN = 2 // eslint-disable-line no-magic-numbers\n  static RIGHT = 3 // eslint-disable-line no-magic-numbers\n\n  // public\n  /**\n   * Make sure event handlers are registered using `Drawer.on(...)` before\n   * calling `Drawer.activate()`\n   *\n   * @see {@link Drawer#on | Drawer.on}\n   * @returns {void}\n   */\n  activate() {\n    // get registered callbacks or set default\n    const startfn = this.callbacks ? this.callbacks[START] : def\n    const movefn = this.callbacks ? this.callbacks[MOVE] : def\n    const endfn = this.callbacks ? this.callbacks[END] : def\n\n    this._setCalibration(this.direction)\n\n    const startHandler = (e) => {\n      if (this.direction !== null) {\n        this.callibration.start(e, startfn)\n      } else {\n        this.deactivate()\n      }\n    }\n\n    const moveHandler = (e) => {\n      if (this.direction !== null) {\n        this.callibration.move(e, movefn)\n      } else {\n        this.deactivate()\n      }\n    }\n\n    const endHandler = (e) => {\n      if (this.direction !== null) {\n        const state = {}\n        this.callibration.end(e, endfn, state) // state by Ref\n        this._processThresholdState(state)\n      } else {\n        this.deactivate()\n      }\n    }\n\n    this._register(startHandler, moveHandler, endHandler)\n    for (let i = 0; i < this.events.length; i++) {\n      this.target.addEventListener(this.events[i], this.handlers[i])\n    }\n  }\n\n  /**\n   * A method provided by the `Drawer interface` to deactivate the drawer\n   * @returns {void}\n   */\n  deactivate() {\n    for (let i = 0; i < this.events; i++) {\n      this.target.removeEventListener(this.events[i], this.handlers[i])\n    }\n    this._register()\n  }\n\n  /**\n   * A function used to register callbacks for the `Drawer class` `touchstart`,\n   * `touchmove` and `touchend` event handlers.\n   *\n   * Always call `Drawer.on(...)` before `Drawer.activate()`.\n   * As in:\n   * ```js\n   * const drawer = new Drawer()\n   * drawer.on(event, () => {\n   *  // TODO\n   * }).activate()\n   * ```\n   *\n   * To prevent modifying the context of `this`, the\n   * `drawer.setContext(...)` method should be invoked with an\n   * argument which is the `this` context of the\n   * `calling class` or alternatively using a wrapper function,\n   * then call the main handler method.\n   * ```js\n   * class UseDrawer {\n   *  // CODE\n   *  method() {\n   *    const drawer = new Drawer()\n   *    drawer.on(...)\n   *      .setContext(this)\n   *      .activate()\n   *  }\n   * }\n   * // OR\n   * drawer.on(event, (stateObj) => {\n   *  this.handler.call(this, stateObj)\n   * }).activate()\n   * ```\n   *\n   * Valid event types taken by this method are:\n   * - `start`\n   * - `move`\n   * - `end`\n   * - `threshold`\n   * - `belowthreshold`\n   * @param {string} event The event type as in the above list\n   * @param {Function} fn A function to call when this event triggers\n   * @returns {Drawer} Returns a instance of the `Drawer` class\n   */\n  on(event, fn) {\n    this._registerCallbacks(event, fn)\n    return this\n  }\n\n  setContext(ctx) {\n    this.context = ctx\n    this.left.setContext(ctx)\n    this.right.setContext(ctx)\n    this.up.setContext(ctx)\n    this.down.setContext(ctx)\n    return this\n  }\n\n  _processThresholdState(state) {\n    if (Object.keys(state).length < 1) {\n      return\n    }\n    const thState = state.state[0]\n    const vector = state.stateObj.rect\n    delete state.stateObj.rect\n    this.callbacks[thState].call(this.context || this, state.state, state.stateObj, vector)\n  }\n\n  _setCalibration(point) {\n    switch (point) {\n      case Drawer.UP:\n        this.callibration = new Top(this.options)\n        break\n      case Drawer.LEFT:\n        this.callibration = new Left(this.options)\n        break\n      case Drawer.DOWN:\n        this.callibration = new Bottom(this.options)\n        break\n      case Drawer.RIGHT:\n        this.callibration = new Right(this.options)\n        break\n    }\n  }\n\n  _registerCallbacks(event, fn) {\n    this.callbacks = this.callbacks || {\n      [START]: def,\n      [MOVE]: def,\n      [END]: def,\n      [THRESHOLD]: def,\n      [BELOW_THRESHOLD]: def\n    }\n    if (event in this.callbacks) {\n      this.callbacks[event] = fn\n    }\n  }\n\n  // private\n  _register(...handlers) {\n    this.handlers = [...handlers]\n  }\n}\n\nfunction def() {\n  return false\n}\n"],"names":["MAX_THRESHOLD","MIN_ILLEGAL_THRESHOLD","Final","validateThreshold","tsh","Bottom","options","element","ELEMENT","winSize","sizeOfWindow","window","screen","availHeight","height","offsetHeight","unit","maxArea","maxStartArea","context","start","e","changedTouches","pageY","clientY","startX","pageX","clientX","currentPosition","parseFloat","style","bottom","replace","dimension","displacement","START","ZERO","document","body","overflow","HIDDEN","move","end","setContext","ctx","_getStyle","elt","pseudoElt","getComputedStyle","_loopWinSizeChangeEvent","setInterval","availWidth","Vector","x1","y1","x2","y2","coordsX","coordsY","Rectangle","Math","abs","displacementX","displacementY","width","greaterWidth","DIRECTION","DIMENSION","DISPLACEMENT","EVENT_OBJ","THRESHOLD","BELOW_THRESHOLD","OPEN","CLOSE","UNIT","MAX_START_AREA","THRESHOLD_VALUE","Left","offsetWidth","threshold","startY","resumeX","resumeY","endX","endY","scrollControlSet","scrollControl","timing","fn","Date","positionOnStart","Util","response","call","resume","nextAction","virtualStart","vdimension","rect","isBoundX","scrollControlset","open","close","thresholdState","TIMING","getTime","signedOffsetSide","nonZero","zero","offsetSide","action","position","getResponse","state","trueForOpen","opposite","stateObj","Right","right","backdropSheet","opacity","display","DISPLAY","wGTh","Top","top","MOVE","END","Drawer","target","TARGET","events","handlers","direction","callibration","callbacks","activate","startfn","def","movefn","endfn","_setCalibration","startHandler","deactivate","moveHandler","endHandler","_processThresholdState","_register","i","length","addEventListener","removeEventListener","on","event","_registerCallbacks","left","up","down","Object","keys","thState","vector","point","UP","LEFT","DOWN","RIGHT"],"mappings":"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"}