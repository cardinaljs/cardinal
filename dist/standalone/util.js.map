{"version":3,"file":"util.js","sources":["../../src/util.js"],"sourcesContent":["// constants\nconst BLUR_SPREAD_SHADE = '0.7rem 0 rgba(0,0,0,.3)'\nexport const NAV_BOX_SHADOW = {\n  top: `0 0.2rem ${BLUR_SPREAD_SHADE}`,\n  left: `0.2rem 0 ${BLUR_SPREAD_SHADE}`,\n  bottom: `0 -0.2rem ${BLUR_SPREAD_SHADE}`,\n  right: `-0.2rem 0 ${BLUR_SPREAD_SHADE}`\n}\nexport const ZERO = 0\nexport const DIRECTIONS = [\n  'top', 'left',\n  'bottom', 'right'\n]\nexport const NAVSTATE_EVENTS = {\n  show: 'show',\n  hide: 'hide'\n}\nexport const DrawerResponseInterface = {\n  position: 'position',\n  posOnStart: 'posOnStart',\n  dimension: 'dimension',\n  displacement: 'displacement',\n  oppositeDimension: 'oppositeDimension',\n  close: 'closing',\n  open: 'opening'\n}\nexport const WINDOW = window\n\n// classes\nexport class Path {\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  /**\n   * Get difference between two paths\n   * @param {Path} path1 Path Object\n   * @param {Path} path2 Path Object\n   * @returns {Path} A different Path\n   */\n  static pathDifference(path1, path2) {\n    const x = path1.x - path2.x\n    const y = path1.y - path2.y\n    return new Path(x, y)\n  }\n\n  /**\n   * Join two different paths\n   * @param {Path} path1 Path Object\n   * @param {Path} path2 Path Object\n   * @returns {Path} A joined Path\n   */\n  static join(path1, path2) {\n    const x = path1.x + path2.x\n    const y = path1.y + path2.y\n    return new Path(x, y)\n  }\n}\n\nexport class Bound {\n  constructor(lower, upper) {\n    this.lower = lower\n    this.upper = upper\n  }\n\n  get gap() {\n    return this.upper - this.lower\n  }\n\n  get slack() {\n    return this.lower - this.upper\n  }\n}\n\nexport class ActivityManager {\n  constructor(activity) {\n    this.activity = activity\n    this.running = false\n    this.id = Date.now()\n  }\n\n  run() {\n    this.running = true\n  }\n\n  derun() {\n    this.running = false\n  }\n\n  isRunning() {\n    return this.running\n  }\n}\n\n// functions\nexport function dataCamelCase(data) {\n  // remove 'data-' prefix and return camelCase string\n  return camelCase(data.substring(5), '-')\n}\n\nexport function camelCase(data, delim = '-') {\n  const list = data instanceof Array ? data : data.split(delim)\n  return list.reduce((acc, cur) => acc + cur.charAt(0)\n    .toUpperCase() + cur.slice(1)\n  )\n}\n\nexport function unique(max = 1) {\n  return Math.floor(Math.random() * max)\n}\n\nexport function $(query) {\n  return document.querySelectorAll(query)[0]\n}\n\nexport function getAttribute(el, attr) {\n  return el.getAttribute(attr)\n}\n\nexport function hasAttribute(el, attr) {\n  return el.hasAttribute(attr)\n}\n\nexport function setAttribute(el, attr, value) {\n  el.setAttribute(attr, value)\n}\n\nexport function getData(el, dataName) {\n  const prop = dataCamelCase(dataName)\n  // this may return `undefined` in some Safari\n  if (el.dataset && el.dataset[prop]) {\n    return el.dataset[prop]\n  }\n  return getAttribute(el, dataName.substring(5))\n}\n\nexport function offsetRight(el) {\n  return WINDOW.screen.width - el.offsetLeft - el.offsetWidth\n}\n\nexport function offsetBottom(el) {\n  return WINDOW.screen.height - el.offsetTop - el.offsetHeight\n}\n\nexport function resolveThreshold(threshold) {\n  const MAX_THRESHOLD = 1\n  const MIN_ILLEGAL_THRESHOLD = 0\n  if (threshold < MAX_THRESHOLD && threshold > MIN_ILLEGAL_THRESHOLD) {\n    threshold = MAX_THRESHOLD - threshold\n    return threshold\n  } else if (threshold < MIN_ILLEGAL_THRESHOLD) {\n    threshold = MAX_THRESHOLD\n    return threshold\n  }\n  return MAX_THRESHOLD\n}\n\n/**\n * @param {HTMLElement} el an HTMLElement whose style should\n * be accessed\n * @param {string | string[] | {}} property A property/properties\n * to set or get\n * @param {string | number} value value to set as\n * @returns {CSSStyleDeclaration | string} A css style property\n * or CSSStyleDeclaration object\n */\nexport function css(...args) {\n  if (args.length < 1) {\n    return null\n  }\n  const el = args[0]\n  const property = args[1]\n  let value = args[2]\n  const STYLEMAP = WINDOW.getComputedStyle(el)\n\n  if (typeof property === 'string' && value) {\n    // setting one property\n    el.style[property] = value\n    return null\n  }\n  if (typeof property === 'object' && property instanceof Object) {\n    // `style` MUST = null\n    // setting many properties\n    value = property\n    for (const prop of Object.keys(value)) {\n      el.style[prop] = value[prop]\n    }\n    return null\n  } else if (Array.isArray(property)) {\n    // return all values of properties in the array for\n    // the element as object\n    const ostyle = {}\n    for (const prop of STYLEMAP) {\n      ostyle[prop] = STYLEMAP[prop]\n    }\n    return ostyle\n  } else if (typeof property === 'string') {\n    // get value of property\n    return STYLEMAP[property]\n  }\n  return STYLEMAP\n}\n"],"names":["BLUR_SPREAD_SHADE","NAV_BOX_SHADOW","top","left","bottom","right","ZERO","DIRECTIONS","NAVSTATE_EVENTS","show","hide","DrawerResponseInterface","position","posOnStart","dimension","displacement","oppositeDimension","close","open","WINDOW","window","Path","x","y","pathDifference","path1","path2","join","Bound","lower","upper","ActivityManager","activity","running","id","Date","now","run","derun","isRunning","dataCamelCase","data","camelCase","substring","delim","list","Array","split","reduce","acc","cur","charAt","toUpperCase","slice","unique","max","Math","floor","random","$","query","document","querySelectorAll","getAttribute","el","attr","hasAttribute","setAttribute","value","getData","dataName","prop","dataset","offsetRight","screen","width","offsetLeft","offsetWidth","offsetBottom","height","offsetTop","offsetHeight","resolveThreshold","threshold","MAX_THRESHOLD","MIN_ILLEGAL_THRESHOLD","css","length","property","STYLEMAP","getComputedStyle","style","Object","keys","isArray","ostyle"],"mappings":"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"}