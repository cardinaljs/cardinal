{"version":3,"file":"nav.js","sources":["../../src/nav/backdrop.js","../../src/nav/state.js","../../src/nav/drawer.js","../../src/nav/navservice.js","../../src/nav/popservice.js","../../src/nav/index.js"],"sourcesContent":["import {\n  css\n} from '../util'\n\nexport class Backdrop {\n  constructor(backdrop) {\n    this.backdrop = backdrop\n  }\n\n  show(time) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: 1,\n      transition: `opacity linear ${time / 1e3}s`\n    })\n  }\n\n  hide(time) {\n    css(this.backdrop, {\n      opacity: 0,\n      transition: `opacity linear ${time / 1e3}s`\n    })\n    window.setTimeout(() => {\n      css(this.backdrop, {\n        display: 'none'\n      })\n    }, time)\n  }\n\n  setOpacity(val) {\n    css(this.backdrop, {\n      display: 'block',\n      opacity: val,\n      transition: 'none'\n    })\n  }\n}\n","\n// interface\n\nexport default {\n  navstate: null,\n  event: new Proxy({}, {\n    set: (obj, prop, val) => {\n      if (typeof val !== 'function') {\n        throw new TypeError(`the set value: '${val}' is not callable`)\n      }\n      obj[prop] = val\n      return true\n    }\n  })\n}\n","import {\n  Bound,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  css,\n  getAttribute,\n  getData\n} from './../util'\nimport Drawer from './../drawer/'\nimport STATE from './state'\n\nconst ZERO = 0\nconst KILO = 1e3\nconst MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD = 0.5\nconst MIN_POSITIVE_DISPLACEMENT = 10\nconst MIN_NEGATIVE_DISPLACEMENT = -MIN_POSITIVE_DISPLACEMENT\nconst TRANSITION_STYLE = 'linear'\nconst EFFECT = 'transition'\nconst OVERFLOW = 'overflow'\nconst TRANS_TIMING = '0.1s'\nconst TRANS_TEMPLATE = `${TRANSITION_STYLE} ${TRANS_TIMING}`\nconst HIDDEN = 'hidden'\nconst SCROLL = 'scroll'\nconst AUTO = 'auto'\nconst HREF = 'href'\nconst HASH_ATTR = `data-${HREF}`\nconst START = 'start'\nconst MOVE = 'move'\nconst THRESHOLD = 'threshold'\nconst BELOW_THRESHOLD = `below${THRESHOLD}`\nconst MAX_TIME = KILO\nconst MAX_SPEED = 500\n\nclass NavDrawer {\n  /**\n   * Creates a new NavDrawer object. Providing the Left and Right\n   * Drawer functionality.\n   * Support for Top and Bottom may come in the future\n   * @throws RangeError\n   * @param {{}} options An options Object to configure the Drawer with\n   */\n  constructor(options) {\n    this.options = options\n    this.element = this.options.ELEMENT\n    this._body = this.options.BODY\n    this._backdrop = this.options.BACKDROP\n    this.direction = this.options.DIRECTION\n\n    this._checkDirection()\n\n    this.directionString = DIRECTIONS[this.direction]\n    this.bound = this._bound\n\n    const o = {\n      ...options,\n      SIZE: this.elementSize,\n      TARGET: document\n    }\n    this.drawer = new Drawer.SnappedDrawer(o, this.bound)\n    this.transition = `${this.directionString} ${TRANS_TEMPLATE}`\n  }\n\n  activate() {\n    this.drawer.on(START, this._startHandler)\n      .on(MOVE, this._moveHandler)\n      .on(THRESHOLD, this._threshold)\n      .on(BELOW_THRESHOLD, this._belowThreshold)\n      .setContext(this)\n      .activate()\n    return 0\n  }\n\n  deactivate() {\n    this.drawer.deactivate()\n    return 0\n  }\n\n  get elementSize() {\n    const axis = this.direction\n    if (axis === Drawer.UP || axis === Drawer.DOWN) {\n      return this.element.offsetHeight\n    }\n    return this.element.offsetWidth\n  }\n\n  /**\n   * @returns {Bound} a boundary object: Bound\n   */\n  get _bound() {\n    const curPos = css(this.element, this.directionString)\n      .replace(/[^\\d]*$/, '')\n    const upperBound = this.elementSize\n    const lowerBound = upperBound + parseInt(curPos, 10)\n    return new Bound(lowerBound, upperBound)\n  }\n\n  _startHandler(response) {\n    css(this.element, {\n      [this.directionString]: response.dimension,\n      boxShadow: NAV_BOX_SHADOW[this.directionString],\n      [EFFECT]: this.transition\n    })\n    this._body.style.overflow = HIDDEN\n  }\n\n  _moveHandler(response, rectangle) {\n    let curPos = this.direction === Drawer.UP || this.direction === Drawer.DOWN ? rectangle.coordsY.y2 : rectangle.coordsX.x2\n    css(this.element, {\n      [this.directionString]: response.dimension,\n      [EFFECT]: 'none',\n      [OVERFLOW]: HIDDEN\n    })\n    if (this.direction === Drawer.RIGHT) {\n      const WIN_SIZE = window.screen.availWidth\n      curPos = WIN_SIZE - curPos\n      this._backdrop.setOpacity(curPos / this.elementSize)\n      return\n    }\n    this._backdrop.setOpacity(curPos / this.elementSize)\n  }\n\n  _threshold(state, stateObj) {\n    const isOpen = state[1] === 'open'\n    const options = {\n      stateObj,\n      transition: `${this.directionString} ease ${this._calcSpeed(stateObj.TIMING) / KILO}s`\n    }\n    if (isOpen) {\n      this._hide(options)\n    } else {\n      this._show(options)\n    }\n  }\n\n  _belowThreshold(state, stateObj, rect) {\n    const isClosed = state[1] !== 'open'\n    const overallEventTime = stateObj.TIMING\n    const MTTOB = MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD\n    const MPD = MIN_POSITIVE_DISPLACEMENT\n    const MND = MIN_NEGATIVE_DISPLACEMENT\n    const displacement = this.direction === Drawer.UP || this.direction === Drawer.DOWN\n      ? rect.displacementY : rect.displacementX\n    const options = {\n      stateObj,\n      transition: `${this.directionString} ease ${this._calcSpeed(stateObj.TIMING) / KILO}s`\n    }\n    let LOGIC\n    if (this.direction === Drawer.LEFT && isClosed || this.direction === Drawer.RIGHT && !isClosed) {\n      LOGIC =  displacement > ZERO && displacement >= MPD && rect.greaterWidth\n    } else {\n      LOGIC = displacement < ZERO && displacement <= MND && rect.greaterWidth\n    }\n\n    if (overallEventTime / KILO < MTTOB) {\n      // DIRECTION: Drawer.UP | Drawer.LEFT\n      if (LOGIC) {\n        this._overrideBelowThresh(!isClosed, options)\n      } else {\n        if (isClosed) {\n          // close it back didn't hit thresh. and can't override\n          this._hide(options)\n          return\n        }\n        // open it back didn't hit thresh. and can't override because not enough displacement\n        this._show(options)\n      }\n    } else {\n      if (isClosed) {\n        // close it back didn't hit thresh. and can't override because not enough velocity or displacement\n        this._hide(options)\n        return\n      }\n      // open it back didn't hit thresh. and can't override because not enough velocity or displacement\n      this._show(options)\n    }\n  }\n\n  _show(options) {\n    this._showPrep(options)\n    this.element.style[this.directionString] = options.stateObj.dimension\n  }\n\n  _hide(options) {\n    this._hidePrep(options)\n    this.element.style[this.directionString] = options.stateObj.dimension\n  }\n\n  _overrideBelowThresh(isOpen, options) {\n    if (isOpen) {\n      this._hidePrep(options)\n      this.element.style[this.directionString] = options.stateObj.oppositeDimension\n    } else {\n      this._showPrep(options)\n      this.element.style[this.directionString] = options.stateObj.oppositeDimension\n    }\n  }\n\n  _hidePrep(options) {\n    this._body.style.overflow = SCROLL\n    this._backdrop.hide(this.options.TRANSITION)\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n    if (!this.bound.lower) {\n      this.element.style.boxShadow = 'none'\n    }\n    this._setState('close')\n    // callback for when nav is hidden\n    if (STATE.event[NAVSTATE_EVENTS.hide]) {\n      STATE.event[NAVSTATE_EVENTS.hide]()\n    }\n  }\n\n  _showPrep(options) {\n    const buttonHash = getAttribute(this.options.INIT_ELEM, HREF) || getData(this.options.INIT_ELEM, HASH_ATTR)\n    if (buttonHash) {\n      window.location.hash = buttonHash\n    }\n    this._body.style.overflow = HIDDEN\n    this._backdrop.show(this.options.TRANSITION)\n    css(this.element, {\n      [EFFECT]: options.transition,\n      [OVERFLOW]: AUTO\n    })\n    this._setState('open')\n    // callback for when nav is shown\n    if (STATE.event[NAVSTATE_EVENTS.show]) {\n      STATE.event[NAVSTATE_EVENTS.show]()\n    }\n  }\n\n  _calcSpeed(time) {\n    if (time >= MAX_TIME) {\n      return MAX_SPEED\n    }\n    const percent = 100\n    const percentage = time / MAX_TIME * percent\n    return percentage / percent * MAX_SPEED\n  }\n\n  _checkDirection() {\n    if (this.direction !== Drawer.LEFT && this.direction !== Drawer.RIGHT) {\n      throw new RangeError('Direction out of range')\n    }\n  }\n\n  _setState(mode) {\n    switch (mode) {\n      case 'open':\n        STATE.navstate = {\n          alive: true,\n          activity: {\n            service: this,\n            action: mode\n          }\n        }\n        break\n      case 'close':\n        STATE.navstate = {\n          alive: false,\n          activity: {\n            service: this,\n            action: mode\n          }\n        }\n        break\n      default:\n        throw new Error('this should never happen')\n    }\n  }\n}\n\nexport default NavDrawer\n","import {\n  NAVSTATE_EVENTS,\n  NAV_BOX_SHADOW,\n  ZERO,\n  css,\n  getAttribute,\n  getData\n} from './../util'\nimport STATE from './state'\n\nconst TRANSITION_STYLE = 'ease'\nconst EFFECT = 'transition'\nconst TRANS_END = 'transitionend'\n\nclass NavService {\n  constructor(options) {\n    this.options = options\n    this.nav = options.ELEMENT\n    this.button = options.INIT_ELEM\n    this.backdrop = options.BACKDROP\n    this.backdropElement = this.backdrop.backdrop\n    this.event = 'click'\n    this.direction = options.DIRECTION\n    this.width = this.nav.offsetWidth\n    this.transTime = options.TRANSITION / 1e3\n    this.transition = `${this.direction} ${TRANSITION_STYLE} ${this.transTime}s`\n    // state of the nav, whether open or close\n    this.alive = false\n    // diff. btw. event triggered from Drawer class and on here\n    /**\n     * @private\n     */\n    this._closeInvoked = false\n    /**\n     * @readonly\n     * @private\n     */\n    this._initialState = NavService.css(this.nav, this.direction)\n    this._handlers = null\n  }\n\n  activate() {\n    const ClickHandler = (mouseEvent) => {\n      this.handler(mouseEvent)\n    }\n    const BackdropHandler = () => {\n      this._close()\n    }\n    const TransitionHandler = () => {\n      if (!this.alive && this._closeInvoked) {\n        this._cleanShadow()\n        this._closeInvoked = false\n      }\n    }\n    this._register({\n      ClickHandler,\n      BackdropHandler,\n      TransitionHandler\n    })\n\n    this.button.addEventListener(this.event, this._handlers.ClickHandler)\n    this.backdropElement.addEventListener(this.event, this._handlers.BackdropHandler)\n    if (this._initialState === `-${this._width('px')}`) {\n      this.nav.addEventListener(TRANS_END, this._handlers.TransitionHandler)\n    }\n    return 0\n  }\n\n  deactivate() {\n    throw new ReferenceError('cannot deactivate a default service. This service must be kept running')\n  }\n\n  forceDeactivate() {\n    this.button.removeEventListener(this.event, this._handlers.ClickHandler)\n    this.backdropElement.removeEventListener(this.event, this._handlers.BackdropHandler)\n    if (this._initialState === `-${this._width('px')}`) {\n      this.nav.removeEventListener(TRANS_END, this._handlers.TransitionHandler)\n    }\n    this._register(null)\n  }\n\n  handler(mouseEvent) {\n    mouseEvent.preventDefault()\n    const state = NavService._toNum(NavService.css(this.nav, this.direction))\n    if (state < ZERO) {\n      const buttonHash = getAttribute(this.button, 'href') || getData(this.button, 'data-href')\n      if (buttonHash) {\n        window.location.hash = buttonHash\n      }\n      this._open()\n    } else {\n      this._close()\n    }\n  }\n\n  static css(el, property, style) {\n    return css(el, property, style)\n  }\n\n  static _toNum(val) {\n    val = val.replace(/[^\\d]*$/, '')\n    return /\\.(?=\\d)/.test(val) ? Math.round(parseFloat(val)) : parseInt(val, 10)\n  }\n\n  _width(unit) {\n    unit = unit || ''\n    return this.width + unit\n  }\n\n  _register(handler) {\n    this._handlers = handler\n  }\n\n  _open() {\n    const style = {\n      [this.direction]: ZERO,\n      [EFFECT]: this.transition,\n      boxShadow: NAV_BOX_SHADOW[this.direction]\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.show(this.options.TRANSITION)\n    // callback for when nav is shown\n    if (STATE.event[NAVSTATE_EVENTS.show]) {\n      STATE.event[NAVSTATE_EVENTS.show]()\n    }\n    this.alive = true\n    const state = {\n      alive: this.alive,\n      activity: {\n        service: this,\n        action: 'open'\n      }\n    }\n    STATE.navstate = state\n  }\n\n  _close() {\n    const style = {\n      [this.direction]: this._initialState,\n      [EFFECT]: this.transition\n      // don't clean shadow here\n      // it's transitioning\n    }\n    NavService.css(this.nav, style)\n    this.backdrop.hide(this.options.TRANSITION)\n    // callback for when nav is hidden\n    if (STATE.event[NAVSTATE_EVENTS.hide]) {\n      STATE.event[NAVSTATE_EVENTS.hide]()\n    }\n    this.alive = false\n    this._closeInvoked = true\n    const state = {\n      alive: this.alive,\n      activity: {\n        service: this,\n        action: 'close'\n      }\n    }\n    STATE.navstate = state\n  }\n\n  _cleanShadow() {\n    NavService.css(this.nav, 'boxShadow', 'none')\n  }\n}\n\nexport default NavService\n","import {\n  getAttribute,\n  getData\n} from '../util'\nimport STATE from './state'\n\nclass PopService {\n  constructor(parentService, options) {\n    this.options = options\n    this.parentService = parentService\n    this.button = options.INIT_ELEM\n    this.event = 'hashchange'\n    this.handler = null\n  }\n\n  activate() {\n    const handler = (hashChangeEvent) => {\n      this._hashchange(hashChangeEvent)\n    }\n    this._register(handler)\n    window.addEventListener(this.event, this.handler, true)\n    return 0\n  }\n\n  deactivate() {\n    window.removeEventListener(this.event, this.handler, true)\n    this._register(null)\n    return 0\n  }\n\n  /**\n   * @param {HashChangeEvent} hashChangeEvent Event object\n   * @returns {void}\n   */\n  _hashchange(hashChangeEvent) {\n    const oldHash = PopService._getHash(hashChangeEvent.oldURL)\n    if (oldHash === (getAttribute(this.button, 'href') ||\n    getData(this.button, 'data-href')) &&\n    STATE.navstate && STATE.navstate.alive) {\n      hashChangeEvent.stopImmediatePropagation()\n      this.parentService._close()\n    }\n  }\n\n  _register(handler) {\n    this.handler = handler\n  }\n\n  static _getHash(uri) {\n    let hash = uri\n    const indexOfHash = hash.lastIndexOf('#')\n    hash = indexOfHash !== -1 ? hash.slice(indexOfHash).replace(/(?:[^\\w\\d-]+)$/) : null\n    return hash\n  }\n}\n\nexport default PopService\n","import {\n  $,\n  DIRECTIONS,\n  NAVSTATE_EVENTS,\n  css,\n  getData\n} from './../util'\nimport {\n  Backdrop\n} from './backdrop'\nimport NavDrawer from './drawer'\nimport NavService from './navservice'\nimport PopService from './popservice'\nimport STATE from './state'\n\nconst BACKDROP = 'backdrop'\nconst MEDIA_DRAW = 'data-max-width'\nconst CLASS_TYPE = '[object NavCard]'\nconst NAME = 'Nav'\nconst NAV = window[NAME] || null\n\nclass NavCard {\n  constructor(src, dest) {\n    /**\n     * Covert Backdrop\n     * ----------------\n     * Just incase `options.backdrop = false`\n     * prevents multiple `if` statements\n     * so we don't have to check whether\n     * backdrop is enabled anytime we want to access it.\n     *\n     * Insert into DOM only:\n     * when `options.backdrop = true`\n     * `options.backdropClass` is undefined\n     */\n    this.backdrop = document.createElement('div')\n    this.backdrop.className = BACKDROP\n    css(this.backdrop, {\n      background: 'rgba(0,0,0,.4)',\n      height: '100%',\n      width: '100%',\n      display: 'none',\n      position: 'fixed',\n      top: 0,\n      left: 0\n    })\n    this.src = src\n    this.dest = dest\n    this.body = document.body\n    this.Drawer = null\n    this.SheetService = null\n    this.PopService = null\n  }\n\n  static defaultConfig = {\n    transition: 500,\n    direction: -1,\n    useBackdrop: false,\n    backdrop: null,\n    dest: null,\n    maxStartArea: 25,\n    threshold: 1 / 2,\n    unit: 'px'\n  }\n\n  static SERVICES = {\n    Default: 0x20,\n    Drawer: 0x40,\n    Pop: 0x80\n  }\n\n  setup(options) {\n    if (!this.src) {\n      throw new TypeError(\n        `expected ${NAME} to be constructed with at least 'src' argument:\n        expected 'src' to be selector string or HTMLElement.\n          constructor(src: string | HTMLElement, dest?: string | HTMLElement)`\n      )\n    }\n\n    const opts = typeof Object.assign === 'function' ? Object.assign({}, NavCard.defaultConfig) : {\n      ...NavCard.defaultConfig\n    }\n\n    if (options && typeof options === 'object') {\n      for (const prop of Object.keys(options)) {\n        if (Object.prototype.hasOwnProperty.call(opts, prop)) {\n          opts[prop] = options[prop]\n        } else {\n          continue\n        }\n      }\n    }\n\n    this.dest = this.dest ? this.dest : opts.dest\n\n    const srcEl = this.src instanceof HTMLElement ? this.src : $(this.src)\n    const destEl = this.dest instanceof HTMLElement ? this.dest : $(this.dest)\n    let maxWidth  = getData(destEl, MEDIA_DRAW)\n\n    if (opts.useBackdrop) {\n      const backdropclass = opts.backdrop || false\n      // if `opts.useBackdrop` and no `backdrop` given\n      // append a custom backdrop\n      if (!backdropclass) {\n        destEl.insertAdjacentElement('beforeBegin', this.backdrop)\n      } else if (typeof backdropclass === 'string') {\n        // check if backdropclass is normal string or css class selector\n        const backdrop =  /^\\./.test(backdropclass) ? backdropclass : `.${backdropclass}`\n        this.backdrop = $(backdrop)\n      } else if (backdropclass instanceof HTMLElement) {\n        this.backdrop = backdropclass\n      } else {\n        throw new TypeError('expected \\'options.backdrop\\' to be a selector string or HTMLElement.')\n      }\n    }\n\n    maxWidth = /px$/.test(maxWidth) ? maxWidth : `${maxWidth}px`\n    const defaultOptions = {\n      ELEMENT: destEl,\n      INIT_ELEM: srcEl,\n      BACKDROP: new Backdrop(this.backdrop),\n      BODY: this.body,\n      TRANSITION: opts.transition,\n      DIRECTION: DIRECTIONS[opts.direction],\n      unit: opts.unit\n    }\n    const drawerOptions = {\n      ...defaultOptions,\n      MAX_WIDTH: maxWidth,\n      DIRECTION: opts.direction,\n      maxStartArea: opts.maxStartArea,\n      threshold: opts.threshold\n    }\n    const hashOptions = {\n      INIT_ELEM: defaultOptions.INIT_ELEM\n    }\n\n    return new NavMountWorker({\n      defaultOptions,\n      drawerOptions,\n      hashOptions\n    })\n  }\n\n  terminate(service) {\n    let flag = 0\n    flag |= service\n    if (flag & NavCard.SERVICES.Default && this.SheetService instanceof NavService) {\n      this.SheetService.deactivate()\n    }\n    if (flag & NavCard.SERVICES.Drawer && this.Drawer instanceof NavDrawer) {\n      this.Drawer.deactivate()\n    }\n    if (flag & NavCard.SERVICES.Hash && this.PopService instanceof PopService) {\n      this.PopService.deactivate()\n    }\n    if (!flag) {\n      throw new Error('a service id is required')\n    }\n  }\n\n  toString() {\n    return CLASS_TYPE\n  }\n\n  static namespace(name) {\n    window[name] = window[name] || {}\n    window[name][NAME] = NavCard\n    window[NAME] = NAV\n  }\n\n  _drawerAPI(options) {\n    this.Drawer = new NavDrawer(options)\n    return {\n      activate: () => this.Drawer.activate(),\n      deactivate: () => this.Drawer.deactivate()\n    }\n  }\n\n  _hashAPI(options) {\n    this.PopService = new PopService(this.SheetService, options)\n    return {\n      activate: () => this.PopService.activate(),\n      deactivate: () => this.PopService.deactivate()\n    }\n  }\n\n  _defaultAPI(options) {\n    this.SheetService = new NavService(options)\n    return {\n      activate: () => this.SheetService.activate(),\n      deactivate: () => this.SheetService.deactivate()\n    }\n  }\n}\n\nclass NavMountWorker extends NavCard {\n  constructor(options) {\n    super()\n    this.options = options\n  }\n\n  mount() {\n    const DEFAULT_ACTIVE = !this._defaultAPI(this.options.defaultOptions).activate()\n    const DRAWER_ACTIVE = !this._drawerAPI(this.options.drawerOptions).activate()\n    const HASH_ACTIVE = !this._hashAPI(this.options.hashOptions).activate()\n    return new Promise((resolve, reject) => {\n      if (!(DEFAULT_ACTIVE && DRAWER_ACTIVE && HASH_ACTIVE)) {\n        reject(new Error('one or more services could not activate'))\n        return\n      }\n      resolve(NavStateEvent)\n    })\n  }\n\n  unmount() {\n    this.SheetService.forceDeactivate()\n    this.Drawer.deactivate()\n    this.PopService.deactivate()\n  }\n\n  toString() {\n    return '[object NavMountWorker]'\n  }\n}\n\nconst NavStateEvent = {\n  events: [NAVSTATE_EVENTS.show, NAVSTATE_EVENTS.hide],\n  on: (event, handle) => {\n    if (!(NavStateEvent.events.indexOf(event) + 1)) {\n      throw new Error(`unknown event '${event}'`)\n    }\n    STATE.event[event] = handle\n  },\n  off: (event) => {\n    if (!(NavStateEvent.events.indexOf(event) + 1)) {\n      throw new Error(`unknown event '${event}'`)\n    }\n    STATE.event[event] = null\n  }\n}\n\nexport default NavCard\n"],"names":["Backdrop","backdrop","show","time","css","display","opacity","transition","hide","window","setTimeout","setOpacity","val","navstate","event","Proxy","set","obj","prop","TypeError","ZERO","KILO","MIN_TIME_TO_OVERRIDE_BELOWTHRESHOLD","MIN_POSITIVE_DISPLACEMENT","MIN_NEGATIVE_DISPLACEMENT","TRANSITION_STYLE","EFFECT","OVERFLOW","TRANS_TIMING","TRANS_TEMPLATE","HIDDEN","SCROLL","AUTO","HREF","HASH_ATTR","START","MOVE","THRESHOLD","BELOW_THRESHOLD","MAX_TIME","MAX_SPEED","NavDrawer","options","element","ELEMENT","_body","BODY","_backdrop","BACKDROP","direction","DIRECTION","_checkDirection","directionString","DIRECTIONS","bound","_bound","o","SIZE","elementSize","TARGET","document","drawer","Drawer","SnappedDrawer","activate","on","_startHandler","_moveHandler","_threshold","_belowThreshold","setContext","deactivate","response","dimension","boxShadow","NAV_BOX_SHADOW","style","overflow","rectangle","curPos","UP","DOWN","coordsY","y2","coordsX","x2","RIGHT","WIN_SIZE","screen","availWidth","state","stateObj","isOpen","_calcSpeed","TIMING","_hide","_show","rect","isClosed","overallEventTime","MTTOB","MPD","MND","displacement","displacementY","displacementX","LOGIC","LEFT","greaterWidth","_overrideBelowThresh","_showPrep","_hidePrep","oppositeDimension","TRANSITION","lower","_setState","STATE","NAVSTATE_EVENTS","buttonHash","getAttribute","INIT_ELEM","getData","location","hash","percent","percentage","RangeError","mode","alive","activity","service","action","Error","axis","offsetHeight","offsetWidth","replace","upperBound","lowerBound","parseInt","Bound","TRANS_END","NavService","nav","button","backdropElement","width","transTime","_closeInvoked","_initialState","_handlers","ClickHandler","mouseEvent","handler","BackdropHandler","_close","TransitionHandler","_cleanShadow","_register","addEventListener","_width","ReferenceError","forceDeactivate","removeEventListener","preventDefault","_toNum","_open","el","property","test","Math","round","parseFloat","unit","PopService","parentService","hashChangeEvent","_hashchange","oldHash","_getHash","oldURL","stopImmediatePropagation","uri","indexOfHash","lastIndexOf","slice","MEDIA_DRAW","CLASS_TYPE","NAME","NAV","NavCard","src","dest","createElement","className","background","height","position","top","left","body","SheetService","setup","opts","Object","assign","defaultConfig","keys","prototype","hasOwnProperty","call","srcEl","HTMLElement","$","destEl","maxWidth","useBackdrop","backdropclass","insertAdjacentElement","defaultOptions","drawerOptions","MAX_WIDTH","maxStartArea","threshold","hashOptions","NavMountWorker","terminate","flag","SERVICES","Default","Hash","toString","namespace","name","_drawerAPI","_hashAPI","_defaultAPI","Pop","mount","DEFAULT_ACTIVE","DRAWER_ACTIVE","HASH_ACTIVE","Promise","resolve","reject","NavStateEvent","unmount","events","handle","indexOf","off"],"mappings":"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"}